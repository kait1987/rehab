Debugger listening on ws://127.0.0.1:50900/22e656d3-652d-49c2-8fd1-abbb5eb95908
For help, see: https://nodejs.org/en/docs/inspector
Debugger attached.

> nextjs-supabase-boilerplate@0.1.0 lint
> eslint --format json

Debugger listening on ws://127.0.0.1:50904/a90fa8ce-8843-41ac-a938-2a50dca7bb1e
For help, see: https://nodejs.org/en/docs/inspector
Debugger attached.
(node:30336) ESLintIgnoreWarning: The ".eslintignore" file is no longer supported. Switch to using the "ignores" property in "eslint.config.js": https://eslint.org/docs/latest/use/configure/migration-guide#ignoring-files
(Use `node --trace-warnings ...` to show where the warning was created)
[{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\actions\\pain-check.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\hooks\\use-sync-user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\next.config.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sentryBuildOptions' is assigned a value but never used.","line":39,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { NextConfig } from \"next\";\r\nimport { withSentryConfig } from \"@sentry/nextjs\";\r\n\r\n// ë¹Œë“œ íƒ€ì„ í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ (ê²½ê³ ë§Œ ì¶œë ¥, ì—ëŸ¬ëŠ” ë˜ì§€ì§€ ì•ŠìŒ)\r\nfunction validateEnvVars() {\r\n  if (process.env.NODE_ENV === \"production\") {\r\n    // Production ë¹Œë“œ ì‹œì—ë§Œ ê²½ê³  ì¶œë ¥\r\n    if (!process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY) {\r\n      console.warn(\"âš ï¸  NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY is not set\");\r\n      console.warn(\r\n        \"   í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ë°©ë²•ì€ docs/VERCEL_CLERK_ENV_SETUP.mdë¥¼ ì°¸ê³ í•˜ì„¸ìš”.\",\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nvalidateEnvVars();\r\n\r\nconst nextConfig: NextConfig = {\r\n  /* config options here */\r\n  eslint: {\r\n    // ë¹Œë“œ ì‹œ ESLint ì—ëŸ¬ë¥¼ ë¬´ì‹œ (í”„ë¡œë•ì…˜ ë°°í¬ë¥¼ ìœ„í•´)\r\n    ignoreDuringBuilds: true,\r\n  },\r\n  typescript: {\r\n    // ë¹Œë“œ ì‹œ TypeScript ì—ëŸ¬ë¥¼ ë¬´ì‹œí•˜ì§€ ì•ŠìŒ (íƒ€ì… ì•ˆì •ì„± ìœ ì§€)\r\n    ignoreBuildErrors: false,\r\n  },\r\n\r\n  // ğŸ”¥ ì—¬ê¸°ì— í™˜ê²½ ë³€ìˆ˜ ëª…ì‹œì  ì¶”ê°€\r\n  env: {\r\n    NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\r\n      process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY || \"\",\r\n    CLERK_SECRET_KEY: process.env.CLERK_SECRET_KEY || \"\",\r\n  },\r\n};\r\n\r\n// Sentry ì„¤ì • ì˜µì…˜\r\nconst sentryBuildOptions = {\r\n  // ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ ì„¤ì • (SENTRY_AUTH_TOKEN í•„ìš”)\r\n  silent: !process.env.SENTRY_AUTH_TOKEN,\r\n  \r\n  // ì†ŒìŠ¤ë§µ ì‚­ì œ (ë°°í¬ í›„ ë³´ì•ˆ)\r\n  hideSourceMaps: true,\r\n  \r\n  // ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•ì„ ìœ„í•´ ì†ŒìŠ¤ë§µ ì—…ë¡œë“œ ë¹„í™œì„±í™” (ì„ íƒ)\r\n  disableServerWebpackPlugin: !process.env.SENTRY_AUTH_TOKEN,\r\n  disableClientWebpackPlugin: !process.env.SENTRY_AUTH_TOKEN,\r\n  \r\n  // ìë™ ê³„ì¸¡\r\n  automaticVercelMonitors: true,\r\n};\r\n\r\nexport default withSentryConfig(nextConfig, {\r\n  // For all available options, see:\r\n  // https://www.npmjs.com/package/@sentry/webpack-plugin#options\r\n\r\n  org: \"personal-miw\",\r\n\r\n  project: \"javascript-nextjs\",\r\n\r\n  // Only print logs for uploading source maps in CI\r\n  silent: !process.env.CI,\r\n\r\n  // For all available options, see:\r\n  // https://docs.sentry.io/platforms/javascript/guides/nextjs/manual-setup/\r\n\r\n  // Upload a larger set of source maps for prettier stack traces (increases build time)\r\n  widenClientFileUpload: true,\r\n\r\n  // Route browser requests to Sentry through a Next.js rewrite to circumvent ad-blockers.\r\n  // This can increase your server load as well as your hosting bill.\r\n  // Note: Check that the configured route will not match with your Next.js middleware, otherwise reporting of client-\r\n  // side errors will fail.\r\n  tunnelRoute: \"/monitoring\",\r\n\r\n  webpack: {\r\n    // Enables automatic instrumentation of Vercel Cron Monitors. (Does not yet work with App Router route handlers.)\r\n    // See the following for more information:\r\n    // https://docs.sentry.io/product/crons/\r\n    // https://vercel.com/docs/cron-jobs\r\n    automaticVercelMonitors: true,\r\n\r\n    // Tree-shaking options for reducing bundle size\r\n    treeshake: {\r\n      // Automatically tree-shake Sentry logger statements to reduce bundle size\r\n      removeDebugLogging: true,\r\n    },\r\n  },\r\n});\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\public\\sw.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\sentry.edge.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\sentry.server.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\actions\\pain-check.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\_login_backup\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\_login_backup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\body-parts\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":4,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":4,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GripVertical' is defined but never used.","line":26,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":60,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":109,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Plus, Pencil, Trash2, GripVertical } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface BodyPart {\r\n  id: string;\r\n  name: string;\r\n  displayOrder: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function BodyPartsPage() {\r\n  const [bodyParts, setBodyParts] = useState<BodyPart[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Dialog State\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    displayOrder: 0,\r\n    isActive: true,\r\n  });\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchBodyParts();\r\n  }, []);\r\n\r\n  async function fetchBodyParts() {\r\n    try {\r\n      const res = await fetch(\"/api/admin/body-parts\");\r\n      if (!res.ok) throw new Error(\"Failed to fetch\");\r\n      const data = await res.json();\r\n      setBodyParts(data.bodyParts);\r\n    } catch (err) {\r\n      toast.error(\"ì˜¤ë¥˜\", { description: \"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (bodyPart?: BodyPart) => {\r\n    if (bodyPart) {\r\n      setEditingId(bodyPart.id);\r\n      setFormData({\r\n        name: bodyPart.name,\r\n        displayOrder: bodyPart.displayOrder,\r\n        isActive: bodyPart.isActive,\r\n      });\r\n    } else {\r\n      setEditingId(null);\r\n      setFormData({\r\n        name: \"\",\r\n        displayOrder: bodyParts.length + 1,\r\n        isActive: true,\r\n      });\r\n    }\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!formData.name) {\r\n      toast.error(\"ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const url =\r\n        \"/api/admin/body-parts\" + (editingId ? `?id=${editingId}` : \"\");\r\n      const method = editingId ? \"PUT\" : \"POST\";\r\n\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Failed to save\");\r\n\r\n      toast.success(\"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n      setIsDialogOpen(false);\r\n      fetchBodyParts();\r\n    } catch (err) {\r\n      toast.error(\"ì €ì¥ ì‹¤íŒ¨\", { description: \"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\" });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (\r\n      !confirm(\r\n        \"ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê´€ë ¨ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚­ì œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\r\n      )\r\n    )\r\n      return;\r\n\r\n    try {\r\n      const res = await fetch(`/api/admin/body-parts?id=${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        throw new Error(data.error || \"Failed to delete\");\r\n      }\r\n\r\n      toast.success(\"ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n      fetchBodyParts();\r\n    } catch (err) {\r\n      toast.error(\"ì‚­ì œ ì‹¤íŒ¨\", {\r\n        description:\r\n          err instanceof Error ? err.message : \"ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center p-8\">\r\n        <Loader2 className=\"animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Body Parts Master</h1>\r\n        <Button onClick={() => handleOpenDialog()}>\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          ë¶€ìœ„ ì¶”ê°€\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardContent className=\"p-0\">\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead className=\"w-[100px]\">ìˆœì„œ</TableHead>\r\n                <TableHead>ì´ë¦„</TableHead>\r\n                <TableHead>ìƒíƒœ</TableHead>\r\n                <TableHead className=\"text-right\">ê´€ë¦¬</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {bodyParts.map((bp) => (\r\n                <TableRow key={bp.id}>\r\n                  <TableCell>{bp.displayOrder}</TableCell>\r\n                  <TableCell className=\"font-medium\">{bp.name}</TableCell>\r\n                  <TableCell>\r\n                    {bp.isActive ? (\r\n                      <Badge\r\n                        variant=\"outline\"\r\n                        className=\"bg-green-50 text-green-700 border-green-200\"\r\n                      >\r\n                        í™œì„±\r\n                      </Badge>\r\n                    ) : (\r\n                      <Badge variant=\"secondary\">ë¹„í™œì„±</Badge>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleOpenDialog(bp)}\r\n                    >\r\n                      <Pencil className=\"w-4 h-4\" />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDelete(bp.id)}\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4 text-red-500\" />\r\n                    </Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingId ? \"ë¶€ìœ„ ìˆ˜ì •\" : \"ë¶€ìœ„ ì¶”ê°€\"}</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label>ì´ë¦„</Label>\r\n              <Input\r\n                value={formData.name}\r\n                onChange={(e) =>\r\n                  setFormData((prev) => ({ ...prev, name: e.target.value }))\r\n                }\r\n                placeholder=\"ì˜ˆ: ì–´ê¹¨\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label>í‘œì‹œ ìˆœì„œ</Label>\r\n              <Input\r\n                type=\"number\"\r\n                value={formData.displayOrder}\r\n                onChange={(e) =>\r\n                  setFormData((prev) => ({\r\n                    ...prev,\r\n                    displayOrder: parseInt(e.target.value),\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Checkbox\r\n                id=\"active\"\r\n                checked={formData.isActive}\r\n                onCheckedChange={(c) =>\r\n                  setFormData((prev) => ({ ...prev, isActive: !!c }))\r\n                }\r\n              />\r\n              <Label htmlFor=\"active\">í™œì„±í™”</Label>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\r\n              ì·¨ì†Œ\r\n            </Button>\r\n            <Button onClick={handleSave} disabled={saving}>\r\n              {saving && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\r\n              ì €ì¥\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\equipment\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":4,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":4,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":60,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":60,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":109,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Plus, Pencil, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface Equipment {\r\n  id: string;\r\n  name: string;\r\n  displayOrder: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function EquipmentPage() {\r\n  const [equipment, setEquipment] = useState<Equipment[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Dialog State\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    displayOrder: 0,\r\n    isActive: true,\r\n  });\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchEquipment();\r\n  }, []);\r\n\r\n  async function fetchEquipment() {\r\n    try {\r\n      const res = await fetch(\"/api/admin/equipment\");\r\n      if (!res.ok) throw new Error(\"Failed to fetch\");\r\n      const data = await res.json();\r\n      setEquipment(data.equipment);\r\n    } catch (err) {\r\n      toast.error(\"ì˜¤ë¥˜\", { description: \"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\" });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const handleOpenDialog = (eq?: Equipment) => {\r\n    if (eq) {\r\n      setEditingId(eq.id);\r\n      setFormData({\r\n        name: eq.name,\r\n        displayOrder: eq.displayOrder,\r\n        isActive: eq.isActive,\r\n      });\r\n    } else {\r\n      setEditingId(null);\r\n      setFormData({\r\n        name: \"\",\r\n        displayOrder: equipment.length + 1,\r\n        isActive: true,\r\n      });\r\n    }\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!formData.name) {\r\n      toast.error(\"ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const url =\r\n        \"/api/admin/equipment\" + (editingId ? `?id=${editingId}` : \"\");\r\n      const method = editingId ? \"PUT\" : \"POST\";\r\n\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Failed to save\");\r\n\r\n      toast.success(\"ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n      setIsDialogOpen(false);\r\n      fetchEquipment();\r\n    } catch (err) {\r\n      toast.error(\"ì €ì¥ ì‹¤íŒ¨\", { description: \"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\" });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (\r\n      !confirm(\r\n        \"ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê´€ë ¨ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚­ì œë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\r\n      )\r\n    )\r\n      return;\r\n\r\n    try {\r\n      const res = await fetch(`/api/admin/equipment?id=${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        throw new Error(data.error || \"Failed to delete\");\r\n      }\r\n\r\n      toast.success(\"ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n      fetchEquipment();\r\n    } catch (err) {\r\n      toast.error(\"ì‚­ì œ ì‹¤íŒ¨\", {\r\n        description:\r\n          err instanceof Error ? err.message : \"ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center p-8\">\r\n        <Loader2 className=\"animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-2xl font-bold\">Equipment Master</h1>\r\n        <Button onClick={() => handleOpenDialog()}>\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          ê¸°êµ¬ ì¶”ê°€\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardContent className=\"p-0\">\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead className=\"w-[100px]\">ìˆœì„œ</TableHead>\r\n                <TableHead>ì´ë¦„</TableHead>\r\n                <TableHead>ìƒíƒœ</TableHead>\r\n                <TableHead className=\"text-right\">ê´€ë¦¬</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {equipment.map((eq) => (\r\n                <TableRow key={eq.id}>\r\n                  <TableCell>{eq.displayOrder}</TableCell>\r\n                  <TableCell className=\"font-medium\">{eq.name}</TableCell>\r\n                  <TableCell>\r\n                    {eq.isActive ? (\r\n                      <Badge\r\n                        variant=\"outline\"\r\n                        className=\"bg-green-50 text-green-700 border-green-200\"\r\n                      >\r\n                        í™œì„±\r\n                      </Badge>\r\n                    ) : (\r\n                      <Badge variant=\"secondary\">ë¹„í™œì„±</Badge>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleOpenDialog(eq)}\r\n                    >\r\n                      <Pencil className=\"w-4 h-4\" />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDelete(eq.id)}\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4 text-red-500\" />\r\n                    </Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingId ? \"ê¸°êµ¬ ìˆ˜ì •\" : \"ê¸°êµ¬ ì¶”ê°€\"}</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-2\">\r\n              <Label>ì´ë¦„</Label>\r\n              <Input\r\n                value={formData.name}\r\n                onChange={(e) =>\r\n                  setFormData((prev) => ({ ...prev, name: e.target.value }))\r\n                }\r\n                placeholder=\"ì˜ˆ: ë¤ë²¨\"\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label>í‘œì‹œ ìˆœì„œ</Label>\r\n              <Input\r\n                type=\"number\"\r\n                value={formData.displayOrder}\r\n                onChange={(e) =>\r\n                  setFormData((prev) => ({\r\n                    ...prev,\r\n                    displayOrder: parseInt(e.target.value),\r\n                  }))\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Checkbox\r\n                id=\"active\"\r\n                checked={formData.isActive}\r\n                onCheckedChange={(c) =>\r\n                  setFormData((prev) => ({ ...prev, isActive: !!c }))\r\n                }\r\n              />\r\n              <Label htmlFor=\"active\">í™œì„±í™”</Label>\r\n            </div>\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setIsDialogOpen(false)}>\r\n              ì·¨ì†Œ\r\n            </Button>\r\n            <Button onClick={handleSave} disabled={saving}>\r\n              {saving && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\r\n              ì €ì¥\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\gyms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\mappings\\body-parts\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":67,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":67,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":91,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2979,2982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2979,2982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":146,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":146,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":167,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":167,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\mappings\\equipment\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":64,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":64,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":88,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":88,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2850,2853],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2850,2853],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":140,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":140,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":161,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":161,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2769,2772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2769,2772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":123,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\reports\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchReports'. Either include it or remove the dependency array.","line":83,"column":6,"nodeType":"ArrayExpression","endLine":83,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [status, page, fetchReports]","fix":{"range":[2285,2299],"text":"[status, page, fetchReports]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState, Suspense } from 'react';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { toast } from 'sonner';\r\nimport { Check, X, Loader2 } from 'lucide-react';\r\n\r\ninterface GymReport {\r\n  id: string;\r\n  reportType: string;\r\n  fieldName: string | null;\r\n  currentValue: string | null;\r\n  suggestedValue: string | null;\r\n  description: string | null;\r\n  status: string;\r\n  createdAt: string;\r\n  gym: { id: string; name: string; address: string };\r\n  user: { id: string; email: string; displayName: string | null } | null;\r\n}\r\n\r\nconst REPORT_TYPE_LABELS: Record<string, string> = {\r\n  info_wrong: 'ì •ë³´ ì˜¤ë¥˜',\r\n  hours_changed: 'ìš´ì˜ì‹œê°„ ë³€ê²½',\r\n  closed: 'íì—…',\r\n  moved: 'ì´ì „',\r\n  other: 'ê¸°íƒ€',\r\n};\r\n\r\nconst STATUS_COLORS: Record<string, string> = {\r\n  pending: 'bg-yellow-500',\r\n  approved: 'bg-green-500',\r\n  rejected: 'bg-red-500',\r\n};\r\n\r\nfunction AdminReportsContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [reports, setReports] = useState<GymReport[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [processingId, setProcessingId] = useState<string | null>(null);\r\n  const [pagination, setPagination] = useState({ page: 1, total: 0, totalPages: 0 });\r\n\r\n  const status = searchParams.get('status') || 'pending';\r\n  const page = parseInt(searchParams.get('page') || '1');\r\n\r\n  const fetchReports = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const res = await fetch(`/api/admin/reports?status=${status}&page=${page}&limit=20`);\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setReports(data.data);\r\n        setPagination(data.pagination);\r\n      } else {\r\n        toast.error(data.error || 'ì œë³´ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\r\n      }\r\n    } catch {\r\n      toast.error('ì œë³´ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n  }, [status, page]);\r\n\r\n  const handleAction = async (reportId: string, action: 'approve' | 'reject') => {\r\n    setProcessingId(reportId);\r\n    try {\r\n      const res = await fetch(`/api/admin/reports/${reportId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ action }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        toast.success(data.message);\r\n        fetchReports();\r\n      } else {\r\n        toast.error(data.error);\r\n      }\r\n    } catch {\r\n      toast.error('ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\r\n    } finally {\r\n      setProcessingId(null);\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = (newStatus: string) => {\r\n    router.push(`/admin/reports?status=${newStatus}&page=1`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-6 px-4\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold\">ì œë³´ ê´€ë¦¬</h1>\r\n        <Select value={status} onValueChange={handleStatusChange}>\r\n          <SelectTrigger className=\"w-[180px]\">\r\n            <SelectValue placeholder=\"ìƒíƒœ í•„í„°\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"pending\">ëŒ€ê¸°ì¤‘</SelectItem>\r\n            <SelectItem value=\"approved\">ìŠ¹ì¸ë¨</SelectItem>\r\n            <SelectItem value=\"rejected\">ê±°ì ˆë¨</SelectItem>\r\n            <SelectItem value=\"all\">ì „ì²´</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-12\">\r\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n        </div>\r\n      ) : reports.length === 0 ? (\r\n        <div className=\"text-center py-12 text-muted-foreground\">\r\n          ì œë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\r\n        </div>\r\n      ) : (\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>í—¬ìŠ¤ì¥</TableHead>\r\n              <TableHead>ìœ í˜•</TableHead>\r\n              <TableHead>ë‚´ìš©</TableHead>\r\n              <TableHead>ì œë³´ì</TableHead>\r\n              <TableHead>ìƒíƒœ</TableHead>\r\n              <TableHead>ë‚ ì§œ</TableHead>\r\n              <TableHead>ì•¡ì…˜</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {reports.map((report) => (\r\n              <TableRow key={report.id}>\r\n                <TableCell className=\"font-medium\">{report.gym.name}</TableCell>\r\n                <TableCell>{REPORT_TYPE_LABELS[report.reportType] || report.reportType}</TableCell>\r\n                <TableCell className=\"max-w-xs truncate\">\r\n                  {report.suggestedValue || report.description || '-'}\r\n                </TableCell>\r\n                <TableCell>{report.user?.email || 'ìµëª…'}</TableCell>\r\n                <TableCell>\r\n                  <Badge className={STATUS_COLORS[report.status]}>\r\n                    {report.status === 'pending' ? 'ëŒ€ê¸°' : report.status === 'approved' ? 'ìŠ¹ì¸' : 'ê±°ì ˆ'}\r\n                  </Badge>\r\n                </TableCell>\r\n                <TableCell>{new Date(report.createdAt).toLocaleDateString('ko-KR')}</TableCell>\r\n                <TableCell>\r\n                  {report.status === 'pending' && (\r\n                    <div className=\"flex gap-2\">\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        className=\"text-green-600\"\r\n                        onClick={() => handleAction(report.id, 'approve')}\r\n                        disabled={processingId === report.id}\r\n                      >\r\n                        <Check className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"outline\"\r\n                        className=\"text-red-600\"\r\n                        onClick={() => handleAction(report.id, 'reject')}\r\n                        disabled={processingId === report.id}\r\n                      >\r\n                        <X className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n\r\n      {pagination.totalPages > 1 && (\r\n        <div className=\"flex justify-center gap-2 mt-6\">\r\n          <Button\r\n            variant=\"outline\"\r\n            disabled={page <= 1}\r\n            onClick={() => router.push(`/admin/reports?status=${status}&page=${page - 1}`)}\r\n          >\r\n            ì´ì „\r\n          </Button>\r\n          <span className=\"py-2 px-4\">\r\n            {page} / {pagination.totalPages}\r\n          </span>\r\n          <Button\r\n            variant=\"outline\"\r\n            disabled={page >= pagination.totalPages}\r\n            onClick={() => router.push(`/admin/reports?status=${status}&page=${page + 1}`)}\r\n          >\r\n            ë‹¤ìŒ\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function AdminReportsPage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex justify-center py-12\"><Loader2 className=\"h-8 w-8 animate-spin\" /></div>}>\r\n      <AdminReportsContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\reviews\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Eye' is defined but never used.","line":22,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Eye, EyeOff, Trash2, CheckCircle, Loader2 } from 'lucide-react';\r\n\r\n/**\r\n * Admin Reviews Management Page\r\n * ë¦¬ë·° ëª©ë¡/í•„í„°/ì•¡ì…˜(ìˆ¨ê¹€/ì‚­ì œ/ìŠ¹ì¸)\r\n */\r\n\r\ninterface Review {\r\n  id: string;\r\n  comment: string | null;\r\n  isDeleted: boolean;\r\n  isAdminReview: boolean;\r\n  createdAt: string;\r\n  gym: { name: string };\r\n  user: { email: string | null } | null;\r\n  reviewTagMappings: { reviewTag: { name: string } }[];\r\n}\r\n\r\ninterface ReviewsResponse {\r\n  reviews: Review[];\r\n  total: number;\r\n  page: number;\r\n  totalPages: number;\r\n}\r\n\r\nexport default function AdminReviewsPage() {\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [total, setTotal] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [filter, setFilter] = useState<'all' | 'deleted' | 'active'>('all');\r\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchReviews() {\r\n      setLoading(true);\r\n      try {\r\n        const params = new URLSearchParams({ filter });\r\n        const res = await fetch(`/api/admin/reviews?${params}`);\r\n        if (!res.ok) throw new Error('Failed to fetch reviews');\r\n        const data: ReviewsResponse = await res.json();\r\n        setReviews(data.reviews);\r\n        setTotal(data.total);\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Unknown error');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchReviews();\r\n  }, [filter]);\r\n\r\n  const handleAction = async (id: string, action: 'hide' | 'delete' | 'approve') => {\r\n    setActionLoading(id);\r\n    try {\r\n      const res = await fetch(`/api/admin/reviews/${id}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ action }),\r\n      });\r\n      \r\n      if (!res.ok) throw new Error('Action failed');\r\n      \r\n      // ëª©ë¡ ìƒˆë¡œê³ ì¹¨\r\n      setReviews((prev) => \r\n        prev.map((r) => \r\n          r.id === id \r\n            ? { ...r, isDeleted: action === 'hide' || action === 'delete' }\r\n            : r\r\n        )\r\n      );\r\n    } catch (err) {\r\n      alert(err instanceof Error ? err.message : 'Action failed');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Reviews</h1>\r\n\r\n      {/* í•„í„° */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"text-sm text-muted-foreground\">í•„í„°:</span>\r\n            <Select value={filter} onValueChange={(v: typeof filter) => setFilter(v)}>\r\n              <SelectTrigger className=\"w-40\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">ì „ì²´</SelectItem>\r\n                <SelectItem value=\"active\">í™œì„±</SelectItem>\r\n                <SelectItem value=\"deleted\">ì‚­ì œë¨</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* ë¦¬ë·° ëª©ë¡ */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n            ì´ {total}ê°œ ë¦¬ë·°\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center h-32\">\r\n              <Loader2 className=\"w-8 h-8 animate-spin\" />\r\n            </div>\r\n          ) : error ? (\r\n            <p className=\"text-red-500\">ì˜¤ë¥˜: {error}</p>\r\n          ) : (\r\n            <Table>\r\n              <TableHeader>\r\n                <TableRow>\r\n                  <TableHead>í—¬ìŠ¤ì¥</TableHead>\r\n                  <TableHead>íƒœê·¸</TableHead>\r\n                  <TableHead>ì½”ë©˜íŠ¸</TableHead>\r\n                  <TableHead>ì‘ì„±ì</TableHead>\r\n                  <TableHead>ìƒíƒœ</TableHead>\r\n                  <TableHead>ì•¡ì…˜</TableHead>\r\n                </TableRow>\r\n              </TableHeader>\r\n              <TableBody>\r\n                {reviews.map((review) => (\r\n                  <TableRow key={review.id}>\r\n                    <TableCell className=\"font-medium\">\r\n                      {review.gym?.name || '-'}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex flex-wrap gap-1\">\r\n                        {review.reviewTagMappings.slice(0, 3).map((m, i) => (\r\n                          <Badge key={i} variant=\"outline\" className=\"text-xs\">\r\n                            {m.reviewTag.name}\r\n                          </Badge>\r\n                        ))}\r\n                        {review.reviewTagMappings.length > 3 && (\r\n                          <Badge variant=\"outline\" className=\"text-xs\">\r\n                            +{review.reviewTagMappings.length - 3}\r\n                          </Badge>\r\n                        )}\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell className=\"max-w-xs truncate\">\r\n                      {review.comment || '-'}\r\n                    </TableCell>\r\n                    <TableCell className=\"text-sm text-muted-foreground\">\r\n                      {review.user?.email || 'ìµëª…'}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {review.isDeleted ? (\r\n                        <Badge variant=\"destructive\">ì‚­ì œë¨</Badge>\r\n                      ) : review.isAdminReview ? (\r\n                        <Badge>ê´€ë¦¬ì</Badge>\r\n                      ) : (\r\n                        <Badge variant=\"secondary\">í™œì„±</Badge>\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex gap-1\">\r\n                        {review.isDeleted ? (\r\n                          <Button\r\n                            size=\"sm\"\r\n                            variant=\"outline\"\r\n                            onClick={() => handleAction(review.id, 'approve')}\r\n                            disabled={actionLoading === review.id}\r\n                          >\r\n                            <CheckCircle className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        ) : (\r\n                          <>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => handleAction(review.id, 'hide')}\r\n                              disabled={actionLoading === review.id}\r\n                            >\r\n                              <EyeOff className=\"w-4 h-4\" />\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"destructive\"\r\n                              onClick={() => handleAction(review.id, 'delete')}\r\n                              disabled={actionLoading === review.id}\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            </Button>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\templates\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":19,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { ArrowLeft, Save, Loader2, Trash2, ImageIcon } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\n\r\n/**\r\n * Admin Template Detail/Edit Page\r\n * ìš´ë™ í…œí”Œë¦¿ ìƒì„¸ ì¡°íšŒ ë° ìˆ˜ì •\r\n */\r\n\r\ninterface BodyPart {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface EquipmentType {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface BodyPartMapping {\r\n  bodyPartId: string;\r\n  bodyPart: BodyPart;\r\n  intensityLevel: number | null;\r\n  priority: number | null;\r\n  painLevelRange: string | null;\r\n}\r\n\r\ninterface EquipmentMapping {\r\n  equipmentTypeId: string;\r\n  equipmentType: EquipmentType;\r\n}\r\n\r\ninterface Template {\r\n  id: string;\r\n  name: string;\r\n  description: string | null;\r\n  instructions: string | null;\r\n  precautions: string | null;\r\n  difficultyScore: number | null;\r\n  imageUrl: string | null;\r\n  gifUrl: string | null;\r\n  videoUrl: string | null;\r\n  isActive: boolean;\r\n  bodyPart: BodyPart | null;\r\n  bodyPartMappings: BodyPartMapping[];\r\n  exerciseEquipmentMappings: EquipmentMapping[];\r\n}\r\n\r\ninterface FormData {\r\n  name: string;\r\n  description: string;\r\n  instructions: string;\r\n  precautions: string;\r\n  difficultyScore: number;\r\n  imageUrl: string;\r\n  gifUrl: string;\r\n  videoUrl: string;\r\n  isActive: boolean;\r\n  bodyPartMappings: {\r\n    bodyPartId: string;\r\n    intensityLevel: number;\r\n    priority: number;\r\n    painLevelRange: string;\r\n  }[];\r\n  equipmentIds: string[];\r\n}\r\n\r\nexport default function AdminTemplateDetailPage() {\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const id = params.id as string;\r\n\r\n  const [template, setTemplate] = useState<Template | null>(null);\r\n  const [allBodyParts, setAllBodyParts] = useState<BodyPart[]>([]);\r\n  const [allEquipmentTypes, setAllEquipmentTypes] = useState<EquipmentType[]>(\r\n    [],\r\n  );\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [formData, setFormData] = useState<FormData>({\r\n    name: \"\",\r\n    description: \"\",\r\n    instructions: \"\",\r\n    precautions: \"\",\r\n    difficultyScore: 2,\r\n    imageUrl: \"\",\r\n    gifUrl: \"\",\r\n    videoUrl: \"\",\r\n    isActive: true,\r\n    bodyPartMappings: [],\r\n    equipmentIds: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    async function fetchTemplate() {\r\n      try {\r\n        const res = await fetch(`/api/admin/templates/${id}`);\r\n        if (!res.ok) throw new Error(\"Failed to fetch template\");\r\n        const data = await res.json();\r\n\r\n        setTemplate(data.template);\r\n        setAllBodyParts(data.allBodyParts);\r\n        setAllEquipmentTypes(data.allEquipmentTypes);\r\n\r\n        // Initialize form data\r\n        setFormData({\r\n          name: data.template.name || \"\",\r\n          description: data.template.description || \"\",\r\n          instructions: data.template.instructions || \"\",\r\n          precautions: data.template.precautions || \"\",\r\n          difficultyScore: data.template.difficultyScore || 2,\r\n          imageUrl: data.template.imageUrl || \"\",\r\n          gifUrl: data.template.gifUrl || \"\",\r\n          videoUrl: data.template.videoUrl || \"\",\r\n          isActive: data.template.isActive ?? true,\r\n          bodyPartMappings: data.template.bodyPartExerciseMappings.map(\r\n            (m: BodyPartMapping) => ({\r\n              bodyPartId: m.bodyPartId,\r\n              intensityLevel: m.intensityLevel ?? 2,\r\n              priority: m.priority ?? 1,\r\n              painLevelRange: m.painLevelRange ?? \"all\",\r\n            }),\r\n          ),\r\n          equipmentIds: data.template.exerciseEquipmentMappings.map(\r\n            (m: EquipmentMapping) => m.equipmentTypeId,\r\n          ),\r\n        });\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : \"Unknown error\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchTemplate();\r\n  }, [id]);\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const res = await fetch(`/api/admin/templates/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        throw new Error(data.error || \"Failed to save\");\r\n      }\r\n\r\n      router.push(\"/admin/templates\");\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Save failed\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleBodyPartToggle = (bodyPartId: string) => {\r\n    setFormData((prev) => {\r\n      const exists = prev.bodyPartMappings.find(\r\n        (m) => m.bodyPartId === bodyPartId,\r\n      );\r\n      if (exists) {\r\n        return {\r\n          ...prev,\r\n          bodyPartMappings: prev.bodyPartMappings.filter(\r\n            (m) => m.bodyPartId !== bodyPartId,\r\n          ),\r\n        };\r\n      } else {\r\n        return {\r\n          ...prev,\r\n          bodyPartMappings: [\r\n            ...prev.bodyPartMappings,\r\n            {\r\n              bodyPartId,\r\n              intensityLevel: 2,\r\n              priority: 1,\r\n              painLevelRange: \"all\",\r\n            },\r\n          ],\r\n        };\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleBodyPartMappingChange = (\r\n    bodyPartId: string,\r\n    field: \"intensityLevel\" | \"priority\" | \"painLevelRange\",\r\n    value: number | string,\r\n  ) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      bodyPartMappings: prev.bodyPartMappings.map((m) =>\r\n        m.bodyPartId === bodyPartId ? { ...m, [field]: value } : m,\r\n      ),\r\n    }));\r\n  };\r\n\r\n  const handleEquipmentToggle = (equipmentId: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      equipmentIds: prev.equipmentIds.includes(equipmentId)\r\n        ? prev.equipmentIds.filter((id) => id !== equipmentId)\r\n        : [...prev.equipmentIds, equipmentId],\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !template) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <Button variant=\"ghost\" onClick={() => router.back()}>\r\n          <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n          ë’¤ë¡œ\r\n        </Button>\r\n        <Card className=\"border-red-200 bg-red-50 dark:bg-red-950/20\">\r\n          <CardContent className=\"pt-6\">\r\n            <p className=\"text-red-600\">ì˜¤ë¥˜: {error}</p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"ghost\" onClick={() => router.back()}>\r\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n            ë’¤ë¡œ\r\n          </Button>\r\n          <h1 className=\"text-2xl font-bold\">{template?.name}</h1>\r\n          {!formData.isActive && <Badge variant=\"secondary\">ë¹„í™œì„±</Badge>}\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"outline\" onClick={() => router.back()}>\r\n            ì·¨ì†Œ\r\n          </Button>\r\n          <Button onClick={handleSave} disabled={saving}>\r\n            {saving ? (\r\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n            ) : (\r\n              <Save className=\"w-4 h-4 mr-2\" />\r\n            )}\r\n            ì €ì¥\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <Card className=\"border-red-200 bg-red-50 dark:bg-red-950/20\">\r\n          <CardContent className=\"pt-6\">\r\n            <p className=\"text-red-600\">ì˜¤ë¥˜: {error}</p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Left Column - Image & Basic Info */}\r\n        <div className=\"space-y-6\">\r\n          {/* Image */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-sm\">ì´ë¯¸ì§€</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"aspect-square bg-muted rounded-lg flex items-center justify-center overflow-hidden\">\r\n                {formData.imageUrl ? (\r\n                  <Image\r\n                    src={formData.imageUrl}\r\n                    alt={formData.name}\r\n                    width={300}\r\n                    height={300}\r\n                    className=\"object-cover w-full h-full\"\r\n                    onError={(e) => {\r\n                      (e.target as HTMLImageElement).src = \"/placeholder.png\";\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div className=\"text-muted-foreground flex flex-col items-center\">\r\n                    <ImageIcon className=\"w-12 h-12 mb-2\" />\r\n                    <span className=\"text-sm\">ì´ë¯¸ì§€ ì—†ìŒ</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"mt-4 space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label>ì´ë¯¸ì§€ ì—…ë¡œë“œ</Label>\r\n                  <Input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={async (e) => {\r\n                      const file = e.target.files?.[0];\r\n                      if (!file) return;\r\n\r\n                      if (file.size > 5 * 1024 * 1024) {\r\n                        alert(\"íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.\");\r\n                        return;\r\n                      }\r\n\r\n                      const formData = new FormData();\r\n                      formData.append(\"file\", file);\r\n\r\n                      try {\r\n                        e.target.disabled = true;\r\n                        const res = await fetch(\"/api/admin/upload-image\", {\r\n                          method: \"POST\",\r\n                          body: formData,\r\n                        });\r\n\r\n                        if (!res.ok) {\r\n                          const data = await res.json();\r\n                          throw new Error(data.error || \"Upload failed\");\r\n                        }\r\n\r\n                        const data = await res.json();\r\n                        setFormData((prev) => ({\r\n                          ...prev,\r\n                          imageUrl: data.url,\r\n                        }));\r\n                      } catch (err) {\r\n                        alert(\r\n                          err instanceof Error ? err.message : \"ì—…ë¡œë“œ ì‹¤íŒ¨\",\r\n                        );\r\n                      } finally {\r\n                        e.target.disabled = false;\r\n                        e.target.value = \"\"; // Reset input\r\n                      }\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>ì´ë¯¸ì§€ URL (ì§ì ‘ ì…ë ¥)</Label>\r\n                  <Input\r\n                    value={formData.imageUrl}\r\n                    onChange={(e) =>\r\n                      setFormData((prev) => ({\r\n                        ...prev,\r\n                        imageUrl: e.target.value,\r\n                      }))\r\n                    }\r\n                    placeholder=\"https://...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Status */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-sm\">ìƒíƒœ</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Checkbox\r\n                  id=\"isActive\"\r\n                  checked={formData.isActive}\r\n                  onCheckedChange={(checked) =>\r\n                    setFormData((prev) => ({ ...prev, isActive: !!checked }))\r\n                  }\r\n                />\r\n                <Label htmlFor=\"isActive\">í™œì„±í™”</Label>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Middle Column - Basic Info */}\r\n        <div className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-sm\">ê¸°ë³¸ ì •ë³´</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <Label>ì´ë¦„</Label>\r\n                <Input\r\n                  value={formData.name}\r\n                  onChange={(e) =>\r\n                    setFormData((prev) => ({ ...prev, name: e.target.value }))\r\n                  }\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>ì„¤ëª…</Label>\r\n                <Textarea\r\n                  value={formData.description}\r\n                  onChange={(e) =>\r\n                    setFormData((prev) => ({\r\n                      ...prev,\r\n                      description: e.target.value,\r\n                    }))\r\n                  }\r\n                  rows={3}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>ìˆ˜í–‰ ë°©ë²•</Label>\r\n                <Textarea\r\n                  value={formData.instructions}\r\n                  onChange={(e) =>\r\n                    setFormData((prev) => ({\r\n                      ...prev,\r\n                      instructions: e.target.value,\r\n                    }))\r\n                  }\r\n                  rows={4}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>ì£¼ì˜ì‚¬í•­</Label>\r\n                <Textarea\r\n                  value={formData.precautions}\r\n                  onChange={(e) =>\r\n                    setFormData((prev) => ({\r\n                      ...prev,\r\n                      precautions: e.target.value,\r\n                    }))\r\n                  }\r\n                  rows={2}\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label>ë‚œì´ë„ (1-5)</Label>\r\n                <Select\r\n                  value={String(formData.difficultyScore)}\r\n                  onValueChange={(v) =>\r\n                    setFormData((prev) => ({\r\n                      ...prev,\r\n                      difficultyScore: parseInt(v),\r\n                    }))\r\n                  }\r\n                >\r\n                  <SelectTrigger>\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"1\">1 - ë§¤ìš° ì‰¬ì›€</SelectItem>\r\n                    <SelectItem value=\"2\">2 - ì‰¬ì›€</SelectItem>\r\n                    <SelectItem value=\"3\">3 - ë³´í†µ</SelectItem>\r\n                    <SelectItem value=\"4\">4 - ì–´ë ¤ì›€</SelectItem>\r\n                    <SelectItem value=\"5\">5 - ë§¤ìš° ì–´ë ¤ì›€</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Right Column - Mappings */}\r\n        <div className=\"space-y-6\">\r\n          {/* Body Part Mappings */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-sm\">ë¶€ìœ„ ë§¤í•‘</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              {allBodyParts.map((bodyPart) => {\r\n                const mapping = formData.bodyPartMappings.find(\r\n                  (m) => m.bodyPartId === bodyPart.id,\r\n                );\r\n                const isChecked = !!mapping;\r\n\r\n                return (\r\n                  <div key={bodyPart.id} className=\"space-y-2\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Checkbox\r\n                        id={`bp-${bodyPart.id}`}\r\n                        checked={isChecked}\r\n                        onCheckedChange={() =>\r\n                          handleBodyPartToggle(bodyPart.id)\r\n                        }\r\n                      />\r\n                      <Label\r\n                        htmlFor={`bp-${bodyPart.id}`}\r\n                        className=\"font-medium\"\r\n                      >\r\n                        {bodyPart.name}\r\n                      </Label>\r\n                    </div>\r\n                    {isChecked && (\r\n                      <div className=\"ml-6 grid grid-cols-2 gap-2 text-sm\">\r\n                        <div>\r\n                          <Label className=\"text-xs\">ê°•ë„</Label>\r\n                          <Select\r\n                            value={String(mapping?.intensityLevel ?? 2)}\r\n                            onValueChange={(v) =>\r\n                              handleBodyPartMappingChange(\r\n                                bodyPart.id,\r\n                                \"intensityLevel\",\r\n                                parseInt(v),\r\n                              )\r\n                            }\r\n                          >\r\n                            <SelectTrigger className=\"h-8\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                              {[1, 2, 3, 4, 5].map((n) => (\r\n                                <SelectItem key={n} value={String(n)}>\r\n                                  {n}\r\n                                </SelectItem>\r\n                              ))}\r\n                            </SelectContent>\r\n                          </Select>\r\n                        </div>\r\n                        <div>\r\n                          <Label className=\"text-xs\">í†µì¦ ë²”ìœ„</Label>\r\n                          <Select\r\n                            value={mapping?.painLevelRange ?? \"all\"}\r\n                            onValueChange={(v) =>\r\n                              handleBodyPartMappingChange(\r\n                                bodyPart.id,\r\n                                \"painLevelRange\",\r\n                                v,\r\n                              )\r\n                            }\r\n                          >\r\n                            <SelectTrigger className=\"h-8\">\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                              <SelectItem value=\"all\">ì „ì²´</SelectItem>\r\n                              <SelectItem value=\"1-2\">1-2</SelectItem>\r\n                              <SelectItem value=\"3-4\">3-4</SelectItem>\r\n                              <SelectItem value=\"5\">5</SelectItem>\r\n                            </SelectContent>\r\n                          </Select>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Equipment Mappings */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"text-sm\">ê¸°êµ¬ ë§¤í•‘</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-2\">\r\n              {allEquipmentTypes.map((equipment) => (\r\n                <div key={equipment.id} className=\"flex items-center gap-2\">\r\n                  <Checkbox\r\n                    id={`eq-${equipment.id}`}\r\n                    checked={formData.equipmentIds.includes(equipment.id)}\r\n                    onCheckedChange={() => handleEquipmentToggle(equipment.id)}\r\n                  />\r\n                  <Label htmlFor={`eq-${equipment.id}`}>{equipment.name}</Label>\r\n                </div>\r\n              ))}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\templates\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\admin\\templates\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\__tests__\\courses-save.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dbUser' is assigned a value but never used.","line":109,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":109,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dbUser' is assigned a value but never used.","line":118,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":118,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dbUser' is assigned a value but never used.","line":159,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":159,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'foundUser' is assigned a value but never used.","line":162,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":162,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'course' is assigned a value but never used.","line":285,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":285,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file courses-save.test.ts\r\n * @description ì½”ìŠ¤ ì €ì¥ API ë‹¨ìœ„ í…ŒìŠ¤íŠ¸\r\n * \r\n * POST /api/courses/save\r\n * ì´ 31ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤\r\n * \r\n * í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬:\r\n * - ì •ìƒ ë™ì‘ (5ê°œ)\r\n * - ì¸ì¦ ê²€ì¦ (5ê°œ)\r\n * - ìš”ì²­ ê²€ì¦ (8ê°œ)\r\n * - íŠ¸ëœì­ì…˜ ì²˜ë¦¬ (5ê°œ)\r\n * - ì‘ë‹µ í˜•ì‹ (4ê°œ)\r\n * - ì—ëŸ¬ ì¼€ì´ìŠ¤ (4ê°œ)\r\n */\r\n\r\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\r\nimport {\r\n  mockPrisma,\r\n  mockCurrentUser,\r\n  resetAllMocks,\r\n  createMockUser,\r\n  createMockClerkUser,\r\n  createMockCourse,\r\n  createMockMergedExercise,\r\n  requestBodies,\r\n  generateUUID,\r\n  setupAuthenticatedUser,\r\n  setupUnauthenticated,\r\n  expectSuccessResponse,\r\n  expectErrorResponse,\r\n} from './test-helpers';\r\n\r\n// ============================================\r\n// Mock ì„¤ì •\r\n// ============================================\r\n\r\nvi.mock('@/lib/prisma/client', () => ({\r\n  prisma: mockPrisma,\r\n}));\r\n\r\nvi.mock('@clerk/nextjs/server', () => ({\r\n  currentUser: mockCurrentUser,\r\n}));\r\n\r\n// ============================================\r\n// í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸\r\n// ============================================\r\n\r\ndescribe('POST /api/courses/save', () => {\r\n  beforeEach(() => {\r\n    resetAllMocks();\r\n  });\r\n\r\n  // ============================================\r\n  // 1. ì •ìƒ ë™ì‘ í…ŒìŠ¤íŠ¸ (5ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì •ìƒ ë™ì‘', () => {\r\n    it('ì¸ì¦ëœ ì‚¬ìš©ìì˜ ì½”ìŠ¤ ì €ì¥ ì„±ê³µ', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const course = createMockCourse({ userId: dbUser.id });\r\n      mockPrisma.$transaction.mockImplementation(async (callback) => {\r\n        mockPrisma.course.create.mockResolvedValue(course);\r\n        mockPrisma.courseExercise.create.mockResolvedValue({});\r\n        return callback(mockPrisma);\r\n      });\r\n\r\n      // Act\r\n      const request = requestBodies.courseSave();\r\n      \r\n      // Assert (ì‹œë®¬ë ˆì´ì…˜)\r\n      expect(mockCurrentUser).toBeDefined();\r\n      expect(request.exercises.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('ì‘ë‹µì— courseId í¬í•¨', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const course = createMockCourse({ userId: dbUser.id });\r\n      \r\n      // Assert\r\n      const response = {\r\n        success: true,\r\n        data: {\r\n          courseId: course.id,\r\n          message: 'ì½”ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n        },\r\n      };\r\n      expect(response.data.courseId).toBeDefined();\r\n    });\r\n\r\n    it('exercises ë°°ì—´ì´ CourseExerciseë¡œ ì €ì¥ë¨', async () => {\r\n      // Arrange\r\n      const exercises = [\r\n        createMockMergedExercise({ section: 'warmup' }),\r\n        createMockMergedExercise({ section: 'main' }),\r\n        createMockMergedExercise({ section: 'cooldown' }),\r\n      ];\r\n      const request = requestBodies.courseSave({ exercises });\r\n\r\n      // Assert\r\n      expect(request.exercises).toHaveLength(3);\r\n    });\r\n\r\n    it('60ë¶„ ì½”ìŠ¤ ì €ì¥ ì„±ê³µ', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const request = requestBodies.courseSave({ totalDurationMinutes: 60 });\r\n\r\n      // Assert\r\n      expect(request.totalDurationMinutes).toBe(60);\r\n    });\r\n\r\n    it('90ë¶„ ì½”ìŠ¤ ì €ì¥ ì„±ê³µ', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const request = requestBodies.courseSave({ totalDurationMinutes: 90 });\r\n\r\n      // Assert\r\n      expect(request.totalDurationMinutes).toBe(90);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 2. ì¸ì¦ ê²€ì¦ í…ŒìŠ¤íŠ¸ (5ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì¸ì¦ ê²€ì¦', () => {\r\n    it('ë¯¸ì¸ì¦ ì‹œ 401 ì—ëŸ¬', async () => {\r\n      // Arrange\r\n      setupUnauthenticated();\r\n\r\n      // Act\r\n      const result = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(result).toBeNull();\r\n    });\r\n\r\n    it('Clerk ì‚¬ìš©ì ìˆìœ¼ë‚˜ DB ì‚¬ìš©ì ì—†ì„ ì‹œ 404 ì—ëŸ¬', async () => {\r\n      // Arrange\r\n      const clerkUser = createMockClerkUser();\r\n      mockCurrentUser.mockResolvedValue(clerkUser);\r\n      mockPrisma.user.findUnique.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n      const dbUser = await mockPrisma.user.findUnique({ where: { clerkId: user.id } });\r\n\r\n      // Assert\r\n      expect(user).not.toBeNull();\r\n      expect(dbUser).toBeNull();\r\n    });\r\n\r\n    it('clerkIdë¡œ ì‚¬ìš©ì ì¡°íšŒ', async () => {\r\n      // Arrange\r\n      const { clerkUser, dbUser } = setupAuthenticatedUser();\r\n\r\n      // Act\r\n      const foundUser = await mockPrisma.user.findUnique({\r\n        where: { clerkId: clerkUser.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(mockPrisma.user.findUnique).toHaveBeenCalledWith({\r\n        where: { clerkId: clerkUser.id },\r\n      });\r\n    });\r\n\r\n    it('ë¹„í™œì„± ì‚¬ìš©ì ì²˜ë¦¬', async () => {\r\n      // Arrange\r\n      const clerkUser = createMockClerkUser();\r\n      const inactiveUser = createMockUser({\r\n        clerkId: clerkUser.id,\r\n        isActive: false,\r\n      });\r\n      mockCurrentUser.mockResolvedValue(clerkUser);\r\n      mockPrisma.user.findUnique.mockResolvedValue(inactiveUser);\r\n\r\n      // Act\r\n      const dbUser = await mockPrisma.user.findUnique({\r\n        where: { clerkId: clerkUser.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(dbUser?.isActive).toBe(false);\r\n    });\r\n\r\n    it('ì¸ì¦ í† í° ë§Œë£Œ ì‹œ 401 ì—ëŸ¬', async () => {\r\n      // Arrange\r\n      mockCurrentUser.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 3. ìš”ì²­ ê²€ì¦ í…ŒìŠ¤íŠ¸ (8ê°œ)\r\n  // ============================================\r\n\r\n  describe('ìš”ì²­ ê²€ì¦', () => {\r\n    it('exercises ëˆ„ë½ ì‹œ 400 ì—ëŸ¬', () => {\r\n      // Arrange\r\n      const request = requestBodies.courseSave();\r\n      delete (request as any).exercises;\r\n\r\n      // Assert\r\n      expect(request.exercises).toBeUndefined();\r\n    });\r\n\r\n    it('exercises ë¹ˆ ë°°ì—´ ì‹œ 400 ì—ëŸ¬', () => {\r\n      // Arrange\r\n      const request = requestBodies.courseSave({ exercises: [] });\r\n\r\n      // Assert\r\n      expect(request.exercises).toHaveLength(0);\r\n    });\r\n\r\n    it('totalDurationMinutes í•„ìˆ˜ ê²€ì¦', () => {\r\n      // Arrange\r\n      const request = requestBodies.courseSave();\r\n      delete (request as any).totalDurationMinutes;\r\n\r\n      // Assert\r\n      expect(request.totalDurationMinutes).toBeUndefined();\r\n    });\r\n\r\n    it('totalDurationMinutes í—ˆìš©ê°’ ê²€ì¦ (60/90/120ë§Œ)', () => {\r\n      // Arrange\r\n      const invalidDuration = 45;\r\n      const validDurations = [60, 90, 120];\r\n\r\n      // Assert\r\n      expect(validDurations.includes(invalidDuration)).toBe(false);\r\n    });\r\n\r\n    it('painLevel ë²”ìœ„ ê²€ì¦ (1-5)', () => {\r\n      // Arrange\r\n      const request = requestBodies.courseSave({ painLevel: 3 });\r\n\r\n      // Assert\r\n      expect(request.painLevel).toBeGreaterThanOrEqual(1);\r\n      expect(request.painLevel).toBeLessThanOrEqual(5);\r\n    });\r\n\r\n    it('bodyParts ë°°ì—´ í˜•ì‹ ê²€ì¦', () => {\r\n      // Arrange\r\n      const request = requestBodies.courseSave();\r\n\r\n      // Assert\r\n      expect(Array.isArray(request.bodyParts)).toBe(true);\r\n    });\r\n\r\n    it('equipmentAvailable ë°°ì—´ í˜•ì‹ ê²€ì¦', () => {\r\n      // Arrange\r\n      const request = requestBodies.courseSave();\r\n\r\n      // Assert\r\n      expect(Array.isArray(request.equipmentAvailable)).toBe(true);\r\n    });\r\n\r\n    it('ì˜ëª»ëœ JSON ì‹œ 400 ì—ëŸ¬', () => {\r\n      // Arrange\r\n      const invalidJson = '{ invalid }';\r\n\r\n      // Assert\r\n      expect(() => JSON.parse(invalidJson)).toThrow();\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 4. íŠ¸ëœì­ì…˜ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ (5ê°œ)\r\n  // ============================================\r\n\r\n  describe('íŠ¸ëœì­ì…˜ ì²˜ë¦¬', () => {\r\n    it('Courseì™€ CourseExercise ë™ì‹œ ìƒì„±', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const course = createMockCourse({ userId: dbUser.id });\r\n      \r\n      mockPrisma.$transaction.mockImplementation(async (callback) => {\r\n        return callback(mockPrisma);\r\n      });\r\n\r\n      // Act\r\n      await mockPrisma.$transaction(async (tx: typeof mockPrisma) => {\r\n        await tx.course.create({ data: {} });\r\n        await tx.courseExercise.create({ data: {} });\r\n      });\r\n\r\n      // Assert\r\n      expect(mockPrisma.$transaction).toHaveBeenCalled();\r\n    });\r\n\r\n    it('Course ìƒì„± ì‹¤íŒ¨ ì‹œ ë¡¤ë°±', async () => {\r\n      // Arrange\r\n      mockPrisma.$transaction.mockRejectedValue(new Error('Transaction failed'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.$transaction(() => {})).rejects.toThrow('Transaction failed');\r\n    });\r\n\r\n    it('CourseExercise ìƒì„± ì‹¤íŒ¨ ì‹œ ë¡¤ë°±', async () => {\r\n      // Arrange\r\n      mockPrisma.$transaction.mockRejectedValue(new Error('CourseExercise creation failed'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.$transaction(() => {})).rejects.toThrow();\r\n    });\r\n\r\n    it('ë‹¤ì¤‘ ìš´ë™ ìˆœì°¨ ì €ì¥', async () => {\r\n      // Arrange\r\n      const exercises = [\r\n        createMockMergedExercise({ orderInSection: 1 }),\r\n        createMockMergedExercise({ orderInSection: 2 }),\r\n        createMockMergedExercise({ orderInSection: 3 }),\r\n      ];\r\n\r\n      // Assert\r\n      exercises.forEach((ex, index) => {\r\n        expect(ex.orderInSection).toBe(index + 1);\r\n      });\r\n    });\r\n\r\n    it('courseIdë¡œ ìš´ë™ ì—°ê²°', async () => {\r\n      // Arrange\r\n      const course = createMockCourse();\r\n      const exercise = createMockMergedExercise();\r\n\r\n      // Assert\r\n      const courseExerciseData = {\r\n        courseId: course.id,\r\n        exerciseTemplateId: exercise.exerciseTemplateId,\r\n        section: exercise.section,\r\n        orderInSection: exercise.orderInSection,\r\n      };\r\n      expect(courseExerciseData.courseId).toBe(course.id);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 5. ì‘ë‹µ í˜•ì‹ í…ŒìŠ¤íŠ¸ (4ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì‘ë‹µ í˜•ì‹', () => {\r\n    it('ì„±ê³µ ì‘ë‹µ êµ¬ì¡° í™•ì¸', () => {\r\n      // Arrange\r\n      const response = {\r\n        success: true,\r\n        data: {\r\n          courseId: generateUUID(),\r\n          message: 'ì½”ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n        },\r\n      };\r\n\r\n      // Assert\r\n      expectSuccessResponse(response);\r\n      expect(response.data.message).toContain('ì„±ê³µì ìœ¼ë¡œ');\r\n    });\r\n\r\n    it('courseId UUID í˜•ì‹', () => {\r\n      // Arrange\r\n      const courseId = generateUUID();\r\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\n\r\n      // Assert\r\n      expect(uuidRegex.test(courseId)).toBe(true);\r\n    });\r\n\r\n    it('ì—ëŸ¬ ì‘ë‹µ êµ¬ì¡° í™•ì¸', () => {\r\n      // Arrange\r\n      const errorResponse = {\r\n        success: false,\r\n        error: 'í•„ìˆ˜ ë°ì´í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n      };\r\n\r\n      // Assert\r\n      expectErrorResponse(errorResponse, 'í•„ìˆ˜ ë°ì´í„°');\r\n    });\r\n\r\n    it('HTTP ìƒíƒœ ì½”ë“œ 200 (ì„±ê³µ)', () => {\r\n      // Arrange\r\n      const status = 200;\r\n\r\n      // Assert\r\n      expect(status).toBe(200);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 6. ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ (4ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì—ëŸ¬ ì¼€ì´ìŠ¤', () => {\r\n    it('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨ ì‹œ 500 ì—ëŸ¬', async () => {\r\n      // Arrange\r\n      mockPrisma.$transaction.mockRejectedValue(new Error('Database connection failed'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.$transaction(() => {})).rejects.toThrow('Database connection failed');\r\n    });\r\n\r\n    it('ì™¸ë˜í‚¤ ì œì•½ ì¡°ê±´ ìœ„ë°˜', async () => {\r\n      // Arrange\r\n      mockPrisma.courseExercise.create.mockRejectedValue(\r\n        new Error('Foreign key constraint failed')\r\n      );\r\n\r\n      // Act & Assert\r\n      await expect(\r\n        mockPrisma.courseExercise.create({ data: {} })\r\n      ).rejects.toThrow('Foreign key constraint');\r\n    });\r\n\r\n    it('ì¤‘ë³µ ì €ì¥ ì‹œë„ ì²˜ë¦¬', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const existingCourse = createMockCourse({ userId: dbUser.id });\r\n      mockPrisma.course.findFirst.mockResolvedValue(existingCourse);\r\n\r\n      // Act\r\n      const found = await mockPrisma.course.findFirst({\r\n        where: { userId: dbUser.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(found).not.toBeNull();\r\n    });\r\n\r\n    it('ì„œë²„ íƒ€ì„ì•„ì›ƒ', async () => {\r\n      // Arrange\r\n      mockPrisma.$transaction.mockRejectedValue(new Error('Request timeout'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.$transaction(() => {})).rejects.toThrow('timeout');\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\__tests__\\error-cases.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createMockGym' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expectErrorResponse' is defined but never used.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file error-cases.test.ts\r\n * @description ê³µí†µ ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸\r\n * \r\n * ëª¨ë“  APIì—ì„œ ê³µí†µìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.\r\n * \r\n * ì´ 52ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤\r\n * \r\n * í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬:\r\n * - 400 Bad Request (10ê°œ)\r\n * - 401 Unauthorized (8ê°œ)\r\n * - 403 Forbidden (8ê°œ)\r\n * - 404 Not Found (8ê°œ)\r\n * - 409 Conflict (4ê°œ)\r\n * - 500 Internal Server Error (8ê°œ)\r\n * - ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ (6ê°œ)\r\n */\r\n\r\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\r\nimport {\r\n  mockPrisma,\r\n  mockCurrentUser,\r\n  resetAllMocks,\r\n  createMockUser,\r\n  createMockClerkUser,\r\n  createMockReview,\r\n  createMockCourse,\r\n  createMockGym,\r\n  generateUUID,\r\n  setupAuthenticatedUser,\r\n  setupUnauthenticated,\r\n  hoursAgo,\r\n  expectErrorResponse,\r\n  errorScenarios,\r\n} from './test-helpers';\r\n\r\n// ============================================\r\n// Mock ì„¤ì •\r\n// ============================================\r\n\r\nvi.mock('@/lib/prisma/client', () => ({\r\n  prisma: mockPrisma,\r\n}));\r\n\r\nvi.mock('@clerk/nextjs/server', () => ({\r\n  currentUser: mockCurrentUser,\r\n}));\r\n\r\n// ============================================\r\n// í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸\r\n// ============================================\r\n\r\ndescribe('ê³µí†µ ì—ëŸ¬ ì¼€ì´ìŠ¤', () => {\r\n  beforeEach(() => {\r\n    resetAllMocks();\r\n  });\r\n\r\n  // ============================================\r\n  // 1. 400 Bad Request (10ê°œ)\r\n  // ============================================\r\n\r\n  describe('400 Bad Request', () => {\r\n    it('JSON íŒŒì‹± ì—ëŸ¬', () => {\r\n      // Arrange\r\n      const invalidJson = '{ invalid json }';\r\n\r\n      // Assert\r\n      expect(() => JSON.parse(invalidJson)).toThrow();\r\n    });\r\n\r\n    it('í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½ - lat', () => {\r\n      // Arrange\r\n      const params: Record<string, string> = { lng: '127.0' };\r\n\r\n      // Assert\r\n      expect(params.lat).toBeUndefined();\r\n    });\r\n\r\n    it('í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëˆ„ë½ - lng', () => {\r\n      // Arrange\r\n      const params: Record<string, string> = { lat: '37.5' };\r\n\r\n      // Assert\r\n      expect(params.lng).toBeUndefined();\r\n    });\r\n\r\n    it('í•„ìˆ˜ í•„ë“œ ëˆ„ë½ - bodyParts', () => {\r\n      // Arrange\r\n      const request = { painLevel: 3, equipmentAvailable: [] };\r\n\r\n      // Assert\r\n      expect((request as any).bodyParts).toBeUndefined();\r\n    });\r\n\r\n    it('í•„ìˆ˜ í•„ë“œ ëˆ„ë½ - gymId', () => {\r\n      // Arrange\r\n      const request = { tagIds: [generateUUID()], comment: 'test' };\r\n\r\n      // Assert\r\n      expect((request as any).gymId).toBeUndefined();\r\n    });\r\n\r\n    it('ë°°ì—´ ë¹ˆ ê°’ - tagIds', () => {\r\n      // Arrange\r\n      const request = { gymId: generateUUID(), tagIds: [] };\r\n\r\n      // Assert\r\n      expect(request.tagIds).toHaveLength(0);\r\n    });\r\n\r\n    it('ë²”ìœ„ ì´ˆê³¼ - painLevel > 5', () => {\r\n      // Arrange\r\n      const painLevel = 6;\r\n\r\n      // Assert\r\n      expect(painLevel > 5).toBe(true);\r\n    });\r\n\r\n    it('ë²”ìœ„ ë¯¸ë‹¬ - painLevel < 1', () => {\r\n      // Arrange\r\n      const painLevel = 0;\r\n\r\n      // Assert\r\n      expect(painLevel < 1).toBe(true);\r\n    });\r\n\r\n    it('ì˜ëª»ëœ enum ê°’ - totalDurationMinutes', () => {\r\n      // Arrange\r\n      const invalidDuration = 45;\r\n      const validOptions = [60, 90, 120];\r\n\r\n      // Assert\r\n      expect(validOptions.includes(invalidDuration)).toBe(false);\r\n    });\r\n\r\n    it('UUID í˜•ì‹ ì˜¤ë¥˜', () => {\r\n      // Arrange\r\n      const invalidUUID = 'not-a-valid-uuid';\r\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\n\r\n      // Assert\r\n      expect(uuidRegex.test(invalidUUID)).toBe(false);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 2. 401 Unauthorized (8ê°œ)\r\n  // ============================================\r\n\r\n  describe('401 Unauthorized', () => {\r\n    it('ì¸ì¦ í† í° ì—†ìŒ', async () => {\r\n      // Arrange\r\n      setupUnauthenticated();\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n\r\n    it('ì¸ì¦ í† í° ë§Œë£Œ', async () => {\r\n      // Arrange\r\n      mockCurrentUser.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n\r\n    it('ì˜ëª»ëœ ì¸ì¦ í† í°', async () => {\r\n      // Arrange\r\n      mockCurrentUser.mockRejectedValue(new Error('Invalid token'));\r\n\r\n      // Act & Assert\r\n      await expect(mockCurrentUser()).rejects.toThrow('Invalid token');\r\n    });\r\n\r\n    it('Clerk ì„œë¹„ìŠ¤ ì˜¤ë¥˜', async () => {\r\n      // Arrange\r\n      mockCurrentUser.mockRejectedValue(new Error('Clerk service unavailable'));\r\n\r\n      // Act & Assert\r\n      await expect(mockCurrentUser()).rejects.toThrow('Clerk service unavailable');\r\n    });\r\n\r\n    it('ì½”ìŠ¤ ì €ì¥ ì‹œ ë¯¸ì¸ì¦', async () => {\r\n      // Arrange\r\n      setupUnauthenticated();\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n\r\n    it('ë¦¬ë·° ì‘ì„± ì‹œ ë¯¸ì¸ì¦', async () => {\r\n      // Arrange\r\n      setupUnauthenticated();\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n\r\n    it('ë¦¬ë·° ìˆ˜ì • ì‹œ ë¯¸ì¸ì¦', async () => {\r\n      // Arrange\r\n      setupUnauthenticated();\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n\r\n    it('ë¦¬ë·° ì‚­ì œ ì‹œ ë¯¸ì¸ì¦', async () => {\r\n      // Arrange\r\n      setupUnauthenticated();\r\n\r\n      // Act\r\n      const user = await mockCurrentUser();\r\n\r\n      // Assert\r\n      expect(user).toBeNull();\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 3. 403 Forbidden (8ê°œ)\r\n  // ============================================\r\n\r\n  describe('403 Forbidden', () => {\r\n    it('íƒ€ì¸ ë¦¬ë·° ì¡°íšŒ ì‹œë„', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const otherReview = createMockReview({ userId: generateUUID() });\r\n      mockPrisma.review.findUnique.mockResolvedValue(otherReview);\r\n\r\n      // Act\r\n      const found = await mockPrisma.review.findUnique({\r\n        where: { id: otherReview.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(found?.userId).not.toBe(dbUser.id);\r\n    });\r\n\r\n    it('íƒ€ì¸ ë¦¬ë·° ìˆ˜ì • ì‹œë„', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const otherReview = createMockReview({ userId: generateUUID() });\r\n\r\n      // Assert\r\n      expect(otherReview.userId).not.toBe(dbUser.id);\r\n    });\r\n\r\n    it('íƒ€ì¸ ë¦¬ë·° ì‚­ì œ ì‹œë„', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const otherReview = createMockReview({ userId: generateUUID() });\r\n\r\n      // Assert\r\n      expect(otherReview.userId).not.toBe(dbUser.id);\r\n    });\r\n\r\n    it('ë¹„í™œì„± ê³„ì • ì ‘ê·¼', async () => {\r\n      // Arrange\r\n      const clerkUser = createMockClerkUser();\r\n      const inactiveUser = createMockUser({ clerkId: clerkUser.id, isActive: false });\r\n      mockCurrentUser.mockResolvedValue(clerkUser);\r\n      mockPrisma.user.findUnique.mockResolvedValue(inactiveUser);\r\n\r\n      // Act\r\n      const dbUser = await mockPrisma.user.findUnique({\r\n        where: { clerkId: clerkUser.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(dbUser?.isActive).toBe(false);\r\n    });\r\n\r\n    it('ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥ ì ‘ê·¼', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n\r\n      // Assert\r\n      expect(dbUser.isAdmin).toBe(false);\r\n    });\r\n\r\n    it('ì‚­ì œëœ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ (isDeleted=true)', async () => {\r\n      // Arrange\r\n      const deletedReview = createMockReview({ isDeleted: true });\r\n\r\n      // Assert\r\n      expect(deletedReview.isDeleted).toBe(true);\r\n    });\r\n\r\n    it('ê¶Œí•œ ì—†ëŠ” ì½”ìŠ¤ ì¡°íšŒ', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const otherCourse = createMockCourse({ userId: generateUUID() });\r\n\r\n      // Assert\r\n      expect(otherCourse.userId).not.toBe(dbUser.id);\r\n    });\r\n\r\n    it('ìˆ˜ì • ì œí•œ ì‹œê°„ ì´ˆê³¼ (24ì‹œê°„)', async () => {\r\n      // Arrange\r\n      const oldReview = createMockReview({ createdAt: hoursAgo(25) });\r\n      const hoursSince = (Date.now() - oldReview.createdAt.getTime()) / (1000 * 60 * 60);\r\n\r\n      // Assert\r\n      expect(hoursSince).toBeGreaterThan(24);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 4. 404 Not Found (8ê°œ)\r\n  // ============================================\r\n\r\n  describe('404 Not Found', () => {\r\n    it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í—¬ìŠ¤ì¥', async () => {\r\n      // Arrange\r\n      mockPrisma.gym.findUnique.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const gym = await mockPrisma.gym.findUnique({\r\n        where: { id: 'nonexistent' },\r\n      });\r\n\r\n      // Assert\r\n      expect(gym).toBeNull();\r\n    });\r\n\r\n    it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ë·°', async () => {\r\n      // Arrange\r\n      mockPrisma.review.findUnique.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const review = await mockPrisma.review.findUnique({\r\n        where: { id: 'nonexistent' },\r\n      });\r\n\r\n      // Assert\r\n      expect(review).toBeNull();\r\n    });\r\n\r\n    it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì½”ìŠ¤', async () => {\r\n      // Arrange\r\n      mockPrisma.course.findUnique.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const course = await mockPrisma.course.findUnique({\r\n        where: { id: 'nonexistent' },\r\n      });\r\n\r\n      // Assert\r\n      expect(course).toBeNull();\r\n    });\r\n\r\n    it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì (DB)', async () => {\r\n      // Arrange\r\n      const clerkUser = createMockClerkUser();\r\n      mockCurrentUser.mockResolvedValue(clerkUser);\r\n      mockPrisma.user.findUnique.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const dbUser = await mockPrisma.user.findUnique({\r\n        where: { clerkId: clerkUser.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(dbUser).toBeNull();\r\n    });\r\n\r\n    it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¶€ìœ„ ID', async () => {\r\n      // Arrange\r\n      mockPrisma.bodyPart.findUnique.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const bodyPart = await mockPrisma.bodyPart.findUnique({\r\n        where: { id: 'nonexistent' },\r\n      });\r\n\r\n      // Assert\r\n      expect(bodyPart).toBeNull();\r\n    });\r\n\r\n    it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íƒœê·¸ ID', async () => {\r\n      // Arrange\r\n      mockPrisma.reviewTag.findMany.mockResolvedValue([]);\r\n\r\n      // Act\r\n      const tags = await mockPrisma.reviewTag.findMany({\r\n        where: { id: { in: ['nonexistent'] } },\r\n      });\r\n\r\n      // Assert\r\n      expect(tags).toHaveLength(0);\r\n    });\r\n\r\n    it('ì ì ˆí•œ ìš´ë™ ì—†ìŒ (404)', async () => {\r\n      // Arrange\r\n      const emptyResult = { exercises: [], totalDuration: 0, warnings: [] };\r\n\r\n      // Assert\r\n      expect(emptyResult.exercises).toHaveLength(0);\r\n    });\r\n\r\n    it('ë°˜ê²½ ë‚´ í—¬ìŠ¤ì¥ ì—†ìŒ', async () => {\r\n      // Arrange\r\n      mockPrisma.gym.findMany.mockResolvedValue([]);\r\n\r\n      // Act\r\n      const gyms = await mockPrisma.gym.findMany();\r\n\r\n      // Assert\r\n      expect(gyms).toHaveLength(0);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 5. 409 Conflict (4ê°œ)\r\n  // ============================================\r\n\r\n  describe('409 Conflict', () => {\r\n    it('ì¤‘ë³µ ë¦¬ë·° ì‘ì„±', async () => {\r\n      // Arrange\r\n      const { dbUser } = setupAuthenticatedUser();\r\n      const existingReview = createMockReview({ userId: dbUser.id });\r\n      mockPrisma.review.findFirst.mockResolvedValue(existingReview);\r\n\r\n      // Act\r\n      const found = await mockPrisma.review.findFirst({\r\n        where: { userId: dbUser.id, gymId: existingReview.gymId, isDeleted: false },\r\n      });\r\n\r\n      // Assert\r\n      expect(found).not.toBeNull();\r\n    });\r\n\r\n    it('ì´ë¯¸ ì‚­ì œëœ ë¦¬ë·° ì¬ì‚­ì œ', async () => {\r\n      // Arrange\r\n      const deletedReview = createMockReview({ isDeleted: true });\r\n      mockPrisma.review.findUnique.mockResolvedValue(deletedReview);\r\n\r\n      // Act\r\n      const found = await mockPrisma.review.findUnique({\r\n        where: { id: deletedReview.id },\r\n      });\r\n\r\n      // Assert\r\n      expect(found?.isDeleted).toBe(true);\r\n    });\r\n\r\n    it('Unique constraint ìœ„ë°˜', async () => {\r\n      // Arrange\r\n      mockPrisma.review.create.mockRejectedValue(\r\n        new Error('Unique constraint failed')\r\n      );\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.review.create({ data: {} })).rejects.toThrow('Unique constraint');\r\n    });\r\n\r\n    it('ë™ì‹œì„± ì¶©ëŒ ì²˜ë¦¬', async () => {\r\n      // Arrange\r\n      mockPrisma.$transaction.mockRejectedValue(\r\n        new Error('Transaction conflict')\r\n      );\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.$transaction(() => {})).rejects.toThrow('conflict');\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 6. 500 Internal Server Error (8ê°œ)\r\n  // ============================================\r\n\r\n  describe('500 Internal Server Error', () => {\r\n    it('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨', async () => {\r\n      // Arrange\r\n      const error = errorScenarios.prismaError();\r\n\r\n      // Assert\r\n      expect(error.message).toContain('Prisma');\r\n    });\r\n\r\n    it('íŠ¸ëœì­ì…˜ ì‹¤íŒ¨', async () => {\r\n      // Arrange\r\n      mockPrisma.$transaction.mockRejectedValue(new Error('Transaction failed'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.$transaction(() => {})).rejects.toThrow('Transaction failed');\r\n    });\r\n\r\n    it('ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ', async () => {\r\n      // Arrange\r\n      mockPrisma.gym.findMany.mockRejectedValue(new Error('Network timeout'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.gym.findMany()).rejects.toThrow('timeout');\r\n    });\r\n\r\n    it('ë©”ëª¨ë¦¬ ë¶€ì¡±', () => {\r\n      // Arrange\r\n      const error = new Error('Out of memory');\r\n\r\n      // Assert\r\n      expect(error.message).toContain('memory');\r\n    });\r\n\r\n    it('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬', () => {\r\n      // Arrange\r\n      const error = new Error('Unknown error occurred');\r\n\r\n      // Assert\r\n      expect(error.message).toBeDefined();\r\n    });\r\n\r\n    it('Prisma ì¿¼ë¦¬ ì—ëŸ¬', async () => {\r\n      // Arrange\r\n      mockPrisma.gym.findMany.mockRejectedValue(new Error('Invalid query'));\r\n\r\n      // Act & Assert\r\n      await expect(mockPrisma.gym.findMany()).rejects.toThrow('Invalid query');\r\n    });\r\n\r\n    it('ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¥ì• ', async () => {\r\n      // Arrange\r\n      mockCurrentUser.mockRejectedValue(new Error('External service down'));\r\n\r\n      // Act & Assert\r\n      await expect(mockCurrentUser()).rejects.toThrow('External service');\r\n    });\r\n\r\n    it('ë¦¬ì†ŒìŠ¤ ì œí•œ ì´ˆê³¼', () => {\r\n      // Arrange\r\n      const error = new Error('Rate limit exceeded');\r\n\r\n      // Assert\r\n      expect(error.message).toContain('limit');\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 7. ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ (6ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì—ëŸ¬ ì‘ë‹µ í˜•ì‹', () => {\r\n    it('ê¸°ë³¸ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹', () => {\r\n      // Arrange\r\n      const response = {\r\n        success: false,\r\n        error: 'ì—ëŸ¬ ë©”ì‹œì§€',\r\n      };\r\n\r\n      // Assert\r\n      expect(response.success).toBe(false);\r\n      expect(response.error).toBeDefined();\r\n    });\r\n\r\n    it('ìƒì„¸ ì—ëŸ¬ ì •ë³´ í¬í•¨ (details)', () => {\r\n      // Arrange\r\n      const response = {\r\n        success: false,\r\n        error: 'ê²€ì¦ ì‹¤íŒ¨',\r\n        details: [\r\n          { field: 'bodyParts', message: 'ìµœì†Œ 1ê°œ í•„ìš”' },\r\n        ],\r\n      };\r\n\r\n      // Assert\r\n      expect(response.details).toBeDefined();\r\n      expect(response.details).toHaveLength(1);\r\n    });\r\n\r\n    it('ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ (message)', () => {\r\n      // Arrange\r\n      const response = {\r\n        success: false,\r\n        error: 'ì ì ˆí•œ ìš´ë™ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.',\r\n        message: 'ë‹¤ë¥¸ ë¶€ìœ„ë¥¼ ì„ íƒí•˜ê±°ë‚˜ í†µì¦ ì •ë„ë¥¼ ì¡°ì •í•´ ì£¼ì„¸ìš”.',\r\n      };\r\n\r\n      // Assert\r\n      expect(response.message).toContain('ì„ íƒ');\r\n    });\r\n\r\n    it('ê²½ê³  ë©”ì‹œì§€ í¬í•¨ (warnings)', () => {\r\n      // Arrange\r\n      const response = {\r\n        success: false,\r\n        error: 'ì²˜ë¦¬ ì¤‘ ë¬¸ì œ ë°œìƒ',\r\n        warnings: ['ì¼ë¶€ ìš´ë™ì´ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.'],\r\n      };\r\n\r\n      // Assert\r\n      expect(response.warnings).toHaveLength(1);\r\n    });\r\n\r\n    it('console.error ë¡œê¹… í™•ì¸', () => {\r\n      // Arrange\r\n      const consoleSpy = vi.spyOn(console, 'error').mockImplementation(() => {});\r\n      \r\n      // Act\r\n      console.error('[API] ì—ëŸ¬ ë°œìƒ:', new Error('Test error'));\r\n\r\n      // Assert\r\n      expect(consoleSpy).toHaveBeenCalled();\r\n      consoleSpy.mockRestore();\r\n    });\r\n\r\n    it('HTTP ìƒíƒœ ì½”ë“œë³„ ì‘ë‹µ', () => {\r\n      // Arrange\r\n      const statusCodes = {\r\n        400: 'Bad Request',\r\n        401: 'Unauthorized',\r\n        403: 'Forbidden',\r\n        404: 'Not Found',\r\n        409: 'Conflict',\r\n        500: 'Internal Server Error',\r\n      };\r\n\r\n      // Assert\r\n      expect(Object.keys(statusCodes)).toHaveLength(6);\r\n      expect(statusCodes[400]).toBe('Bad Request');\r\n      expect(statusCodes[500]).toBe('Internal Server Error');\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\__tests__\\gyms-search.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expectSuccessResponse' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file gyms-search.test.ts\r\n * @description í—¬ìŠ¤ì¥ ê²€ìƒ‰ API ë‹¨ìœ„ í…ŒìŠ¤íŠ¸\r\n *\r\n * GET /api/gyms/search\r\n * ì´ 24ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤\r\n *\r\n * í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬:\r\n * - ê¸°ë³¸ ë™ì‘ (5ê°œ)\r\n * - í•„í„°ë§ ê¸°ëŠ¥ (7ê°œ)\r\n * - íŒŒë¼ë¯¸í„° ê²€ì¦ (4ê°œ)\r\n * - ì •ë ¬ ë° ì‘ë‹µ í˜•ì‹ (4ê°œ)\r\n * - ì—ëŸ¬ ì¼€ì´ìŠ¤ (4ê°œ)\r\n */\r\n\r\nimport { describe, it, expect, beforeEach, vi } from \"vitest\";\r\nimport {\r\n  mockPrisma,\r\n  mockGymSearchService,\r\n  resetAllMocks,\r\n  createMockGymWithFacility,\r\n  createMockGymSearchResults,\r\n  searchParams,\r\n  expectSuccessResponse,\r\n  expectErrorResponse,\r\n  type MockGym,\r\n} from \"./test-helpers\";\r\n\r\n// ============================================\r\n// Mock ì„¤ì •\r\n// ============================================\r\n\r\nvi.mock(\"@/lib/prisma/client\", () => ({\r\n  prisma: mockPrisma,\r\n}));\r\n\r\nvi.mock(\"@/lib/services/gym-search.service\", () => ({\r\n  getGymSearchService: () => mockGymSearchService,\r\n}));\r\n\r\n// ============================================\r\n// í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸\r\n// ============================================\r\n\r\ndescribe(\"GET /api/gyms/search\", () => {\r\n  beforeEach(() => {\r\n    resetAllMocks();\r\n  });\r\n\r\n  // ============================================\r\n  // 1. ê¸°ë³¸ ë™ì‘ í…ŒìŠ¤íŠ¸ (5ê°œ)\r\n  // ============================================\r\n\r\n  describe(\"ê¸°ë³¸ ë™ì‘\", () => {\r\n    it(\"í•„ìˆ˜ íŒŒë¼ë¯¸í„°(lat, lng)ë¡œ ê²€ìƒ‰ ì„±ê³µ\", async () => {\r\n      // Arrange\r\n      const gyms = createMockGymSearchResults(3);\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(gyms);\r\n\r\n      // Act\r\n      const params = searchParams.gymSearch();\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: parseFloat(params.lat),\r\n        lng: parseFloat(params.lng),\r\n        radius: parseFloat(params.radius),\r\n      });\r\n\r\n      // Assert\r\n      expect(result).toHaveLength(3);\r\n      expect(mockGymSearchService.searchGymsNearby).toHaveBeenCalledWith({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n    });\r\n\r\n    it(\"ê¸°ë³¸ ë°˜ê²½(1000m)ì´ ì ìš©ëœë‹¤\", async () => {\r\n      // Arrange\r\n      const gyms = createMockGymSearchResults(2);\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(gyms);\r\n\r\n      // Act\r\n      await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000, // ê¸°ë³¸ê°’\r\n      });\r\n\r\n      // Assert\r\n      expect(mockGymSearchService.searchGymsNearby).toHaveBeenCalledWith(\r\n        expect.objectContaining({ radius: 1000 }),\r\n      );\r\n    });\r\n\r\n    it(\"ë¹ˆ ê²°ê³¼ ë°˜í™˜ ì²˜ë¦¬\", async () => {\r\n      // Arrange\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue([]);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n\r\n      // Assert\r\n      expect(result).toHaveLength(0);\r\n    });\r\n\r\n    it(\"ê²°ê³¼ì— distanceMetersê°€ í¬í•¨ëœë‹¤\", async () => {\r\n      // Arrange\r\n      const gyms = [\r\n        createMockGymWithFacility({ distanceMeters: 500 }),\r\n        createMockGymWithFacility({ distanceMeters: 800 }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(gyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].distanceMeters).toBe(500);\r\n      expect(result[1].distanceMeters).toBe(800);\r\n    });\r\n\r\n    it(\"isActive=trueì¸ í—¬ìŠ¤ì¥ë§Œ ë°˜í™˜ëœë‹¤\", async () => {\r\n      // Arrange\r\n      const activeGyms = [\r\n        createMockGymWithFacility({ isActive: true }),\r\n        createMockGymWithFacility({ isActive: true }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(activeGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n\r\n      // Assert\r\n      result.forEach((gym: MockGym) => {\r\n        expect(gym.isActive).toBe(true);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 2. í•„í„°ë§ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (7ê°œ)\r\n  // ============================================\r\n\r\n  describe(\"í•„í„°ë§ ê¸°ëŠ¥\", () => {\r\n    it(\"hasRehabEquipment=true í•„í„° ì ìš©\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [\r\n        createMockGymWithFacility({}, { hasRehabEquipment: true }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: { hasRehabEquipment: true },\r\n      });\r\n\r\n      // Assert\r\n      expect(result).toHaveLength(1);\r\n      expect(result[0].facilities?.hasRehabEquipment).toBe(true);\r\n    });\r\n\r\n    it(\"hasPtCoach=true í•„í„° ì ìš©\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [\r\n        createMockGymWithFacility({}, { hasPtCoach: true }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: { hasPtCoach: true },\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].facilities?.hasPtCoach).toBe(true);\r\n    });\r\n\r\n    it(\"hasShower=true í•„í„° ì ìš©\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [createMockGymWithFacility({}, { hasShower: true })];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: { hasShower: true },\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].facilities?.hasShower).toBe(true);\r\n    });\r\n\r\n    it(\"hasParking=true í•„í„° ì ìš©\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [\r\n        createMockGymWithFacility({}, { hasParking: true }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: { hasParking: true },\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].facilities?.hasParking).toBe(true);\r\n    });\r\n\r\n    it(\"hasLocker=true í•„í„° ì ìš©\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [createMockGymWithFacility({}, { hasLocker: true })];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: { hasLocker: true },\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].facilities?.hasLocker).toBe(true);\r\n    });\r\n\r\n    it(\"priceRange í•„í„° ì ìš© (medium)\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [\r\n        createMockGymWithFacility({ priceRange: \"medium\" }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: { priceRange: \"medium\" },\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].priceRange).toBe(\"medium\");\r\n    });\r\n\r\n    it(\"ë³µí•© í•„í„° ì ìš© (AND ì¡°ê±´)\", async () => {\r\n      // Arrange\r\n      const filteredGyms = [\r\n        createMockGymWithFacility(\r\n          { priceRange: \"low\" },\r\n          { hasRehabEquipment: true, hasParking: true, hasShower: true },\r\n        ),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(filteredGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n        filters: {\r\n          hasRehabEquipment: true,\r\n          hasParking: true,\r\n          hasShower: true,\r\n          priceRange: \"low\",\r\n        },\r\n      });\r\n\r\n      // Assert\r\n      expect(result).toHaveLength(1);\r\n      const gym = result[0];\r\n      expect(gym.facilities?.hasRehabEquipment).toBe(true);\r\n      expect(gym.facilities?.hasParking).toBe(true);\r\n      expect(gym.facilities?.hasShower).toBe(true);\r\n      expect(gym.priceRange).toBe(\"low\");\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 3. íŒŒë¼ë¯¸í„° ê²€ì¦ í…ŒìŠ¤íŠ¸ (4ê°œ)\r\n  // ============================================\r\n\r\n  describe(\"íŒŒë¼ë¯¸í„° ê²€ì¦\", () => {\r\n    it(\"lat ëˆ„ë½ ì‹œ ì—ëŸ¬\", () => {\r\n      // Assert\r\n      const params: any = { lng: \"127.0\" };\r\n      expect(params.lat).toBeUndefined();\r\n    });\r\n\r\n    it(\"lng ëˆ„ë½ ì‹œ ì—ëŸ¬\", () => {\r\n      // Assert\r\n      const params: any = { lat: \"37.5\" };\r\n      expect(params.lng).toBeUndefined();\r\n    });\r\n\r\n    it(\"ìœ íš¨í•˜ì§€ ì•Šì€ ì¢Œí‘œ ë²”ìœ„ ê²€ì¦\", () => {\r\n      // Arrange & Assert\r\n      const invalidLat = 91; // ìœ„ë„ëŠ” -90 ~ 90\r\n      const invalidLng = 181; // ê²½ë„ëŠ” -180 ~ 180\r\n\r\n      expect(invalidLat > 90 || invalidLat < -90).toBe(true);\r\n      expect(invalidLng > 180 || invalidLng < -180).toBe(true);\r\n    });\r\n\r\n    it(\"radiusê°€ 0 ì´í•˜ì¼ ë•Œ ê¸°ë³¸ê°’ ì ìš©\", () => {\r\n      // Arrange\r\n      const params = searchParams.gymSearch({ radius: \"-100\" });\r\n      const parsedRadius = parseFloat(params.radius);\r\n\r\n      // Assert\r\n      expect(parsedRadius).toBeLessThan(0);\r\n      // ì‹¤ì œ APIì—ì„œëŠ” ê¸°ë³¸ê°’ 1000ìœ¼ë¡œ ëŒ€ì²´ë¨\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 4. ì •ë ¬ ë° ì‘ë‹µ í˜•ì‹ í…ŒìŠ¤íŠ¸ (4ê°œ)\r\n  // ============================================\r\n\r\n  describe(\"ì •ë ¬ ë° ì‘ë‹µ í˜•ì‹\", () => {\r\n    it(\"ê±°ë¦¬ìˆœ ì •ë ¬ í™•ì¸\", async () => {\r\n      // Arrange\r\n      const gyms = [\r\n        createMockGymWithFacility({ distanceMeters: 800, name: \"ë©€ë¦¬\" }),\r\n        createMockGymWithFacility({ distanceMeters: 200, name: \"ê°€ê¹Œì´\" }),\r\n        createMockGymWithFacility({ distanceMeters: 500, name: \"ì¤‘ê°„\" }),\r\n      ];\r\n      // ê±°ë¦¬ìˆœ ì •ë ¬ëœ ê²°ê³¼ ë°˜í™˜\r\n      const sortedGyms = [...gyms].sort(\r\n        (a, b) => (a.distanceMeters || 0) - (b.distanceMeters || 0),\r\n      );\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(sortedGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n\r\n      // Assert\r\n      expect(result[0].distanceMeters).toBe(200);\r\n      expect(result[1].distanceMeters).toBe(500);\r\n      expect(result[2].distanceMeters).toBe(800);\r\n    });\r\n\r\n    it(\"ì‘ë‹µì— meta ì •ë³´ í¬í•¨ êµ¬ì¡°\", () => {\r\n      // Arrange\r\n      const response = {\r\n        success: true,\r\n        data: createMockGymSearchResults(3),\r\n        meta: {\r\n          total: 3,\r\n          radius: 1000,\r\n          filters: {},\r\n        },\r\n      };\r\n\r\n      // Assert\r\n      expect(response.success).toBe(true);\r\n      expect(response.meta.total).toBe(3);\r\n      expect(response.meta.radius).toBe(1000);\r\n    });\r\n\r\n    it(\"ê° í—¬ìŠ¤ì¥ì— facilities ì •ë³´ í¬í•¨\", async () => {\r\n      // Arrange\r\n      const gyms = createMockGymSearchResults(2);\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(gyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n\r\n      // Assert\r\n      result.forEach((gym: MockGym) => {\r\n        expect(gym.facilities).toBeDefined();\r\n      });\r\n    });\r\n\r\n    it(\"ë°˜ê²½ ë‚´ ê²°ê³¼ë§Œ ë°˜í™˜\", async () => {\r\n      // Arrange\r\n      const nearbyGyms = [\r\n        createMockGymWithFacility({ distanceMeters: 500 }),\r\n        createMockGymWithFacility({ distanceMeters: 999 }),\r\n      ];\r\n      mockGymSearchService.searchGymsNearby.mockResolvedValue(nearbyGyms);\r\n\r\n      // Act\r\n      const result = await mockGymSearchService.searchGymsNearby({\r\n        lat: 37.5,\r\n        lng: 127.0,\r\n        radius: 1000,\r\n      });\r\n\r\n      // Assert\r\n      result.forEach((gym: MockGym) => {\r\n        expect(gym.distanceMeters).toBeLessThanOrEqual(1000);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 5. ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ (4ê°œ)\r\n  // ============================================\r\n\r\n  describe(\"ì—ëŸ¬ ì¼€ì´ìŠ¤\", () => {\r\n    it(\"ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨ ì‹œ ì—ëŸ¬\", async () => {\r\n      // Arrange\r\n      mockGymSearchService.searchGymsNearby.mockRejectedValue(\r\n        new Error(\"Database connection failed\"),\r\n      );\r\n\r\n      // Act & Assert\r\n      await expect(\r\n        mockGymSearchService.searchGymsNearby({\r\n          lat: 37.5,\r\n          lng: 127.0,\r\n          radius: 1000,\r\n        }),\r\n      ).rejects.toThrow(\"Database connection failed\");\r\n    });\r\n\r\n    it(\"ì„œë¹„ìŠ¤ íƒ€ì„ì•„ì›ƒ ì‹œ ì—ëŸ¬\", async () => {\r\n      // Arrange\r\n      mockGymSearchService.searchGymsNearby.mockRejectedValue(\r\n        new Error(\"Request timeout\"),\r\n      );\r\n\r\n      // Act & Assert\r\n      await expect(\r\n        mockGymSearchService.searchGymsNearby({\r\n          lat: 37.5,\r\n          lng: 127.0,\r\n          radius: 1000,\r\n        }),\r\n      ).rejects.toThrow(\"Request timeout\");\r\n    });\r\n\r\n    it(\"ì˜ëª»ëœ í•„í„° ê°’ ì²˜ë¦¬\", () => {\r\n      // Arrange\r\n      const invalidPriceRange = \"invalid_range\";\r\n      const validRanges = [\"low\", \"medium\", \"high\", \"premium\"];\r\n\r\n      // Assert\r\n      expect(validRanges.includes(invalidPriceRange)).toBe(false);\r\n    });\r\n\r\n    it(\"ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ í™•ì¸\", () => {\r\n      // Arrange\r\n      const errorResponse = {\r\n        success: false,\r\n        error: \"ì„œë²„ ì—ëŸ¬: Database connection failed\",\r\n      };\r\n\r\n      // Assert\r\n      expectErrorResponse(errorResponse, \"Database connection failed\");\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\__tests__\\rehab-generate.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MockMergeResult' is defined but never used.","line":28,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file rehab-generate.test.ts\r\n * @description ì¬í™œ ì½”ìŠ¤ ìƒì„± API ë‹¨ìœ„ í…ŒìŠ¤íŠ¸\r\n * \r\n * POST /api/rehab/generate\r\n * ì´ 33ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤\r\n * \r\n * í…ŒìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬:\r\n * - ì •ìƒ ë™ì‘ (6ê°œ)\r\n * - ìš”ì²­ ê²€ì¦ (10ê°œ)\r\n * - ì‘ë‹µ í˜•ì‹ (5ê°œ)\r\n * - Fallback ì²˜ë¦¬ (5ê°œ)\r\n * - ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ (4ê°œ)\r\n * - ì—ëŸ¬ ì¼€ì´ìŠ¤ (3ê°œ)\r\n */\r\n\r\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\r\nimport {\r\n  mockPrisma,\r\n  mockMergeBodyParts,\r\n  resetAllMocks,\r\n  createMockMergeResult,\r\n  createMockMergedExercise,\r\n  requestBodies,\r\n  generateUUID,\r\n  expectSuccessResponse,\r\n  expectErrorResponse,\r\n  type MockMergeResult,\r\n} from './test-helpers';\r\n\r\n// ============================================\r\n// Mock ì„¤ì •\r\n// ============================================\r\n\r\nvi.mock('@/lib/prisma/client', () => ({\r\n  prisma: mockPrisma,\r\n}));\r\n\r\nvi.mock('@/lib/algorithms/merge-body-parts', () => ({\r\n  mergeBodyParts: mockMergeBodyParts,\r\n}));\r\n\r\n// ============================================\r\n// í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸\r\n// ============================================\r\n\r\ndescribe('POST /api/rehab/generate', () => {\r\n  beforeEach(() => {\r\n    resetAllMocks();\r\n  });\r\n\r\n  // ============================================\r\n  // 1. ì •ìƒ ë™ì‘ í…ŒìŠ¤íŠ¸ (6ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì •ìƒ ë™ì‘', () => {\r\n    it('ì •ìƒ ìš”ì²­ ì‹œ ì½”ìŠ¤ ìƒì„± ì„±ê³µ', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const request = requestBodies.rehabGenerate();\r\n      const result = await mockMergeBodyParts(request);\r\n\r\n      // Assert\r\n      expect(result.exercises).toHaveLength(4);\r\n      expect(result.totalDuration).toBe(60);\r\n    });\r\n\r\n    it('ì‘ë‹µì— exercises ë°°ì—´ í¬í•¨', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(Array.isArray(result.exercises)).toBe(true);\r\n      expect(result.exercises.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('ì‘ë‹µì— totalDuration í¬í•¨', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult({ totalDuration: 90 });\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(\r\n        requestBodies.rehabGenerate({ totalDurationMinutes: 90 })\r\n      );\r\n\r\n      // Assert\r\n      expect(result.totalDuration).toBe(90);\r\n    });\r\n\r\n    it('ì‘ë‹µì— stats í¬í•¨', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(result.stats).toBeDefined();\r\n      expect(result.stats.warmup).toBeDefined();\r\n      expect(result.stats.main).toBeDefined();\r\n      expect(result.stats.cooldown).toBeDefined();\r\n    });\r\n\r\n    it('ë‹¤ì¤‘ ë¶€ìœ„ ì„ íƒ ì‹œ ì •ìƒ ì²˜ë¦¬', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult({\r\n        stats: {\r\n          warmup: 2,\r\n          main: 4,\r\n          cooldown: 2,\r\n          byBodyPart: { 'í—ˆë¦¬': 4, 'ì–´ê¹¨': 4 },\r\n        },\r\n      });\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const request = requestBodies.rehabGenerate({\r\n        bodyParts: [\r\n          { bodyPartId: generateUUID(), bodyPartName: 'í—ˆë¦¬', painLevel: 3 },\r\n          { bodyPartId: generateUUID(), bodyPartName: 'ì–´ê¹¨', painLevel: 2 },\r\n        ],\r\n      });\r\n      const result = await mockMergeBodyParts(request);\r\n\r\n      // Assert\r\n      expect(Object.keys(result.stats.byBodyPart)).toHaveLength(2);\r\n    });\r\n\r\n    it('60/90/120ë¶„ ì˜µì…˜ë³„ ì •ìƒ ì²˜ë¦¬', async () => {\r\n      // Arrange\r\n      const durations = [60, 90, 120] as const;\r\n      \r\n      for (const duration of durations) {\r\n        const mergeResult = createMockMergeResult({ totalDuration: duration });\r\n        mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n        // Act\r\n        const result = await mockMergeBodyParts(\r\n          requestBodies.rehabGenerate({ totalDurationMinutes: duration })\r\n        );\r\n\r\n        // Assert\r\n        expect(result.totalDuration).toBe(duration);\r\n      }\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 2. ìš”ì²­ ê²€ì¦ í…ŒìŠ¤íŠ¸ (10ê°œ)\r\n  // ============================================\r\n\r\n  describe('ìš”ì²­ ê²€ì¦', () => {\r\n    it('bodyParts í•„ìˆ˜ ê²€ì¦', () => {\r\n      // Arrange\r\n      const request = requestBodies.rehabGenerate();\r\n      delete (request as any).bodyParts;\r\n\r\n      // Assert\r\n      expect(request.bodyParts).toBeUndefined();\r\n    });\r\n\r\n    it('bodyParts ìµœì†Œ 1ê°œ í•„ìš”', () => {\r\n      // Arrange\r\n      const request = requestBodies.rehabGenerate({ bodyParts: [] });\r\n\r\n      // Assert\r\n      expect(request.bodyParts).toHaveLength(0);\r\n    });\r\n\r\n    it('bodyParts ìµœëŒ€ 5ê°œ ì œí•œ', () => {\r\n      // Arrange\r\n      const tooManyBodyParts = Array.from({ length: 6 }, (_, i) => ({\r\n        bodyPartId: generateUUID(),\r\n        bodyPartName: `ë¶€ìœ„${i}`,\r\n        painLevel: 3,\r\n      }));\r\n\r\n      // Assert\r\n      expect(tooManyBodyParts.length).toBeGreaterThan(5);\r\n    });\r\n\r\n    it('painLevel ë²”ìœ„ ê²€ì¦ (1-5)', () => {\r\n      // Arrange\r\n      const validLevels = [1, 2, 3, 4, 5];\r\n      const invalidLow = 0;\r\n      const invalidHigh = 6;\r\n\r\n      // Assert\r\n      validLevels.forEach(level => {\r\n        expect(level >= 1 && level <= 5).toBe(true);\r\n      });\r\n      expect(invalidLow >= 1 && invalidLow <= 5).toBe(false);\r\n      expect(invalidHigh >= 1 && invalidHigh <= 5).toBe(false);\r\n    });\r\n\r\n    it('bodyPartId UUID í˜•ì‹ ê²€ì¦', () => {\r\n      // Arrange\r\n      const validUUID = generateUUID();\r\n      const invalidUUID = 'not-a-uuid';\r\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\n\r\n      // Assert\r\n      expect(uuidRegex.test(validUUID)).toBe(true);\r\n      expect(uuidRegex.test(invalidUUID)).toBe(false);\r\n    });\r\n\r\n    it('totalDurationMinutes í—ˆìš©ê°’ ê²€ì¦ (60/90/120ë§Œ)', () => {\r\n      // Arrange\r\n      const validDurations = [60, 90, 120];\r\n      const invalidDuration = 45;\r\n\r\n      // Assert\r\n      validDurations.forEach(d => {\r\n        expect([60, 90, 120].includes(d)).toBe(true);\r\n      });\r\n      expect([60, 90, 120].includes(invalidDuration)).toBe(false);\r\n    });\r\n\r\n    it('equipmentAvailable ë°°ì—´ í˜•ì‹ ê²€ì¦', () => {\r\n      // Arrange\r\n      const request = requestBodies.rehabGenerate();\r\n\r\n      // Assert\r\n      expect(Array.isArray(request.equipmentAvailable)).toBe(true);\r\n    });\r\n\r\n    it('experienceLevel ë¬¸ìì—´ í˜•ì‹ ê²€ì¦', () => {\r\n      // Arrange\r\n      const validLevels = ['beginner', 'intermediate', 'advanced'];\r\n      \r\n      // Assert\r\n      validLevels.forEach(level => {\r\n        expect(typeof level).toBe('string');\r\n      });\r\n    });\r\n\r\n    it('ê° bodyPartì— bodyPartName í•„ìˆ˜', () => {\r\n      // Arrange\r\n      const request = requestBodies.rehabGenerate();\r\n      const bodyPart = request.bodyParts[0];\r\n\r\n      // Assert\r\n      expect(bodyPart.bodyPartName).toBeDefined();\r\n      expect(typeof bodyPart.bodyPartName).toBe('string');\r\n    });\r\n\r\n    it('ê° bodyPartì— painLevel ë²”ìœ„ (1-5) í•„ìˆ˜', () => {\r\n      // Arrange\r\n      const request = requestBodies.rehabGenerate();\r\n      const bodyPart = request.bodyParts[0];\r\n\r\n      // Assert\r\n      expect(bodyPart.painLevel).toBeGreaterThanOrEqual(1);\r\n      expect(bodyPart.painLevel).toBeLessThanOrEqual(5);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 3. ì‘ë‹µ í˜•ì‹ í…ŒìŠ¤íŠ¸ (5ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì‘ë‹µ í˜•ì‹', () => {\r\n    it('ì„±ê³µ ì‘ë‹µ êµ¬ì¡° í™•ì¸', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      const response = {\r\n        success: true,\r\n        data: {\r\n          course: {\r\n            exercises: result.exercises,\r\n            totalDuration: result.totalDuration,\r\n            stats: result.stats,\r\n          },\r\n          warnings: result.warnings,\r\n        },\r\n      };\r\n      expectSuccessResponse(response);\r\n    });\r\n\r\n    it('exercises ë°°ì—´ì— ì„¹ì…˜ë³„ ìš´ë™ í¬í•¨', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      const sections = result.exercises.map((e: any) => e.section);\r\n      expect(sections).toContain('warmup');\r\n      expect(sections).toContain('main');\r\n      expect(sections).toContain('cooldown');\r\n    });\r\n\r\n    it('ê° ìš´ë™ì— í•„ìˆ˜ í•„ë“œ í¬í•¨', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      result.exercises.forEach((exercise: any) => {\r\n        expect(exercise.exerciseTemplateId).toBeDefined();\r\n        expect(exercise.exerciseTemplateName).toBeDefined();\r\n        expect(exercise.section).toBeDefined();\r\n        expect(exercise.orderInSection).toBeDefined();\r\n      });\r\n    });\r\n\r\n    it('statsì— ë¶€ìœ„ë³„ í†µê³„ í¬í•¨', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(result.stats.byBodyPart).toBeDefined();\r\n      expect(typeof result.stats.byBodyPart).toBe('object');\r\n    });\r\n\r\n    it('warnings ë°°ì—´ í˜•ì‹', async () => {\r\n      // Arrange\r\n      const mergeResult = createMockMergeResult({\r\n        warnings: ['ì¼ë¶€ ìš´ë™ì´ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.'],\r\n      });\r\n      mockMergeBodyParts.mockResolvedValue(mergeResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(Array.isArray(result.warnings)).toBe(true);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 4. Fallback ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ (5ê°œ)\r\n  // ============================================\r\n\r\n  describe('Fallback ì²˜ë¦¬', () => {\r\n    it('ìš´ë™ì´ 0ê°œì¼ ë•Œ ì—ëŸ¬ ì‘ë‹µ', async () => {\r\n      // Arrange\r\n      const emptyResult = createMockMergeResult({ exercises: [] });\r\n      mockMergeBodyParts.mockResolvedValue(emptyResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(result.exercises).toHaveLength(0);\r\n      // APIì—ì„œëŠ” 404 ë°˜í™˜\r\n    });\r\n\r\n    it('ìš´ë™ì´ 3ê°œ ë¯¸ë§Œì¼ ë•Œ ê²½ê³  ë©”ì‹œì§€', async () => {\r\n      // Arrange\r\n      const fewExercises = createMockMergeResult({\r\n        exercises: [\r\n          createMockMergedExercise({ section: 'main' }),\r\n          createMockMergedExercise({ section: 'cooldown' }),\r\n        ],\r\n        warnings: ['ì¶”ì²œ ìš´ë™ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.'],\r\n      });\r\n      mockMergeBodyParts.mockResolvedValue(fewExercises);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(result.exercises.length).toBeLessThan(3);\r\n      expect(result.warnings).toContain('ì¶”ì²œ ìš´ë™ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.');\r\n    });\r\n\r\n    it('íŠ¹ì • ì„¹ì…˜ì´ ë¹„ì–´ìˆì„ ë•Œ ì²˜ë¦¬', async () => {\r\n      // Arrange\r\n      const noWarmup = createMockMergeResult({\r\n        exercises: [\r\n          createMockMergedExercise({ section: 'main' }),\r\n          createMockMergedExercise({ section: 'cooldown' }),\r\n        ],\r\n        stats: { warmup: 0, main: 1, cooldown: 1, byBodyPart: {} },\r\n      });\r\n      mockMergeBodyParts.mockResolvedValue(noWarmup);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(result.stats.warmup).toBe(0);\r\n    });\r\n\r\n    it('ê¸ˆê¸°ìš´ë™ í•„í„°ë§ í›„ warnings í¬í•¨', async () => {\r\n      // Arrange\r\n      const filteredResult = createMockMergeResult({\r\n        warnings: ['í†µì¦ ìˆ˜ì¤€ì— ë”°ë¼ ì¼ë¶€ ìš´ë™ì´ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.'],\r\n      });\r\n      mockMergeBodyParts.mockResolvedValue(filteredResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(requestBodies.rehabGenerate());\r\n\r\n      // Assert\r\n      expect(result.warnings.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('ì¥ë¹„ ë¶€ì¡± ì‹œ ëŒ€ì²´ ìš´ë™ ì œê³µ', async () => {\r\n      // Arrange\r\n      const noEquipmentResult = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(noEquipmentResult);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(\r\n        requestBodies.rehabGenerate({ equipmentAvailable: [] })\r\n      );\r\n\r\n      // Assert\r\n      expect(result.exercises.length).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 5. ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ (4ê°œ)\r\n  // ============================================\r\n\r\n  describe('ë³µí•© ì‹œë‚˜ë¦¬ì˜¤', () => {\r\n    it('ë†’ì€ í†µì¦ + ì´ˆë³´ì ì¡°í•©', async () => {\r\n      // Arrange\r\n      const result = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(result);\r\n\r\n      // Act\r\n      const response = await mockMergeBodyParts(\r\n        requestBodies.rehabGenerate({\r\n          bodyParts: [\r\n            { bodyPartId: generateUUID(), bodyPartName: 'í—ˆë¦¬', painLevel: 5 },\r\n          ],\r\n          painLevel: 5,\r\n          experienceLevel: 'beginner',\r\n        })\r\n      );\r\n\r\n      // Assert\r\n      expect(response.exercises.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('ë‹¤ì¤‘ ë¶€ìœ„ + ì¥ë¹„ ì œí•œ ì¡°í•©', async () => {\r\n      // Arrange\r\n      const result = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(result);\r\n\r\n      // Act\r\n      const response = await mockMergeBodyParts(\r\n        requestBodies.rehabGenerate({\r\n          bodyParts: [\r\n            { bodyPartId: generateUUID(), bodyPartName: 'í—ˆë¦¬', painLevel: 3 },\r\n            { bodyPartId: generateUUID(), bodyPartName: 'ì–´ê¹¨', painLevel: 2 },\r\n            { bodyPartId: generateUUID(), bodyPartName: 'ë¬´ë¦', painLevel: 4 },\r\n          ],\r\n          equipmentAvailable: ['ë§¤íŠ¸'],\r\n        })\r\n      );\r\n\r\n      // Assert\r\n      expect(response.exercises.length).toBeGreaterThan(0);\r\n    });\r\n\r\n    it('120ë¶„ ì½”ìŠ¤ ìƒì„±', async () => {\r\n      // Arrange\r\n      const longCourse = createMockMergeResult({ totalDuration: 120 });\r\n      mockMergeBodyParts.mockResolvedValue(longCourse);\r\n\r\n      // Act\r\n      const result = await mockMergeBodyParts(\r\n        requestBodies.rehabGenerate({ totalDurationMinutes: 120 })\r\n      );\r\n\r\n      // Assert\r\n      expect(result.totalDuration).toBe(120);\r\n    });\r\n\r\n    it('ìµœëŒ€ 5ê°œ ë¶€ìœ„ ì„ íƒ', async () => {\r\n      // Arrange\r\n      const fiveBodyParts = Array.from({ length: 5 }, (_, i) => ({\r\n        bodyPartId: generateUUID(),\r\n        bodyPartName: `ë¶€ìœ„${i + 1}`,\r\n        painLevel: 3,\r\n      }));\r\n      const result = createMockMergeResult();\r\n      mockMergeBodyParts.mockResolvedValue(result);\r\n\r\n      // Act\r\n      const response = await mockMergeBodyParts(\r\n        requestBodies.rehabGenerate({ bodyParts: fiveBodyParts })\r\n      );\r\n\r\n      // Assert\r\n      expect(response.exercises.length).toBeGreaterThan(0);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 6. ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ (3ê°œ)\r\n  // ============================================\r\n\r\n  describe('ì—ëŸ¬ ì¼€ì´ìŠ¤', () => {\r\n    it('JSON íŒŒì‹± ì—ëŸ¬ ì‹œ 400 ë°˜í™˜', () => {\r\n      // Arrange\r\n      const invalidJson = '{ invalid json }';\r\n      \r\n      // Assert\r\n      expect(() => JSON.parse(invalidJson)).toThrow();\r\n    });\r\n\r\n    it('ë°ì´í„°ë² ì´ìŠ¤ ì—ëŸ¬ ì‹œ 500 ë°˜í™˜', async () => {\r\n      // Arrange\r\n      mockMergeBodyParts.mockRejectedValue(new Error('Database error'));\r\n\r\n      // Act & Assert\r\n      await expect(\r\n        mockMergeBodyParts(requestBodies.rehabGenerate())\r\n      ).rejects.toThrow('Database error');\r\n    });\r\n\r\n    it('ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ í™•ì¸', () => {\r\n      // Arrange\r\n      const errorResponse = {\r\n        success: false,\r\n        error: 'ìš”ì²­ íŒŒë¼ë¯¸í„° ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',\r\n        details: [\r\n          { field: 'bodyParts', message: 'ìµœì†Œ 1ê°œ í•„ìš”' },\r\n        ],\r\n      };\r\n\r\n      // Assert\r\n      expectErrorResponse(errorResponse, 'ê²€ì¦ì— ì‹¤íŒ¨');\r\n      expect(errorResponse.details).toBeDefined();\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\__tests__\\reviews.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createMockUser' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expectSuccessResponse' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expectErrorResponse' is defined but never used.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file reviews.test.ts\r\n * @description ë¦¬ë·° API ë‹¨ìœ„ í…ŒìŠ¤íŠ¸\r\n * \r\n * POST /api/reviews - ë¦¬ë·° ì‘ì„±\r\n * GET /api/reviews/[reviewId] - ë¦¬ë·° ì¡°íšŒ\r\n * PUT /api/reviews/[reviewId] - ë¦¬ë·° ìˆ˜ì •\r\n * DELETE /api/reviews/[reviewId] - ë¦¬ë·° ì‚­ì œ\r\n * \r\n * ì´ 45ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤\r\n */\r\n\r\nimport { describe, it, expect, beforeEach, vi } from 'vitest';\r\nimport {\r\n  mockPrisma,\r\n  mockCurrentUser,\r\n  resetAllMocks,\r\n  createMockUser,\r\n  createMockClerkUser,\r\n  createMockReview,\r\n  createMockReviewTag,\r\n  createMockGym,\r\n  requestBodies,\r\n  generateUUID,\r\n  setupAuthenticatedUser,\r\n  setupUnauthenticated,\r\n  hoursAgo,\r\n  expectSuccessResponse,\r\n  expectErrorResponse,\r\n} from './test-helpers';\r\n\r\n// ============================================\r\n// Mock ì„¤ì •\r\n// ============================================\r\n\r\nvi.mock('@/lib/prisma/client', () => ({\r\n  prisma: mockPrisma,\r\n}));\r\n\r\nvi.mock('@clerk/nextjs/server', () => ({\r\n  currentUser: mockCurrentUser,\r\n}));\r\n\r\n// ============================================\r\n// í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸\r\n// ============================================\r\n\r\ndescribe('Review API', () => {\r\n  beforeEach(() => {\r\n    resetAllMocks();\r\n  });\r\n\r\n  // ============================================\r\n  // 1. POST /api/reviews - ë¦¬ë·° ì‘ì„± (15ê°œ)\r\n  // ============================================\r\n\r\n  describe('POST /api/reviews', () => {\r\n    describe('ì •ìƒ ë™ì‘', () => {\r\n      it('ë¦¬ë·° ì‘ì„± ì„±ê³µ (201)', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const gym = createMockGym();\r\n        const tag = createMockReviewTag();\r\n        const review = createMockReview({ userId: dbUser.id, gymId: gym.id });\r\n\r\n        mockPrisma.gym.findUnique.mockResolvedValue(gym);\r\n        mockPrisma.reviewTag.findMany.mockResolvedValue([tag]);\r\n        mockPrisma.review.findFirst.mockResolvedValue(null); // ì¤‘ë³µ ì—†ìŒ\r\n        mockPrisma.$transaction.mockResolvedValue({ review });\r\n\r\n        // Act\r\n        const request = requestBodies.reviewCreate({ gymId: gym.id, tagIds: [tag.id] });\r\n\r\n        // Assert\r\n        expect(request.gymId).toBe(gym.id);\r\n        expect(request.tagIds).toContain(tag.id);\r\n      });\r\n\r\n      it('íƒœê·¸ ë§¤í•‘ ì €ì¥ í™•ì¸', async () => {\r\n        // Arrange\r\n        const tags = [createMockReviewTag(), createMockReviewTag()];\r\n        const request = requestBodies.reviewCreate({ tagIds: tags.map(t => t.id) });\r\n\r\n        // Assert\r\n        expect(request.tagIds).toHaveLength(2);\r\n      });\r\n\r\n      it('ì‘ë‹µì— reviewId í¬í•¨', () => {\r\n        // Arrange\r\n        const review = createMockReview();\r\n        const response = {\r\n          success: true,\r\n          data: {\r\n            reviewId: review.id,\r\n            message: 'ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        };\r\n\r\n        // Assert\r\n        expect(response.data.reviewId).toBeDefined();\r\n      });\r\n\r\n      it('comment ì„ íƒì  ì €ì¥', () => {\r\n        // Arrange\r\n        const request = requestBodies.reviewCreate({ comment: null });\r\n\r\n        // Assert\r\n        expect(request.comment).toBeNull();\r\n      });\r\n    });\r\n\r\n    describe('ì¸ì¦ ê²€ì¦', () => {\r\n      it('ë¯¸ì¸ì¦ ì‹œ 401 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        setupUnauthenticated();\r\n\r\n        // Act\r\n        const user = await mockCurrentUser();\r\n\r\n        // Assert\r\n        expect(user).toBeNull();\r\n      });\r\n\r\n      it('DB ì‚¬ìš©ì ì—†ì„ ì‹œ 404 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const clerkUser = createMockClerkUser();\r\n        mockCurrentUser.mockResolvedValue(clerkUser);\r\n        mockPrisma.user.findUnique.mockResolvedValue(null);\r\n\r\n        // Act\r\n        const dbUser = await mockPrisma.user.findUnique({\r\n          where: { clerkId: clerkUser.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(dbUser).toBeNull();\r\n      });\r\n    });\r\n\r\n    describe('ìš”ì²­ ê²€ì¦', () => {\r\n      it('gymId ëˆ„ë½ ì‹œ 400 ì—ëŸ¬', () => {\r\n        // Arrange\r\n        const request = requestBodies.reviewCreate();\r\n        delete (request as any).gymId;\r\n\r\n        // Assert\r\n        expect(request.gymId).toBeUndefined();\r\n      });\r\n\r\n      it('tagIds ìµœì†Œ 1ê°œ í•„ìˆ˜', () => {\r\n        // Arrange\r\n        const request = requestBodies.reviewCreate({ tagIds: [] });\r\n\r\n        // Assert\r\n        expect(request.tagIds).toHaveLength(0);\r\n      });\r\n\r\n      it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” gymId ì‹œ 404 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        mockPrisma.gym.findUnique.mockResolvedValue(null);\r\n\r\n        // Act\r\n        const gym = await mockPrisma.gym.findUnique({ where: { id: 'invalid' } });\r\n\r\n        // Assert\r\n        expect(gym).toBeNull();\r\n      });\r\n\r\n      it('ì¤‘ë³µ ì œì¶œ ì‹œ 400 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const existingReview = createMockReview({ userId: dbUser.id });\r\n        mockPrisma.review.findFirst.mockResolvedValue(existingReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findFirst({\r\n          where: { userId: dbUser.id, gymId: existingReview.gymId },\r\n        });\r\n\r\n        // Assert\r\n        expect(found).not.toBeNull();\r\n      });\r\n\r\n      it('ë¹„í™œì„±í™”ëœ íƒœê·¸ ì‚¬ìš© ì‹œ 400 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const inactiveTag = createMockReviewTag({ isActive: false });\r\n        mockPrisma.reviewTag.findMany.mockResolvedValue([]);\r\n\r\n        // Act (íƒœê·¸ 1ê°œ ìš”ì²­í–ˆì§€ë§Œ í™œì„±í™”ëœ íƒœê·¸ëŠ” 0ê°œ)\r\n        const tags = await mockPrisma.reviewTag.findMany({\r\n          where: { id: { in: [inactiveTag.id] }, isActive: true },\r\n        });\r\n\r\n        // Assert\r\n        expect(tags.length).toBe(0);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 2. GET /api/reviews/[reviewId] - ë¦¬ë·° ì¡°íšŒ (8ê°œ)\r\n  // ============================================\r\n\r\n  describe('GET /api/reviews/[reviewId]', () => {\r\n    describe('ì •ìƒ ë™ì‘', () => {\r\n      it('ë³¸ì¸ ë¦¬ë·° ì¡°íšŒ ì„±ê³µ', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const review = createMockReview({ userId: dbUser.id });\r\n        mockPrisma.review.findUnique.mockResolvedValue(review);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: review.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(found).not.toBeNull();\r\n        expect(found?.userId).toBe(dbUser.id);\r\n      });\r\n\r\n      it('ì‘ë‹µì— tags ì •ë³´ í¬í•¨', () => {\r\n        // Arrange\r\n        const tags = [\r\n          { id: generateUUID(), name: 'ì¹œì ˆí•¨', category: 'service' },\r\n          { id: generateUUID(), name: 'ê¹¨ë—í•¨', category: 'facility' },\r\n        ];\r\n\r\n        // Assert\r\n        tags.forEach(tag => {\r\n          expect(tag.id).toBeDefined();\r\n          expect(tag.name).toBeDefined();\r\n          expect(tag.category).toBeDefined();\r\n        });\r\n      });\r\n\r\n      it('ì‘ë‹µì— gymName í¬í•¨', () => {\r\n        // Arrange\r\n        const review = createMockReview();\r\n        review.gym = { id: generateUUID(), name: 'í…ŒìŠ¤íŠ¸ í—¬ìŠ¤ì¥' };\r\n\r\n        // Assert\r\n        expect(review.gym.name).toBeDefined();\r\n      });\r\n    });\r\n\r\n    describe('ê¶Œí•œ ê²€ì¦', () => {\r\n      it('íƒ€ì¸ ë¦¬ë·° ì¡°íšŒ ì‹œ 403 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const otherUserId = generateUUID();\r\n        const otherReview = createMockReview({ userId: otherUserId });\r\n        mockPrisma.review.findUnique.mockResolvedValue(otherReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: otherReview.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(found?.userId).not.toBe(dbUser.id);\r\n      });\r\n\r\n      it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ë·° ì‹œ 404 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        mockPrisma.review.findUnique.mockResolvedValue(null);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: 'nonexistent' },\r\n        });\r\n\r\n        // Assert\r\n        expect(found).toBeNull();\r\n      });\r\n\r\n      it('ì‚­ì œëœ ë¦¬ë·° ì¡°íšŒ ì²˜ë¦¬', async () => {\r\n        // Arrange\r\n        const deletedReview = createMockReview({ isDeleted: true });\r\n        mockPrisma.review.findUnique.mockResolvedValue(deletedReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: deletedReview.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(found?.isDeleted).toBe(true);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 3. PUT /api/reviews/[reviewId] - ë¦¬ë·° ìˆ˜ì • (12ê°œ)\r\n  // ============================================\r\n\r\n  describe('PUT /api/reviews/[reviewId]', () => {\r\n    describe('ì •ìƒ ë™ì‘', () => {\r\n      it('24ì‹œê°„ ì´ë‚´ ìˆ˜ì • ì„±ê³µ', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const recentReview = createMockReview({\r\n          userId: dbUser.id,\r\n          createdAt: hoursAgo(12), // 12ì‹œê°„ ì „\r\n        });\r\n        mockPrisma.review.findUnique.mockResolvedValue(recentReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: recentReview.id },\r\n        });\r\n        const hoursSince = (Date.now() - found!.createdAt.getTime()) / (1000 * 60 * 60);\r\n\r\n        // Assert\r\n        expect(hoursSince).toBeLessThanOrEqual(24);\r\n      });\r\n\r\n      it('íƒœê·¸ ì—…ë°ì´íŠ¸ í™•ì¸', async () => {\r\n        // Arrange\r\n        const newTags = [createMockReviewTag(), createMockReviewTag()];\r\n        const request = requestBodies.reviewUpdate({ tagIds: newTags.map(t => t.id) });\r\n\r\n        // Assert\r\n        expect(request.tagIds).toHaveLength(2);\r\n      });\r\n\r\n      it('comment ìˆ˜ì • í™•ì¸', () => {\r\n        // Arrange\r\n        const request = requestBodies.reviewUpdate({ comment: 'ìˆ˜ì •ëœ ì½”ë©˜íŠ¸' });\r\n\r\n        // Assert\r\n        expect(request.comment).toBe('ìˆ˜ì •ëœ ì½”ë©˜íŠ¸');\r\n      });\r\n\r\n      it('ê¸°ì¡´ íƒœê·¸ ì‚­ì œ í›„ ìƒˆ íƒœê·¸ ì—°ê²°', async () => {\r\n        // Arrange\r\n        mockPrisma.reviewTagMapping.deleteMany.mockResolvedValue({ count: 2 });\r\n        mockPrisma.reviewTagMapping.create.mockResolvedValue({});\r\n\r\n        // Act\r\n        await mockPrisma.reviewTagMapping.deleteMany({ where: { reviewId: 'test' } });\r\n\r\n        // Assert\r\n        expect(mockPrisma.reviewTagMapping.deleteMany).toHaveBeenCalled();\r\n      });\r\n    });\r\n\r\n    describe('ì‹œê°„ ì œí•œ', () => {\r\n      it('24ì‹œê°„ ì´í›„ ìˆ˜ì • ì‹œ 400 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const oldReview = createMockReview({\r\n          userId: dbUser.id,\r\n          createdAt: hoursAgo(25), // 25ì‹œê°„ ì „\r\n        });\r\n        mockPrisma.review.findUnique.mockResolvedValue(oldReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: oldReview.id },\r\n        });\r\n        const hoursSince = (Date.now() - found!.createdAt.getTime()) / (1000 * 60 * 60);\r\n\r\n        // Assert\r\n        expect(hoursSince).toBeGreaterThan(24);\r\n      });\r\n\r\n      it('ì •í™•íˆ 24ì‹œê°„ ê²½ê³„ í…ŒìŠ¤íŠ¸', async () => {\r\n        // Arrange\r\n        const borderlineReview = createMockReview({\r\n          createdAt: hoursAgo(24),\r\n        });\r\n\r\n        // Act\r\n        const hoursSince = (Date.now() - borderlineReview.createdAt.getTime()) / (1000 * 60 * 60);\r\n\r\n        // Assert\r\n        expect(Math.round(hoursSince)).toBe(24);\r\n      });\r\n    });\r\n\r\n    describe('ê¶Œí•œ ê²€ì¦', () => {\r\n      it('íƒ€ì¸ ë¦¬ë·° ìˆ˜ì • ì‹œ 403 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const otherReview = createMockReview({ userId: generateUUID() });\r\n        mockPrisma.review.findUnique.mockResolvedValue(otherReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: otherReview.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(found?.userId).not.toBe(dbUser.id);\r\n      });\r\n\r\n      it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ë·° ìˆ˜ì • ì‹œ 404 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        mockPrisma.review.findUnique.mockResolvedValue(null);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: 'nonexistent' },\r\n        });\r\n\r\n        // Assert\r\n        expect(found).toBeNull();\r\n      });\r\n    });\r\n\r\n    describe('ìš”ì²­ ê²€ì¦', () => {\r\n      it('tagIds ìµœì†Œ 1ê°œ í•„ìˆ˜', () => {\r\n        // Arrange\r\n        const request = requestBodies.reviewUpdate({ tagIds: [] });\r\n\r\n        // Assert\r\n        expect(request.tagIds).toHaveLength(0);\r\n      });\r\n\r\n      it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” tagId ì‹œ 400 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        mockPrisma.reviewTag.findMany.mockResolvedValue([]);\r\n\r\n        // Act\r\n        const tags = await mockPrisma.reviewTag.findMany({\r\n          where: { id: { in: ['invalid'] } },\r\n        });\r\n\r\n        // Assert\r\n        expect(tags).toHaveLength(0);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // 4. DELETE /api/reviews/[reviewId] - ë¦¬ë·° ì‚­ì œ (10ê°œ)\r\n  // ============================================\r\n\r\n  describe('DELETE /api/reviews/[reviewId]', () => {\r\n    describe('ì •ìƒ ë™ì‘', () => {\r\n      it('Soft delete ì„±ê³µ', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const review = createMockReview({ userId: dbUser.id });\r\n        mockPrisma.review.findUnique.mockResolvedValue(review);\r\n        mockPrisma.review.update.mockResolvedValue({ ...review, isDeleted: true });\r\n\r\n        // Act\r\n        const updated = await mockPrisma.review.update({\r\n          where: { id: review.id },\r\n          data: { isDeleted: true },\r\n        });\r\n\r\n        // Assert\r\n        expect(updated.isDeleted).toBe(true);\r\n      });\r\n\r\n      it('ì‚­ì œ í›„ isDeleted=true í™•ì¸', async () => {\r\n        // Arrange\r\n        const review = createMockReview({ isDeleted: true });\r\n\r\n        // Assert\r\n        expect(review.isDeleted).toBe(true);\r\n      });\r\n\r\n      it('updatedAt ê°±ì‹  í™•ì¸', async () => {\r\n        // Arrange\r\n        const now = new Date();\r\n        const review = createMockReview({ updatedAt: now });\r\n        mockPrisma.review.update.mockResolvedValue({ ...review, updatedAt: now });\r\n\r\n        // Act\r\n        const updated = await mockPrisma.review.update({\r\n          where: { id: review.id },\r\n          data: { isDeleted: true, updatedAt: now },\r\n        });\r\n\r\n        // Assert\r\n        expect(updated.updatedAt).toBeDefined();\r\n      });\r\n    });\r\n\r\n    describe('ê¶Œí•œ ê²€ì¦', () => {\r\n      it('íƒ€ì¸ ë¦¬ë·° ì‚­ì œ ì‹œ 403 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        const { dbUser } = setupAuthenticatedUser();\r\n        const otherReview = createMockReview({ userId: generateUUID() });\r\n        mockPrisma.review.findUnique.mockResolvedValue(otherReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: otherReview.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(found?.userId).not.toBe(dbUser.id);\r\n      });\r\n\r\n      it('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¦¬ë·° ì‚­ì œ ì‹œ 404 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        mockPrisma.review.findUnique.mockResolvedValue(null);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: 'nonexistent' },\r\n        });\r\n\r\n        // Assert\r\n        expect(found).toBeNull();\r\n      });\r\n\r\n      it('ë¯¸ì¸ì¦ ì‹œ 401 ì—ëŸ¬', async () => {\r\n        // Arrange\r\n        setupUnauthenticated();\r\n\r\n        // Act\r\n        const user = await mockCurrentUser();\r\n\r\n        // Assert\r\n        expect(user).toBeNull();\r\n      });\r\n    });\r\n\r\n    describe('ì‘ë‹µ í˜•ì‹', () => {\r\n      it('ì„±ê³µ ì‘ë‹µ ë©”ì‹œì§€ í™•ì¸', () => {\r\n        // Arrange\r\n        const response = {\r\n          success: true,\r\n          data: {\r\n            message: 'ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n          },\r\n        };\r\n\r\n        // Assert\r\n        expect(response.success).toBe(true);\r\n        expect(response.data.message).toContain('ì‚­ì œ');\r\n      });\r\n\r\n      it('HTTP ìƒíƒœ ì½”ë“œ 200', () => {\r\n        // Assert\r\n        expect(200).toBe(200);\r\n      });\r\n\r\n      it('ì´ë¯¸ ì‚­ì œëœ ë¦¬ë·° ì²˜ë¦¬', async () => {\r\n        // Arrange\r\n        const deletedReview = createMockReview({ isDeleted: true });\r\n        mockPrisma.review.findUnique.mockResolvedValue(deletedReview);\r\n\r\n        // Act\r\n        const found = await mockPrisma.review.findUnique({\r\n          where: { id: deletedReview.id },\r\n        });\r\n\r\n        // Assert\r\n        expect(found?.isDeleted).toBe(true);\r\n      });\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\__tests__\\test-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\body-parts\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":10,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from \"next/server\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { prisma } from \"@/lib/prisma/client\";\r\nimport { z } from \"zod\";\r\n\r\n/**\r\n * GET /api/admin/body-parts\r\n * ëª¨ë“  ë¶€ìœ„ ì¡°íšŒ\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const bodyParts = await prisma.bodyPart.findMany({\r\n      orderBy: { displayOrder: \"asc\" },\r\n    });\r\n\r\n    return NextResponse.json({ bodyParts });\r\n  } catch (error) {\r\n    console.error(\"Error fetching body parts:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\n// Schema\r\nconst bodyPartSchema = z.object({\r\n  name: z.string().min(1),\r\n  displayOrder: z.number().int(),\r\n  isActive: z.boolean().optional(),\r\n});\r\n\r\n/**\r\n * POST /api/admin/body-parts\r\n * ë¶€ìœ„ ì¶”ê°€\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const body = await request.json();\r\n    const validated = bodyPartSchema.parse(body);\r\n\r\n    const newBodyPart = await prisma.bodyPart.create({\r\n      data: {\r\n        name: validated.name,\r\n        displayOrder: validated.displayOrder,\r\n        isActive: validated.isActive ?? true,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json({ success: true, bodyPart: newBodyPart });\r\n  } catch (error) {\r\n    console.error(\"Error creating body part:\", error);\r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        { error: \"Validation error\", details: error.issues },\r\n        { status: 400 },\r\n      );\r\n    }\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * PUT /api/admin/body-parts\r\n * ë¶€ìœ„ ìˆ˜ì • (ID via query param)\r\n */\r\nexport async function PUT(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const id = searchParams.get(\"id\");\r\n    if (!id)\r\n      return NextResponse.json({ error: \"ID required\" }, { status: 400 });\r\n\r\n    const body = await request.json();\r\n    // allow partial updates\r\n    const validated = bodyPartSchema.partial().parse(body);\r\n\r\n    const updated = await prisma.bodyPart.update({\r\n      where: { id },\r\n      data: validated,\r\n    });\r\n\r\n    return NextResponse.json({ success: true, bodyPart: updated });\r\n  } catch (error) {\r\n    console.error(\"Error updating body part:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * DELETE /api/admin/body-parts\r\n * ë¶€ìœ„ ì‚­ì œ (ID via query param)\r\n */\r\nexport async function DELETE(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const id = searchParams.get(\"id\");\r\n    if (!id)\r\n      return NextResponse.json({ error: \"ID required\" }, { status: 400 });\r\n\r\n    // Check relations?\r\n    // onDelete cascade might remove all mappings!\r\n    // Safe deleting? or just let it cascade?\r\n    // Prisma schema says:\r\n    // bodyPartExerciseMappings -> onDelete: Cascade.\r\n    // exerciseTemplates -> onDelete: Restrict? No relation attribute means restrict by default if referenced.\r\n    // ExerciseTemplate has `bodyPartId`.\r\n    // Let's check schema.\r\n\r\n    // In schema:\r\n    // model ExerciseTemplate { ... bodyPart BodyPart @relation(fields: [bodyPartId], references: [id]) ... }\r\n    // No onDelete specified -> Default is usually Restrict or NoAction in generic SQL, but Prisma differentiates.\r\n    // Actually in PostgreSQL default is NO ACTION (fail).\r\n    // So if templates use this body part, delete will fail. Which is GOOD.\r\n\r\n    await prisma.bodyPart.delete({\r\n      where: { id },\r\n    });\r\n\r\n    return NextResponse.json({ success: true });\r\n  } catch (error) {\r\n    console.error(\"Error deleting body part:\", error);\r\n    // Prisma err P2003 (Foreign key constraint failed)\r\n    return NextResponse.json(\r\n      { error: \"Cannot delete body part that is in use.\" },\r\n      { status: 400 },\r\n    );\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\equipment\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":10,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from \"next/server\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { prisma } from \"@/lib/prisma/client\";\r\nimport { z } from \"zod\";\r\n\r\n/**\r\n * GET /api/admin/equipment\r\n * ëª¨ë“  ê¸°êµ¬ ì¡°íšŒ\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const equipment = await prisma.equipmentType.findMany({\r\n      orderBy: { displayOrder: \"asc\" },\r\n    });\r\n\r\n    return NextResponse.json({ equipment });\r\n  } catch (error) {\r\n    console.error(\"Error fetching equipment:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\n// Schema\r\nconst equipmentSchema = z.object({\r\n  name: z.string().min(1),\r\n  displayOrder: z.number().int(),\r\n  isActive: z.boolean().optional(),\r\n});\r\n\r\n/**\r\n * POST /api/admin/equipment\r\n * ê¸°êµ¬ ì¶”ê°€\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const body = await request.json();\r\n    const validated = equipmentSchema.parse(body);\r\n\r\n    const newEquipment = await prisma.equipmentType.create({\r\n      data: {\r\n        name: validated.name,\r\n        displayOrder: validated.displayOrder,\r\n        isActive: validated.isActive ?? true,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json({ success: true, equipment: newEquipment });\r\n  } catch (error) {\r\n    console.error(\"Error creating equipment:\", error);\r\n    if (error instanceof z.ZodError) {\r\n      return NextResponse.json(\r\n        { error: \"Validation error\", details: error.issues },\r\n        { status: 400 },\r\n      );\r\n    }\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * PUT /api/admin/equipment\r\n * ê¸°êµ¬ ìˆ˜ì • (ID via query param)\r\n */\r\nexport async function PUT(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const id = searchParams.get(\"id\");\r\n    if (!id)\r\n      return NextResponse.json({ error: \"ID required\" }, { status: 400 });\r\n\r\n    const body = await request.json();\r\n    const validated = equipmentSchema.partial().parse(body);\r\n\r\n    const updated = await prisma.equipmentType.update({\r\n      where: { id },\r\n      data: validated,\r\n    });\r\n\r\n    return NextResponse.json({ success: true, equipment: updated });\r\n  } catch (error) {\r\n    console.error(\"Error updating equipment:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * DELETE /api/admin/equipment\r\n * ê¸°êµ¬ ì‚­ì œ (ID via query param)\r\n */\r\nexport async function DELETE(request: NextRequest) {\r\n  try {\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    const { searchParams } = new URL(request.url);\r\n    const id = searchParams.get(\"id\");\r\n    if (!id)\r\n      return NextResponse.json({ error: \"ID required\" }, { status: 400 });\r\n\r\n    // Check usage\r\n    // exerciseEquipmentMappings -> onDelete: Cascade\r\n    // But safe to delete if we warn user.\r\n\r\n    await prisma.equipmentType.delete({\r\n      where: { id },\r\n    });\r\n\r\n    return NextResponse.json({ success: true });\r\n  } catch (error) {\r\n    console.error(\"Error deleting equipment:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Cannot delete equipment that is in use.\" },\r\n      { status: 400 },\r\n    );\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\gyms\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\health\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\mappings\\body-parts\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\mappings\\equipment\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\reports\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\reports\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\reviews\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\reviews\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\stats\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\templates\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\templates\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\admin\\upload-image\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'z' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":69,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":69,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from \"next/server\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { createClient } from \"@supabase/supabase-js\";\r\nimport { z } from \"zod\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\n/**\r\n * POST /api/admin/upload-image\r\n * ì´ë¯¸ì§€ ì—…ë¡œë“œ API\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // 1. ê¶Œí•œ í™•ì¸\r\n    const { sessionClaims } = await auth();\r\n    const role = (sessionClaims?.publicMetadata as { role?: string })?.role;\r\n\r\n    if (role !== \"admin\") {\r\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 403 });\r\n    }\r\n\r\n    // 2. FormData íŒŒì‹±\r\n    const formData = await request.formData();\r\n    const file = formData.get(\"file\") as File;\r\n\r\n    if (!file) {\r\n      return NextResponse.json({ error: \"No file provided\" }, { status: 400 });\r\n    }\r\n\r\n    // 3. íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬\r\n    if (!file.type.startsWith(\"image/\")) {\r\n      return NextResponse.json(\r\n        { error: \"Invalid file type. Only images are allowed.\" },\r\n        { status: 400 },\r\n      );\r\n    }\r\n\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      // 5MB limit\r\n      return NextResponse.json(\r\n        { error: \"File size too large. Max 5MB.\" },\r\n        { status: 400 },\r\n      );\r\n    }\r\n\r\n    // 4. Supabase Admin í´ë¼ì´ì–¸íŠ¸ ìƒì„±\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\r\n\r\n    if (!supabaseUrl || !supabaseServiceKey) {\r\n      console.error(\"Missing Supabase credentials\");\r\n      return NextResponse.json(\r\n        { error: \"Server configuration error\" },\r\n        { status: 500 },\r\n      );\r\n    }\r\n\r\n    const supabase = createClient(supabaseUrl, supabaseServiceKey);\r\n\r\n    // 5. íŒŒì¼ ì—…ë¡œë“œ\r\n    const fileExt = file.name.split(\".\").pop();\r\n    const fileName = `${uuidv4()}.${fileExt}`;\r\n    const filePath = `exercises/${fileName}`;\r\n    const bucketName = process.env.NEXT_PUBLIC_STORAGE_BUCKET || \"images\"; // ê¸°ë³¸ê°’ set\r\n\r\n    // File ê°ì²´ë¥¼ ArrayBufferë¡œ ë³€í™˜\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const buffer = Buffer.from(arrayBuffer);\r\n\r\n    const { data, error: uploadError } = await supabase.storage\r\n      .from(bucketName)\r\n      .upload(filePath, buffer, {\r\n        contentType: file.type,\r\n        upsert: false,\r\n      });\r\n\r\n    if (uploadError) {\r\n      console.error(\"Supabase upload error:\", uploadError);\r\n      return NextResponse.json(\r\n        { error: \"Upload failed: \" + uploadError.message },\r\n        { status: 500 },\r\n      );\r\n    }\r\n\r\n    // 6. Public URL ìƒì„±\r\n    const {\r\n      data: { publicUrl },\r\n    } = supabase.storage.from(bucketName).getPublicUrl(filePath);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      url: publicUrl,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error uploading image:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Internal Server Error\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\body-parts\\[bodyPartId]\\exercises\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\body-parts\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\check-env\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\courses\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\courses\\complete\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\courses\\recommended\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\courses\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'request' is defined but never used.","line":19,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file route.ts\r\n * @description ì½”ìŠ¤ ëª©ë¡ ì¡°íšŒ API ì—”ë“œí¬ì¸íŠ¸\r\n * \r\n * GET /api/courses\r\n * \r\n * ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì €ì¥ëœ ì½”ìŠ¤ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.\r\n */\r\n\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { currentUser } from \"@clerk/nextjs/server\";\r\nimport { prisma } from \"@/lib/prisma/client\";\r\n\r\n/**\r\n * GET ìš”ì²­ ì²˜ë¦¬\r\n * \r\n * ì‚¬ìš©ìì˜ ì €ì¥ëœ ì½”ìŠ¤ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.\r\n */\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // 1. ì‚¬ìš©ì ì¸ì¦ í™•ì¸\r\n    const user = await currentUser();\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.\",\r\n        },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    // 2. Clerk ì‚¬ìš©ì IDë¡œ DB ì‚¬ìš©ì ì¡°íšŒ\r\n    const dbUser = await prisma.user.findUnique({\r\n      where: { clerkId: user.id },\r\n    });\r\n\r\n    if (!dbUser) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\",\r\n        },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    // 3. ì‚¬ìš©ìì˜ ì½”ìŠ¤ ëª©ë¡ ì¡°íšŒ\r\n    const courses = await prisma.course.findMany({\r\n      where: {\r\n        userId: dbUser.id,\r\n      },\r\n      include: {\r\n        courseExercises: {\r\n          include: {\r\n            exerciseTemplate: {\r\n              select: {\r\n                id: true,\r\n                name: true,\r\n                description: true,\r\n                imageUrl: true,\r\n                gifUrl: true,\r\n                videoUrl: true,\r\n              },\r\n            },\r\n          },\r\n          orderBy: [\r\n            { section: 'asc' },\r\n            { orderInSection: 'asc' },\r\n          ],\r\n        },\r\n      },\r\n      orderBy: {\r\n        createdAt: 'desc',\r\n      },\r\n    });\r\n\r\n    // 4. ì‘ë‹µ ë°ì´í„° ë³€í™˜\r\n    const formattedCourses = courses.map((course) => ({\r\n      id: course.id,\r\n      totalDurationMinutes: course.totalDurationMinutes,\r\n      painLevel: course.painLevel,\r\n      experienceLevel: course.experienceLevel,\r\n      bodyParts: course.bodyParts,\r\n      equipmentAvailable: course.equipmentAvailable,\r\n      courseType: course.courseType,\r\n      createdAt: course.createdAt.toISOString(),\r\n      exercises: course.courseExercises.map((ce) => ({\r\n        id: ce.id,\r\n        section: ce.section,\r\n        orderInSection: ce.orderInSection,\r\n        durationMinutes: ce.durationMinutes,\r\n        reps: ce.reps,\r\n        sets: ce.sets,\r\n        restSeconds: ce.restSeconds,\r\n        notes: ce.notes,\r\n        exercise: {\r\n          id: ce.exerciseTemplate.id,\r\n          name: ce.exerciseTemplate.name,\r\n          description: ce.exerciseTemplate.description,\r\n          imageUrl: ce.exerciseTemplate.imageUrl,\r\n          gifUrl: ce.exerciseTemplate.gifUrl,\r\n          videoUrl: ce.exerciseTemplate.videoUrl,\r\n        },\r\n      })),\r\n    }));\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: {\r\n        courses: formattedCourses,\r\n        totalCount: formattedCourses.length,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Get courses error:\", error);\r\n\r\n    const errorMessage =\r\n      error instanceof Error\r\n        ? error.message\r\n        : \"ì½”ìŠ¤ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: errorMessage,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\courses\\save\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":77,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":77,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file route.ts\r\n * @description ì½”ìŠ¤ ì €ì¥ API ì—”ë“œí¬ì¸íŠ¸\r\n * \r\n * POST /api/courses/save\r\n * \r\n * ìƒì„±ëœ ì¬í™œ ì½”ìŠ¤ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * ìš”ì²­ ë³¸ë¬¸:\r\n * {\r\n *   totalDurationMinutes: 60 | 90 | 120,\r\n *   painLevel: number,\r\n *   experienceLevel?: string,\r\n *   bodyParts: string[],\r\n *   equipmentAvailable: string[],\r\n *   exercises: MergedExercise[]\r\n * }\r\n * \r\n * @dependencies\r\n * - @clerk/nextjs/server: currentUser\r\n * - @/lib/prisma/client: Prisma í´ë¼ì´ì–¸íŠ¸\r\n * - @/types/body-part-merge: MergedExercise íƒ€ì…\r\n */\r\n\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { currentUser } from \"@clerk/nextjs/server\";\r\nimport { prisma } from \"@/lib/prisma/client\";\r\nimport type { MergedExercise } from \"@/types/body-part-merge\";\r\n\r\ninterface SaveCourseRequest {\r\n  totalDurationMinutes: 60 | 90 | 120;\r\n  painLevel: number;\r\n  experienceLevel?: string;\r\n  bodyParts: string[];\r\n  equipmentAvailable: string[];\r\n  exercises: MergedExercise[];\r\n}\r\n\r\n/**\r\n * POST ìš”ì²­ ì²˜ë¦¬\r\n * \r\n * ì½”ìŠ¤ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•©ë‹ˆë‹¤.\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // 1. ì‚¬ìš©ì ì¸ì¦ í™•ì¸\r\n    const user = await currentUser();\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.\",\r\n        },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    // 2. Clerk ì‚¬ìš©ì IDë¡œ DB ì‚¬ìš©ì ì¡°íšŒ\r\n    const dbUser = await prisma.user.findUnique({\r\n      where: { clerkId: user.id },\r\n    });\r\n\r\n    if (!dbUser) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\",\r\n        },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    // 3. ìš”ì²­ ë³¸ë¬¸ íŒŒì‹±\r\n    let body: unknown;\r\n    try {\r\n      body = await request.json();\r\n    } catch (error) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ìš”ì²­ ë³¸ë¬¸ì´ ìœ íš¨í•œ JSON í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.\",\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const saveRequest = body as SaveCourseRequest;\r\n\r\n    // 4. ìš”ì²­ ë°ì´í„° ê²€ì¦\r\n    if (!saveRequest.totalDurationMinutes || !saveRequest.exercises || saveRequest.exercises.length === 0) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"í•„ìˆ˜ ë°ì´í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.\",\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // totalDurationMinutesê°€ 60, 90, 120 ì¤‘ í•˜ë‚˜ì¸ì§€ í™•ì¸\r\n    if (![60, 90, 120].includes(saveRequest.totalDurationMinutes)) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ìš´ë™ ì‹œê°„ì€ 60, 90, 120ë¶„ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•©ë‹ˆë‹¤.\",\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // 5. íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì½”ìŠ¤ ë° ìš´ë™ ì €ì¥\r\n    const result = await prisma.$transaction(async (tx) => {\r\n      // ì½”ìŠ¤ ìƒì„±\r\n      const course = await tx.course.create({\r\n        data: {\r\n          userId: dbUser.id,\r\n          totalDurationMinutes: saveRequest.totalDurationMinutes,\r\n          painLevel: saveRequest.painLevel,\r\n          experienceLevel: saveRequest.experienceLevel || null,\r\n          bodyParts: saveRequest.bodyParts,\r\n          equipmentAvailable: saveRequest.equipmentAvailable,\r\n          courseType: \"warmup_main_cooldown\",\r\n          isTemplate: false,\r\n        },\r\n      });\r\n\r\n      // ìš´ë™ ëª©ë¡ ìƒì„±\r\n      const courseExercises = await Promise.all(\r\n        saveRequest.exercises.map((exercise) =>\r\n          tx.courseExercise.create({\r\n            data: {\r\n              courseId: course.id,\r\n              exerciseTemplateId: exercise.exerciseTemplateId,\r\n              section: exercise.section,\r\n              orderInSection: exercise.orderInSection,\r\n              durationMinutes: exercise.durationMinutes || null,\r\n              reps: exercise.reps || null,\r\n              sets: exercise.sets || null,\r\n              restSeconds: exercise.restSeconds || null,\r\n              notes: exercise.instructions || exercise.description || null,\r\n            },\r\n          })\r\n        )\r\n      );\r\n\r\n      return {\r\n        course,\r\n        courseExercises,\r\n      };\r\n    });\r\n\r\n    // 6. ì„±ê³µ ì‘ë‹µ ë°˜í™˜\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        data: {\r\n          courseId: result.course.id,\r\n          message: \"ì½”ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\",\r\n        },\r\n      },\r\n      { status: 200 }\r\n    );\r\n  } catch (error) {\r\n    // ì—ëŸ¬ ì²˜ë¦¬\r\n    console.error(\"Course save error:\", error);\r\n\r\n    const errorMessage =\r\n      error instanceof Error\r\n        ? error.message\r\n        : \"ì½”ìŠ¤ë¥¼ ì €ì¥í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: errorMessage,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\env-check\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\events\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\exercises\\[id]\\media\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\gyms\\[id]\\favorite\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\gyms\\[id]\\report\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\gyms\\[id]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\gyms\\search\\route.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1944,1947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1944,1947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\health\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\naver-search\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":28,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\";\r\n\r\nexport async function GET() {\r\n  if (!process.env.NAVER_CLIENT_ID || !process.env.NAVER_CLIENT_SECRET) {\r\n    return NextResponse.json(\r\n      { error: \"NAVER ê²€ìƒ‰ API í™˜ê²½ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n\r\n  try {\r\n    const res = await fetch(\r\n      \"https://openapi.naver.com/v1/search/local.json?query=í—¬ìŠ¤ì¥&display=5\",\r\n      {\r\n        headers: {\r\n          \"X-Naver-Client-Id\": process.env.NAVER_CLIENT_ID,\r\n          \"X-Naver-Client-Secret\": process.env.NAVER_CLIENT_SECRET,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (!res.ok) {\r\n      throw new Error(\"ë„¤ì´ë²„ API ì‘ë‹µ ì˜¤ë¥˜\");\r\n    }\r\n\r\n    const data = await res.json();\r\n    return NextResponse.json(data);\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { error: \"ê²€ìƒ‰ API í˜¸ì¶œ ì‹¤íŒ¨\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\pain-check-data\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\rehab\\generate\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":61,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file route.ts\r\n * @description ì¬í™œ ì½”ìŠ¤ ìƒì„± API ì—”ë“œí¬ì¸íŠ¸\r\n * \r\n * POST /api/rehab/generate\r\n * \r\n * ì‚¬ìš©ìê°€ ì„ íƒí•œ ë¶€ìœ„, í†µì¦ ì •ë„, ê¸°êµ¬, ê²½í—˜ ìˆ˜ì¤€, ìš´ë™ ì‹œê°„ì„ ê¸°ë°˜ìœ¼ë¡œ\r\n * ë§ì¶¤í˜• ì¬í™œ ì½”ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\r\n * \r\n * P2-F1-01: ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ê²½ìš° UserPainProfile/UserProgressLogë¥¼ ìë™ ë°˜ì˜í•©ë‹ˆë‹¤.\r\n * \r\n * ìš”ì²­ ë³¸ë¬¸:\r\n * {\r\n *   bodyParts: [\r\n *     { bodyPartId: \"uuid\", bodyPartName: \"í—ˆë¦¬\", painLevel: 5 }\r\n *   ],\r\n *   painLevel: 5,\r\n *   equipmentAvailable: [\"ë§¤íŠ¸\", \"ë¤ë²¨\"],\r\n *   experienceLevel?: \"beginner\",\r\n *   totalDurationMinutes?: 60 | 90 | 120\r\n * }\r\n * \r\n * @dependencies\r\n * - lib/algorithms/merge-body-parts: ì½”ìŠ¤ ìƒì„± ë¡œì§\r\n * - lib/validations/merge-request.schema: ìš”ì²­ ê²€ì¦ ìŠ¤í‚¤ë§ˆ\r\n * - lib/utils/get-user-personalization: ê°œì¸í™” ë°ì´í„° ì¡°íšŒ\r\n * - types/body-part-merge: íƒ€ì… ì •ì˜\r\n */\r\n\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { prisma } from \"@/lib/prisma/client\";\r\nimport { mergeRequestSchema } from \"@/lib/validations/merge-request.schema\";\r\nimport { mergeBodyParts } from \"@/lib/algorithms/merge-body-parts\";\r\nimport { getUserPersonalization, mergePersonalizationWithRequest } from \"@/lib/utils/get-user-personalization\";\r\nimport type { MergeRequest, MergeResult } from \"@/types/body-part-merge\";\r\n\r\n/**\r\n * POST ìš”ì²­ ì²˜ë¦¬\r\n * \r\n * ì¬í™œ ì½”ìŠ¤ ìƒì„± ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\r\n */\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // 0. ë¡œê·¸ì¸ ì‚¬ìš©ì í™•ì¸ (ì„ íƒì )\r\n    const { userId: clerkId } = await auth();\r\n    let internalUserId: string | null = null;\r\n    \r\n    if (clerkId) {\r\n      const user = await prisma.user.findUnique({\r\n        where: { clerkId },\r\n        select: { id: true }\r\n      });\r\n      internalUserId = user?.id ?? null;\r\n    }\r\n\r\n    // 1. ìš”ì²­ ë³¸ë¬¸ íŒŒì‹±\r\n    let body: unknown;\r\n    try {\r\n      body = await request.json();\r\n    } catch (error) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ìš”ì²­ ë³¸ë¬¸ì´ ìœ íš¨í•œ JSON í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.\",\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // 2. Zod ìŠ¤í‚¤ë§ˆë¡œ ê²€ì¦\r\n    const validationResult = mergeRequestSchema.safeParse(body);\r\n\r\n    if (!validationResult.success) {\r\n      const errors = validationResult.error.issues.map((err) => ({\r\n        field: err.path.join(\".\"),\r\n        message: err.message,\r\n      }));\r\n\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ìš”ì²­ íŒŒë¼ë¯¸í„° ê²€ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\",\r\n          details: errors,\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    let validatedRequest: MergeRequest = validationResult.data;\r\n    \r\n    // 3. ê°œì¸í™” ë°ì´í„° ë°˜ì˜ (ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ)\r\n    let personalizationApplied = false;\r\n    let appliedProfiles: string[] = [];\r\n    let intensityAdjustment = 0;\r\n    let progressTrendInfo: string | null = null;\r\n    let fatigueInfo: string | null = null;\r\n\r\n    if (internalUserId) {\r\n      const personalization = await getUserPersonalization(internalUserId);\r\n      \r\n      if (personalization) {\r\n        // ê°œì¸í™” ë°ì´í„° ë³‘í•©\r\n        const merged = mergePersonalizationWithRequest(\r\n          validatedRequest.bodyParts,\r\n          personalization\r\n        );\r\n        \r\n        validatedRequest = {\r\n          ...validatedRequest,\r\n          bodyParts: merged.mergedBodyParts\r\n        };\r\n        \r\n        appliedProfiles = merged.appliedProfiles;\r\n        intensityAdjustment = merged.intensityAdjustment;\r\n        personalizationApplied = appliedProfiles.length > 0 || personalization.progressTrend !== null;\r\n        \r\n        // ì§„í–‰ ì¶”ì„¸ ì •ë³´\r\n        if (personalization.progressTrend) {\r\n          const trend = personalization.progressTrend;\r\n          if (trend.trend === 'improving') {\r\n            progressTrendInfo = `í†µì¦ì´ ê°œì„ ë˜ê³  ìˆìŠµë‹ˆë‹¤ (${trend.avgOlderPain} â†’ ${trend.avgRecentPain}). ê°•ë„ë¥¼ ë†’ì—¬ë„ ì¢‹ìŠµë‹ˆë‹¤.`;\r\n          } else if (trend.trend === 'worsening') {\r\n            progressTrendInfo = `í†µì¦ì´ ì•…í™”ë˜ê³  ìˆìŠµë‹ˆë‹¤ (${trend.avgOlderPain} â†’ ${trend.avgRecentPain}). ê°•ë„ë¥¼ ë‚®ì¶¥ë‹ˆë‹¤.`;\r\n          }\r\n        }\r\n      }\r\n\r\n      // P3-W2-03: ì›¨ì–´ëŸ¬ë¸” ë°ì´í„° ê¸°ë°˜ í”¼ë¡œë„ ì²´í¬\r\n      try {\r\n        const sevenDaysAgo = new Date();\r\n        sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n        \r\n        const stepsData = await prisma.wearableData.findMany({\r\n          where: {\r\n            userId: internalUserId,\r\n            dataType: 'steps',\r\n            recordedAt: { gte: sevenDaysAgo }\r\n          },\r\n          select: { value: true, recordedAt: true },\r\n          orderBy: { recordedAt: 'desc' }\r\n        });\r\n\r\n        if (stepsData.length >= 3) {\r\n          // í”¼ë¡œë„ ê³„ì‚°ì„ ìœ„í•œ ë™ì  import (ì„ íƒì )\r\n          const { calculateFatigue, summarizeStepsForFatigue } = await import('@/lib/utils/calculate-fatigue');\r\n          const recentSteps = summarizeStepsForFatigue(stepsData);\r\n          const fatigue = calculateFatigue({ recentSteps });\r\n\r\n          if (fatigue.level === 'high') {\r\n            intensityAdjustment -= 1;\r\n            fatigueInfo = `í”¼ë¡œë„ê°€ ë†’ìŠµë‹ˆë‹¤ (${fatigue.score}ì ). ê°•ë„ë¥¼ ë‚®ì¶¥ë‹ˆë‹¤.`;\r\n          } else if (fatigue.level === 'moderate') {\r\n            fatigueInfo = `ì ë‹¹í•œ í”¼ë¡œë„ì…ë‹ˆë‹¤ (${fatigue.score}ì ).`;\r\n          }\r\n        }\r\n      } catch {\r\n        // ì›¨ì–´ëŸ¬ë¸” ë°ì´í„° ì—†ê±°ë‚˜ ì˜¤ë¥˜ ì‹œ ë¬´ì‹œ\r\n      }\r\n\r\n      // P3-AI-07: AI ì½”ì¹˜ - ì´ìŠˆ ê°ì§€ ë° ìë™ ìˆ˜ì •\r\n      try {\r\n        const { detectExerciseIssues } = await import('@/lib/utils/detect-exercise-issues');\r\n        const { analyzeUserPreferences } = await import('@/lib/utils/analyze-user-preferences');\r\n        const { autoAdjustRoutine } = await import('@/lib/algorithms/auto-adjust-routine');\r\n\r\n        const [issues, preferences] = await Promise.all([\r\n          detectExerciseIssues({ userId: internalUserId }),\r\n          analyzeUserPreferences(internalUserId)\r\n        ]);\r\n\r\n        if (issues.length > 0 || preferences.hasEnoughData) {\r\n          const adjustmentResult = autoAdjustRoutine({\r\n            issues,\r\n            preferences,\r\n            requestedBodyParts: validatedRequest.bodyParts\r\n          });\r\n\r\n          // ì¡°ì • ì ìš©\r\n          validatedRequest = {\r\n            ...validatedRequest,\r\n            bodyParts: adjustmentResult.adjustedBodyParts\r\n          };\r\n          intensityAdjustment += adjustmentResult.intensityAdjustment;\r\n\r\n          // íšŒí”¼ ìš´ë™ ID ì €ì¥ (merge-body-partsì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡)\r\n          (validatedRequest as unknown as { _avoidExerciseIds?: string[] })._avoidExerciseIds = adjustmentResult.avoidExerciseIds;\r\n\r\n          // ê²½ê³  ì¶”ê°€\r\n          if (adjustmentResult.warnings.length > 0) {\r\n            if (!fatigueInfo) fatigueInfo = '';\r\n            fatigueInfo += (fatigueInfo ? ' ' : '') + adjustmentResult.warnings.join(' ');\r\n          }\r\n        }\r\n      } catch {\r\n        // AI ì½”ì¹˜ ì˜¤ë¥˜ ì‹œ ë¬´ì‹œ (ê¸°ì¡´ ë¡œì§ ê³„ì†)\r\n      }\r\n    }\r\n\r\n    // 4. ì½”ìŠ¤ ìƒì„± ë¡œì§ í˜¸ì¶œ\r\n    const result: MergeResult = await mergeBodyParts(validatedRequest, intensityAdjustment);\r\n\r\n    // 5. Fallback ì²˜ë¦¬: ìš´ë™ì´ ì—†ê±°ë‚˜ ë¶€ì¡±í•œ ê²½ìš°\r\n    if (result.exercises.length === 0) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"ì ì ˆí•œ ìš´ë™ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\",\r\n          message: \"ì„ íƒí•˜ì‹  ë¶€ìœ„ì™€ í†µì¦ ì •ë„ì— ë§ëŠ” ìš´ë™ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë¶€ìœ„ë¥¼ ì„ íƒí•˜ê±°ë‚˜ í†µì¦ ì •ë„ë¥¼ ì¡°ì •í•´ ì£¼ì„¸ìš”.\",\r\n          warnings: result.warnings,\r\n        },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    // ìš´ë™ì´ 3ê°œ ë¯¸ë§Œì¸ ê²½ìš° ê²½ê³  ë©”ì‹œì§€ ì¶”ê°€\r\n    if (result.exercises.length < 3) {\r\n      const warnings = result.warnings || [];\r\n      warnings.push(\"ì¶”ì²œ ìš´ë™ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ë” ë§ì€ ìš´ë™ì„ ìœ„í•´ ë‹¤ë¥¸ ë¶€ìœ„ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ê¸°êµ¬ ì˜µì…˜ì„ í™•ì¥í•´ ì£¼ì„¸ìš”.\");\r\n      result.warnings = warnings;\r\n    }\r\n\r\n    // ê°œì¸í™” ê´€ë ¨ ë©”ì‹œì§€ ì¶”ê°€\r\n    if (appliedProfiles.length > 0) {\r\n      const warnings = result.warnings || [];\r\n      warnings.push(`í”„ë¡œí•„ ê¸°ë°˜ìœ¼ë¡œ \"${appliedProfiles.join(', ')}\" ë¶€ìœ„ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n      result.warnings = warnings;\r\n    }\r\n    \r\n    if (progressTrendInfo) {\r\n      const warnings = result.warnings || [];\r\n      warnings.push(progressTrendInfo);\r\n      result.warnings = warnings;\r\n    }\r\n\r\n    // 6. ì„±ê³µ ì‘ë‹µ ë°˜í™˜\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        data: {\r\n          course: {\r\n            exercises: result.exercises,\r\n            totalDuration: result.totalDuration,\r\n            stats: result.stats,\r\n          },\r\n          warnings: result.warnings,\r\n          personalization: personalizationApplied ? {\r\n            applied: true,\r\n            addedBodyParts: appliedProfiles,\r\n            intensityAdjustment: intensityAdjustment > 0 ? 'increased' : intensityAdjustment < 0 ? 'decreased' : 'none'\r\n          } : null\r\n        },\r\n      },\r\n      { status: 200 }\r\n    );\r\n  } catch (error) {\r\n    // ì—ëŸ¬ ì²˜ë¦¬\r\n    console.error(\"Rehab course generation error:\", error);\r\n\r\n    const errorMessage =\r\n      error instanceof Error\r\n        ? error.message\r\n        : \"ì¬í™œ ì½”ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: errorMessage,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\review-tags\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\reviews\\[reviewId]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\reviews\\[reviewId]\\vote\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\reviews\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\sentry-example-api\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\sync-user\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\users\\history\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\users\\pain-profile\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\users\\progress\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\api\\users\\wearable-data\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\auth\\confirm\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\gyms\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\gyms\\[id]\\review\\[reviewId]\\edit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\gyms\\[id]\\review\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\gyms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\instruments\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\lib\\db.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\manifest.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\map\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\my\\courses\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\my\\history\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\my\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\my\\profile\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":16,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Label } from '@/components/ui/label';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Loader2, Plus, Trash2, Save } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\ninterface BodyPart {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface PainProfile {\r\n  id: string;\r\n  bodyPartId: string;\r\n  bodyPartName: string;\r\n  painLevel: number;\r\n  experienceLevel: string | null;\r\n  equipmentAvailable: string[];\r\n}\r\n\r\nconst EXPERIENCE_LEVELS = [\r\n  { value: 'beginner', label: 'ì´ˆê¸‰ (ìš´ë™ ê²½í—˜ ê±°ì˜ ì—†ìŒ)' },\r\n  { value: 'intermediate', label: 'ì¤‘ê¸‰ (ì£¼ 2-3íšŒ ìš´ë™)' },\r\n  { value: 'advanced', label: 'ê³ ê¸‰ (ì£¼ 4íšŒ ì´ìƒ)' },\r\n];\r\n\r\nconst EQUIPMENT_OPTIONS = [\r\n  'ë§¤íŠ¸', 'ë¤ë²¨', 'ë°´ë“œ', 'ì§ë³¼', 'í¼ë¡¤ëŸ¬', 'ì¼€í‹€ë²¨', 'ë°”ë²¨', 'ë¨¸ì‹ '\r\n];\r\n\r\nexport default function MyProfilePage() {\r\n  const [profiles, setProfiles] = useState<PainProfile[]>([]);\r\n  const [bodyParts, setBodyParts] = useState<BodyPart[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // ìƒˆ í”„ë¡œí•„ ì…ë ¥ ìƒíƒœ\r\n  const [selectedBodyPart, setSelectedBodyPart] = useState('');\r\n  const [painLevel, setPainLevel] = useState<number>(3);\r\n  const [experienceLevel, setExperienceLevel] = useState('');\r\n  const [equipment, setEquipment] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  async function fetchData() {\r\n    try {\r\n      // í”„ë¡œí•„ ì¡°íšŒ\r\n      const profileRes = await fetch('/api/users/pain-profile');\r\n      if (profileRes.ok) {\r\n        const data = await profileRes.json();\r\n        setProfiles(data.items || []);\r\n      }\r\n\r\n      // ë¶€ìœ„ ëª©ë¡ ì¡°íšŒ\r\n      const bodyPartRes = await fetch('/api/body-parts');\r\n      if (bodyPartRes.ok) {\r\n        const data = await bodyPartRes.json();\r\n        setBodyParts(data.bodyParts || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Fetch error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleSave() {\r\n    if (!selectedBodyPart) {\r\n      toast.error('ë¶€ìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const res = await fetch('/api/users/pain-profile', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          bodyPartId: selectedBodyPart,\r\n          painLevel,\r\n          experienceLevel: experienceLevel || undefined,\r\n          equipmentAvailable: equipment,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(data.error || 'ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\r\n      }\r\n\r\n      toast.success(data.message);\r\n      \r\n      // ëª©ë¡ ìƒˆë¡œê³ ì¹¨\r\n      fetchData();\r\n      \r\n      // ì…ë ¥ ì´ˆê¸°í™”\r\n      setSelectedBodyPart('');\r\n      setPainLevel(3);\r\n      setExperienceLevel('');\r\n      setEquipment([]);\r\n    } catch (error) {\r\n      toast.error(error instanceof Error ? error.message : 'ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  function toggleEquipment(item: string) {\r\n    setEquipment((prev) =>\r\n      prev.includes(item) ? prev.filter((e) => e !== item) : [...prev, item]\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"p-6 space-y-6 max-w-2xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold\">ë‚´ í”„ë¡œí•„</h1>\r\n\r\n      {/* ê¸°ì¡´ í”„ë¡œí•„ ëª©ë¡ */}\r\n      {profiles.length > 0 && (\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle className=\"text-lg\">ì €ì¥ëœ ë¶€ìƒ ë¶€ìœ„</CardTitle>\r\n            <CardDescription>ìš´ë™ ì½”ìŠ¤ ìƒì„± ì‹œ ì´ ì •ë³´ê°€ í™œìš©ë©ë‹ˆë‹¤.</CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-3\">\r\n            {profiles.map((profile) => (\r\n              <div\r\n                key={profile.id}\r\n                className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50\"\r\n              >\r\n                <div>\r\n                  <p className=\"font-medium\">{profile.bodyPartName}</p>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    í†µì¦ ë ˆë²¨: {profile.painLevel}/5\r\n                    {profile.experienceLevel && ` Â· ${profile.experienceLevel}`}\r\n                  </p>\r\n                </div>\r\n                <Badge variant=\"outline\">\r\n                  ê¸°êµ¬ {profile.equipmentAvailable?.length || 0}ê°œ\r\n                </Badge>\r\n              </div>\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* ìƒˆ í”„ë¡œí•„ ì¶”ê°€ */}\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"text-lg flex items-center gap-2\">\r\n            <Plus className=\"w-5 h-5\" />\r\n            ë¶€ìœ„ ì¶”ê°€/ìˆ˜ì •\r\n          </CardTitle>\r\n          <CardDescription>\r\n            ê°™ì€ ë¶€ìœ„ë¥¼ ì„ íƒí•˜ë©´ ê¸°ì¡´ ì •ë³´ê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n          {/* ë¶€ìœ„ ì„ íƒ */}\r\n          <div className=\"space-y-2\">\r\n            <Label>ë¶€ìœ„ ì„ íƒ *</Label>\r\n            <Select value={selectedBodyPart} onValueChange={setSelectedBodyPart}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"ë¶€ìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {bodyParts.map((bp) => (\r\n                  <SelectItem key={bp.id} value={bp.id}>\r\n                    {bp.name}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* í†µì¦ ë ˆë²¨ */}\r\n          <div className=\"space-y-2\">\r\n            <Label>í†µì¦ ë ˆë²¨ (1-5)</Label>\r\n            <RadioGroup\r\n              value={String(painLevel)}\r\n              onValueChange={(v) => setPainLevel(Number(v))}\r\n              className=\"flex gap-4\"\r\n            >\r\n              {[1, 2, 3, 4, 5].map((level) => (\r\n                <div key={level} className=\"flex items-center gap-1\">\r\n                  <RadioGroupItem value={String(level)} id={`pain-${level}`} />\r\n                  <Label htmlFor={`pain-${level}`} className=\"font-normal cursor-pointer\">\r\n                    {level}\r\n                  </Label>\r\n                </div>\r\n              ))}\r\n            </RadioGroup>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              1: ê±°ì˜ ì—†ìŒ ~ 5: ë§¤ìš° ì‹¬í•¨\r\n            </p>\r\n          </div>\r\n\r\n          {/* ìš´ë™ ê²½í—˜ */}\r\n          <div className=\"space-y-2\">\r\n            <Label>ìš´ë™ ê²½í—˜ (ì„ íƒ)</Label>\r\n            <Select value={experienceLevel} onValueChange={setExperienceLevel}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"ì„ íƒí•˜ì„¸ìš”\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                {EXPERIENCE_LEVELS.map((level) => (\r\n                  <SelectItem key={level.value} value={level.value}>\r\n                    {level.label}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n\r\n          {/* ì‚¬ìš© ê°€ëŠ¥ ê¸°êµ¬ */}\r\n          <div className=\"space-y-2\">\r\n            <Label>ì‚¬ìš© ê°€ëŠ¥ ê¸°êµ¬ (ì„ íƒ)</Label>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {EQUIPMENT_OPTIONS.map((item) => (\r\n                <Badge\r\n                  key={item}\r\n                  variant={equipment.includes(item) ? 'default' : 'outline'}\r\n                  className=\"cursor-pointer\"\r\n                  onClick={() => toggleEquipment(item)}\r\n                >\r\n                  {item}\r\n                </Badge>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* ì €ì¥ ë²„íŠ¼ */}\r\n          <Button\r\n            onClick={handleSave}\r\n            disabled={saving || !selectedBodyPart}\r\n            className=\"w-full\"\r\n          >\r\n            {saving ? (\r\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n            ) : (\r\n              <Save className=\"w-4 h-4 mr-2\" />\r\n            )}\r\n            ì €ì¥\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    </main>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\my\\progress\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\mypage\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":133,"column":19,"nodeType":"JSXOpeningElement","endLine":137,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { User, Mail, Calendar, ArrowLeft, Trash2, Loader2 } from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  useRecentCourses,\r\n  type LocalRecentCourse,\r\n} from \"@/hooks/use-recent-courses\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function MyPage() {\r\n  const { user, isLoaded, isSignedIn } = useUser();\r\n  const router = useRouter();\r\n  const { recentCourses, removeCourse } = useRecentCourses();\r\n  const [deletingId, setDeletingId] = useState<string | null>(null);\r\n\r\n  const handleDeleteCourse = async (courseId: string) => {\r\n    const confirmed = window.confirm(\r\n      \"ì´ ì½”ìŠ¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì‚­ì œëœ ì½”ìŠ¤ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\",\r\n    );\r\n    if (!confirmed) return;\r\n\r\n    setDeletingId(courseId);\r\n\r\n    // UUID í˜•ì‹ì¸ì§€ í™•ì¸ (DB ì½”ìŠ¤ vs localStorage ì½”ìŠ¤)\r\n    const isUUID =\r\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(\r\n        courseId,\r\n      );\r\n\r\n    try {\r\n      // ë¡œê·¸ì¸ ì‚¬ìš©ìì´ê³  UUID í˜•ì‹ì¸ ê²½ìš°ì—ë§Œ DB ì‚­ì œ ì‹œë„\r\n      if (isSignedIn && isUUID) {\r\n        try {\r\n          const response = await fetch(`/api/courses/${courseId}`, {\r\n            method: \"DELETE\",\r\n          });\r\n\r\n          if (!response.ok) {\r\n            const data = await response.json();\r\n            // 404ëŠ” DBì— ì—†ëŠ” ì½”ìŠ¤ - ë¡œì»¬ë§Œ ì‚­ì œí•˜ë©´ ë¨\r\n            if (response.status !== 404) {\r\n              throw new Error(data.error || \"ì½”ìŠ¤ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n            }\r\n            console.log(\r\n              \"[MyPage] Course not found in DB, deleting from local only\",\r\n            );\r\n          } else {\r\n            console.log(\"[MyPage] Course deleted from DB:\", courseId);\r\n          }\r\n        } catch (apiError) {\r\n          // API ì—ëŸ¬ ì‹œì—ë„ ë¡œì»¬ ì‚­ì œëŠ” ì§„í–‰\r\n          console.warn(\r\n            \"[MyPage] API delete failed, proceeding with local delete:\",\r\n            apiError,\r\n          );\r\n        }\r\n      }\r\n\r\n      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚­ì œ\r\n      const success = removeCourse(courseId);\r\n      if (success) {\r\n        toast.success(\"ì½”ìŠ¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\");\r\n        console.log(\"[MyPage] Course deleted from localStorage:\", courseId);\r\n      } else {\r\n        throw new Error(\"ì½”ìŠ¤ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"[MyPage] Delete course error:\", error);\r\n      toast.error(\r\n        error instanceof Error ? error.message : \"ì½”ìŠ¤ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\",\r\n      );\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const handleCourseClick = (course: LocalRecentCourse) => {\r\n    if (!course.requestData) {\r\n      // ğŸ†• ì´ì „ ë°ì´í„°ëŠ” í™ˆìœ¼ë¡œ ì´ë™í•˜ì—¬ ë‹¤ì‹œ ì„ íƒí•˜ë„ë¡ ìœ ë„ (Fallback)\r\n      const params = new URLSearchParams();\r\n      params.set(\"restart\", \"true\");\r\n      if (course.bodyParts) {\r\n        params.set(\"bodyParts\", course.bodyParts.join(\",\"));\r\n      }\r\n      if (course.painLevel) {\r\n        params.set(\"painLevel\", course.painLevel.toString());\r\n      }\r\n\r\n      toast.info(\"ì´ì „ ì½”ìŠ¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\");\r\n      router.push(`/?${params.toString()}`);\r\n      return;\r\n    }\r\n\r\n    const encoded = encodeURIComponent(JSON.stringify(course.requestData));\r\n    router.push(`/rehab?data=${encoded}`);\r\n  };\r\n\r\n  if (!isLoaded) {\r\n    return (\r\n      <main className=\"min-h-[calc(100vh-80px)] container mx-auto px-4 py-8\">\r\n        <div className=\"flex items-center justify-center h-64\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-[calc(100vh-80px)] container mx-auto px-4 py-8\">\r\n      <div className=\"max-w-2xl mx-auto space-y-6\">\r\n        {/* ë’¤ë¡œê°€ê¸° */}\r\n        <Button variant=\"ghost\" onClick={() => router.back()} className=\"mb-4\">\r\n          <ArrowLeft className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\r\n          ë’¤ë¡œê°€ê¸°\r\n        </Button>\r\n\r\n        {/* í”„ë¡œí•„ ì¹´ë“œ - ë¡œê·¸ì¸ ì‹œì—ë§Œ í‘œì‹œ */}\r\n        {isSignedIn && user && (\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <User className=\"w-5 h-5\" strokeWidth={1.5} />ë‚´ í”„ë¡œí•„\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"flex items-center gap-4\">\r\n                {user.imageUrl ? (\r\n                  <img\r\n                    src={user.imageUrl}\r\n                    alt=\"í”„ë¡œí•„\"\r\n                    className=\"w-20 h-20 rounded-full object-cover border-2 border-primary/20\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-20 h-20 rounded-full bg-muted flex items-center justify-center\">\r\n                    <User\r\n                      className=\"w-10 h-10 text-muted-foreground\"\r\n                      strokeWidth={1.5}\r\n                    />\r\n                  </div>\r\n                )}\r\n                <div>\r\n                  <h2 className=\"text-xl font-semibold\">\r\n                    {user.fullName || \"ì‚¬ìš©ì\"}\r\n                  </h2>\r\n                  <p className=\"text-muted-foreground flex items-center gap-1\">\r\n                    <Mail className=\"w-4 h-4\" strokeWidth={1.5} />\r\n                    {user.primaryEmailAddress?.emailAddress}\r\n                  </p>\r\n                  <p className=\"text-sm text-muted-foreground flex items-center gap-1 mt-1\">\r\n                    <Calendar className=\"w-4 h-4\" strokeWidth={1.5} />\r\n                    ê°€ì…ì¼:{\" \"}\r\n                    {user.createdAt\r\n                      ? new Date(user.createdAt).toLocaleDateString(\"ko-KR\")\r\n                      : \"ì•Œ ìˆ˜ ì—†ìŒ\"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* ë¹„ë¡œê·¸ì¸ ì•ˆë‚´ */}\r\n        {!isSignedIn && (\r\n          <Card>\r\n            <CardContent className=\"py-6\">\r\n              <p className=\"text-muted-foreground text-center\">\r\n                ë¡œê·¸ì¸í•˜ì‹œë©´ ë” ë§ì€ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n              </p>\r\n              <div className=\"flex justify-center mt-4\">\r\n                <Button onClick={() => router.push(\"/sign-in\")}>\r\n                  ë¡œê·¸ì¸í•˜ê¸°\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* ì €ì¥ëœ ì½”ìŠ¤ ë°”ë¡œê°€ê¸° */}\r\n        <Card className=\"bg-primary/5 border-primary/20\">\r\n          <CardContent className=\"flex items-center justify-between p-6\">\r\n            <div>\r\n              <h3 className=\"font-semibold text-lg mb-1\">ì €ì¥ëœ ì½”ìŠ¤ ë³´ê¸°</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                ì €ì¥í•œ ì¬í™œ ì½”ìŠ¤ ëª©ë¡ì„ í™•ì¸í•˜ì„¸ìš”\r\n              </p>\r\n            </div>\r\n            <Button onClick={() => router.push(\"/my/courses\")}>ë³´ëŸ¬ê°€ê¸°</Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* ìµœê·¼ ì½”ìŠ¤ */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>ìµœê·¼ ìƒì„±í•œ ì½”ìŠ¤</CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            {recentCourses.length === 0 ? (\r\n              <p className=\"text-muted-foreground text-center py-4\">\r\n                ì•„ì§ ìƒì„±í•œ ì½”ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.\r\n              </p>\r\n            ) : (\r\n              <ul className=\"space-y-3\">\r\n                {recentCourses.slice(0, 5).map((course) => (\r\n                  <li\r\n                    key={course.id}\r\n                    className=\"p-3 bg-muted/50 rounded-lg cursor-pointer hover:bg-muted transition-colors\"\r\n                    onClick={() => handleCourseClick(course)}\r\n                  >\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-medium\">\r\n                          {course.bodyParts.join(\", \")}\r\n                        </p>\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          {course.totalDuration}ë¶„ | ìš´ë™ {course.exerciseCount}\r\n                          ê°œ\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          {new Date(course.createdAt).toLocaleDateString(\r\n                            \"ko-KR\",\r\n                          )}\r\n                        </span>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\r\n                          onClick={(e) => {\r\n                            e.stopPropagation(); // ë¶€ëª¨ liì˜ í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€\r\n                            handleDeleteCourse(course.id);\r\n                          }}\r\n                          disabled={deletingId === course.id}\r\n                        >\r\n                          {deletingId === course.id ? (\r\n                            <Loader2\r\n                              className=\"w-4 h-4 animate-spin\"\r\n                              strokeWidth={1.5}\r\n                            />\r\n                          ) : (\r\n                            <Trash2 className=\"w-4 h-4\" strokeWidth={1.5} />\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\rehab\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":211,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":211,"endColumn":17}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'generateCourse'. Either include it or remove the dependency array.","line":185,"column":6,"nodeType":"ArrayExpression","endLine":185,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [generateCourse, searchParams]","fix":{"range":[5327,5341],"text":"[generateCourse, searchParams]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file page.tsx\r\n * @description ì¬í™œ ì½”ìŠ¤ ê²°ê³¼ í˜ì´ì§€\r\n *\r\n * ìƒì„±ëœ ì¬í™œ ì½”ìŠ¤ë¥¼ ì„¹ì…˜ë³„ë¡œ í‘œì‹œí•˜ê³ , ì½”ìŠ¤ ì €ì¥ ë° í—¬ìŠ¤ì¥ ì°¾ê¸° ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\r\n *\r\n * ì£¼ìš” ê¸°ëŠ¥:\r\n * - ì¤€ë¹„/ë©”ì¸/ë§ˆë¬´ë¦¬ ì„¹ì…˜ë³„ ìš´ë™ í‘œì‹œ\r\n * - ì½”ìŠ¤ ì €ì¥ ê¸°ëŠ¥\r\n * - ê·¼ì²˜ í—¬ìŠ¤ì¥ ì°¾ê¸° ë²„íŠ¼\r\n * - ì„¸ì…˜ í”Œë ˆì´ì–´ ëª¨ë“œ (ì „ì²´ ìš´ë™ ì—°ì† ì‹¤í–‰)\r\n * - ì˜ë£Œí–‰ìœ„ ì•„ë‹˜ ì•ˆë‚´ ë¬¸êµ¬\r\n *\r\n * @dependencies\r\n * - @/components/course-exercise-card: ìš´ë™ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\r\n * - @/components/session-player: ì„¸ì…˜ í”Œë ˆì´ì–´ ì»´í¬ë„ŒíŠ¸\r\n * - @/types/body-part-merge: MergedExercise íƒ€ì…\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useState, useEffect, Suspense, useCallback } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport {\r\n  Clock,\r\n  MapPin,\r\n  Save,\r\n  Loader2,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  Play,\r\n} from \"lucide-react\";\r\nimport { CourseExerciseCard } from \"@/components/course-exercise-card\";\r\nimport { ExerciseTimerModal } from \"@/components/exercise-timer-modal\";\r\nimport { SessionPlayer } from \"@/components/session-player\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { useRecentCourses } from \"@/hooks/use-recent-courses\";\r\nimport { useSwipe } from \"@/hooks/use-swipe\";\r\nimport type { SessionResult, UserFeedback } from \"@/hooks/use-session-state\";\r\nimport type { MergedExercise, MergeRequest } from \"@/types/body-part-merge\";\r\n\r\ninterface CourseGenerationResponse {\r\n  success: boolean;\r\n  data?: {\r\n    course: {\r\n      exercises: MergedExercise[];\r\n      totalDuration: number;\r\n      stats?: {\r\n        warmup: number;\r\n        main: number;\r\n        cooldown: number;\r\n      };\r\n    };\r\n    warnings?: string[];\r\n  };\r\n  error?: string;\r\n}\r\n\r\n/**\r\n * RehabPageContent ì»´í¬ë„ŒíŠ¸\r\n * useSearchParamsë¥¼ ì‚¬ìš©í•˜ëŠ” ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸\r\n */\r\nfunction RehabPageContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [saveSuccess, setSaveSuccess] = useState(false);\r\n  const [courseData, setCourseData] = useState<{\r\n    exercises: MergedExercise[];\r\n    totalDuration: number;\r\n    stats?: {\r\n      warmup: number;\r\n      main: number;\r\n      cooldown: number;\r\n    };\r\n    warnings?: string[];\r\n  } | null>(null);\r\n  const [sections, setSections] = useState<{\r\n    warmup: MergedExercise[];\r\n    main: MergedExercise[];\r\n    cooldown: MergedExercise[];\r\n  } | null>(null);\r\n\r\n  // ìš´ë™ íƒ€ì´ë¨¸ ëª¨ë‹¬ ìƒíƒœ\r\n  const [activeExercise, setActiveExercise] = useState<MergedExercise | null>(\r\n    null,\r\n  );\r\n  const [activeIndex, setActiveIndex] = useState<number>(-1);\r\n\r\n  // ğŸ†• ì„¸ì…˜ í”Œë ˆì´ì–´ ëª¨ë“œ ìƒíƒœ\r\n  const [isSessionMode, setIsSessionMode] = useState(false);\r\n  const [savedCourseId, setSavedCourseId] = useState<string | null>(null);\r\n\r\n  // ì „ì²´ ìš´ë™ ëª©ë¡ (ìˆœì„œëŒ€ë¡œ í‰íƒ„í™”)\r\n  const allExercises = sections\r\n    ? [...sections.warmup, ...sections.main, ...sections.cooldown]\r\n    : [];\r\n\r\n  const handleStartExercise = (exercise: MergedExercise) => {\r\n    setActiveExercise(exercise);\r\n    // ì „ì²´ ëª©ë¡ì—ì„œ ì¸ë±ìŠ¤ ì°¾ê¸°\r\n    const index = allExercises.findIndex(\r\n      (ex) =>\r\n        ex.exerciseTemplateId === exercise.exerciseTemplateId &&\r\n        ex.section === exercise.section,\r\n    );\r\n    setActiveIndex(index);\r\n  };\r\n\r\n  const handleNextExercise = () => {\r\n    if (activeIndex < allExercises.length - 1) {\r\n      const nextIndex = activeIndex + 1;\r\n      setActiveIndex(nextIndex);\r\n      setActiveExercise(allExercises[nextIndex]);\r\n    }\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setActiveExercise(null);\r\n    setActiveIndex(-1);\r\n  };\r\n\r\n  // íƒ­ ìƒíƒœ ê´€ë¦¬ ë° ìŠ¤ì™€ì´í”„ ë¡œì§\r\n  const [activeTab, setActiveTab] = useState<string>(\"warmup\");\r\n\r\n  const handleSwipeLeft = () => {\r\n    if (activeTab === \"warmup\") setActiveTab(\"main\");\r\n    else if (activeTab === \"main\") setActiveTab(\"cooldown\");\r\n  };\r\n\r\n  const handleSwipeRight = () => {\r\n    if (activeTab === \"cooldown\") setActiveTab(\"main\");\r\n    else if (activeTab === \"main\") setActiveTab(\"warmup\");\r\n  };\r\n\r\n  const swipeHandlers = useSwipe({\r\n    onSwipeLeft: handleSwipeLeft,\r\n    onSwipeRight: handleSwipeRight,\r\n    threshold: 50,\r\n  });\r\n\r\n  // ì½”ìŠ¤ ìƒì„± ìš”ì²­ ë°ì´í„° (URL íŒŒë¼ë¯¸í„° ë˜ëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì ¸ì˜¤ê¸°)\r\n  const [requestData, setRequestData] = useState<MergeRequest | null>(null);\r\n\r\n  // ğŸ†• ìµœê·¼ ì½”ìŠ¤ ì €ì¥ í›…\r\n  const { addCourse } = useRecentCourses();\r\n\r\n  useEffect(() => {\r\n    // URL íŒŒë¼ë¯¸í„° ë˜ëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì½”ìŠ¤ ìƒì„± ìš”ì²­ ë°ì´í„° í™•ì¸\r\n    const urlData = searchParams.get(\"data\");\r\n    let mergeRequest: MergeRequest | null = null;\r\n\r\n    if (urlData) {\r\n      try {\r\n        mergeRequest = JSON.parse(decodeURIComponent(urlData));\r\n      } catch (e) {\r\n        console.error(\"Failed to parse URL data:\", e);\r\n      }\r\n    } else {\r\n      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì ¸ì˜¤ê¸°\r\n      const stored = localStorage.getItem(\"rehabCourseRequest\");\r\n      if (stored) {\r\n        try {\r\n          mergeRequest = JSON.parse(stored);\r\n        } catch (e) {\r\n          console.error(\"Failed to parse stored data:\", e);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!mergeRequest) {\r\n      setError(\"ì½”ìŠ¤ ìƒì„± ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setRequestData(mergeRequest);\r\n    generateCourse(mergeRequest);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParams]);\r\n\r\n  /**\r\n   * ì½”ìŠ¤ ìƒì„± API í˜¸ì¶œ\r\n   */\r\n  const generateCourse = async (request: MergeRequest) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/rehab/generate\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(request),\r\n      });\r\n\r\n      let data: CourseGenerationResponse;\r\n      try {\r\n        const text = await response.text();\r\n        try {\r\n          data = JSON.parse(text);\r\n        } catch {\r\n          throw new Error(`Invalid JSON response: ${text.slice(0, 100)}...`);\r\n        }\r\n      } catch (e) {\r\n        throw new Error(\r\n          `Server connection failed: ${response.status} ${response.statusText}`,\r\n        );\r\n      }\r\n\r\n      if (!response.ok || !data.success) {\r\n        throw new Error(data.error || \"ì½”ìŠ¤ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n\r\n      if (!data.data) {\r\n        throw new Error(\"ì½”ìŠ¤ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n\r\n      setCourseData(data.data.course);\r\n\r\n      // ì„¹ì…˜ë³„ë¡œ ê·¸ë£¹í™” (ì„œë²„ì—ì„œ ì´ë¯¸ ë¶„ë¥˜+ë°°ë¶„ëœ ê²°ê³¼ ì‚¬ìš©)\r\n      // âš ï¸ ì¤‘ìš”: classifyBySection()ì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ë©´ ì„œë²„ì˜ ì‹œê°„ ë°°ë¶„ì´ ë¬´ì‹œë¨\r\n      const exercises = data.data.course.exercises;\r\n      const grouped = {\r\n        warmup: exercises.filter((ex) => ex.section === \"warmup\"),\r\n        main: exercises.filter((ex) => ex.section === \"main\"),\r\n        cooldown: exercises.filter((ex) => ex.section === \"cooldown\"),\r\n      };\r\n      setSections(grouped);\r\n\r\n      // ğŸ†• ìµœê·¼ ì½”ìŠ¤ì— ìë™ ì €ì¥\r\n      addCourse({\r\n        bodyParts: request.bodyParts.map((bp) => bp.bodyPartName),\r\n        painLevel: request.painLevel,\r\n        totalDuration: data.data.course.totalDuration,\r\n        exerciseCount: data.data.course.exercises.length,\r\n        requestData: request, // ğŸ†• ì¬ì‹¤í–‰ì„ ìœ„í•´ ì›ë³¸ ìš”ì²­ ì €ì¥\r\n      });\r\n      console.log(\"[RehabPage] Course saved to recent courses\");\r\n    } catch (err) {\r\n      let errorMessage =\r\n        err instanceof Error ? err.message : \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n\r\n      // ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë©”ì‹œì§€ ë²ˆì—­\r\n      if (\r\n        errorMessage === \"Failed to fetch\" ||\r\n        errorMessage === \"Load failed\"\r\n      ) {\r\n        errorMessage = \"ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”. (ì„œë²„ ì—°ê²° ì‹¤íŒ¨)\";\r\n      }\r\n\r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ì½”ìŠ¤ ì €ì¥ í•¸ë“¤ëŸ¬\r\n   */\r\n  const handleSaveCourse = async () => {\r\n    if (!courseData || !requestData) {\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    setSaveSuccess(false);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/courses/save\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          totalDurationMinutes: requestData.totalDurationMinutes || 60,\r\n          painLevel: requestData.painLevel,\r\n          experienceLevel: requestData.experienceLevel,\r\n          bodyParts: requestData.bodyParts.map((bp) => bp.bodyPartName),\r\n          equipmentAvailable: requestData.equipmentAvailable,\r\n          exercises: courseData.exercises,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok || !data.success) {\r\n        throw new Error(data.error || \"ì½”ìŠ¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n      }\r\n\r\n      // ğŸ†• ì €ì¥ëœ ì½”ìŠ¤ ID ì €ì¥\r\n      if (data.data?.courseId) {\r\n        setSavedCourseId(data.data.courseId);\r\n      }\r\n\r\n      setSaveSuccess(true);\r\n      // 3ì´ˆ í›„ ì„±ê³µ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°\r\n      setTimeout(() => setSaveSuccess(false), 3000);\r\n    } catch (err) {\r\n      const errorMessage =\r\n        err instanceof Error ? err.message : \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n      setError(errorMessage);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ê·¼ì²˜ í—¬ìŠ¤ì¥ ì°¾ê¸° í•¸ë“¤ëŸ¬\r\n   */\r\n  const handleFindGyms = () => {\r\n    router.push(\"/gyms\");\r\n  };\r\n\r\n  /**\r\n   * ğŸ†• ì„¸ì…˜ ì‹œì‘ í•¸ë“¤ëŸ¬\r\n   * ì½”ìŠ¤ë¥¼ ë¨¼ì € ì €ì¥í•œ í›„ ì„¸ì…˜ ëª¨ë“œë¡œ ì „í™˜\r\n   */\r\n  const handleStartSession = async () => {\r\n    if (!courseData || !requestData) return;\r\n\r\n    // ì½”ìŠ¤ê°€ ì•„ì§ ì €ì¥ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ë¨¼ì € ì €ì¥\r\n    if (!savedCourseId) {\r\n      setSaving(true);\r\n      try {\r\n        const response = await fetch(\"/api/courses/save\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            totalDurationMinutes: requestData.totalDurationMinutes || 60,\r\n            painLevel: requestData.painLevel,\r\n            experienceLevel: requestData.experienceLevel,\r\n            bodyParts: requestData.bodyParts.map((bp) => bp.bodyPartName),\r\n            equipmentAvailable: requestData.equipmentAvailable,\r\n            exercises: courseData.exercises,\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n        if (!response.ok || !data.success) {\r\n          throw new Error(data.error || \"ì½”ìŠ¤ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n        }\r\n\r\n        setSavedCourseId(data.data.courseId);\r\n        setSaveSuccess(true);\r\n        setTimeout(() => setSaveSuccess(false), 3000);\r\n      } catch (err) {\r\n        const errorMessage =\r\n          err instanceof Error ? err.message : \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n        setError(errorMessage);\r\n        setSaving(false);\r\n        return;\r\n      }\r\n      setSaving(false);\r\n    }\r\n\r\n    // ì„¸ì…˜ ëª¨ë“œë¡œ ì „í™˜\r\n    setIsSessionMode(true);\r\n  };\r\n\r\n  /**\r\n   * ğŸ†• ì„¸ì…˜ ì™„ë£Œ í•¸ë“¤ëŸ¬\r\n   */\r\n  const handleSessionComplete = useCallback(\r\n    async (result: SessionResult, feedback: UserFeedback) => {\r\n      if (!savedCourseId) {\r\n        console.error(\"Course ID not found for completion logging\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // ì™„ë£Œ ë¡œê·¸ ì €ì¥\r\n        const response = await fetch(\"/api/courses/complete\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            courseId: savedCourseId,\r\n            exercises: result.exerciseLogs.map((log) => ({\r\n              exerciseTemplateId: log.exerciseTemplateId,\r\n              status: log.status,\r\n              actualDuration: Math.floor(log.actualDuration / 60), // ì´ˆ -> ë¶„\r\n            })),\r\n            painAfter: feedback.painAfter\r\n              ? Math.round(\r\n                  Object.values(feedback.painAfter).reduce((a, b) => a + b, 0) /\r\n                    Object.values(feedback.painAfter).length\r\n                )\r\n              : undefined,\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n        if (!response.ok || !data.success) {\r\n          console.error(\"Failed to save completion logs:\", data.error);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Session completion error:\", err);\r\n      }\r\n    },\r\n    [savedCourseId]\r\n  );\r\n\r\n  /**\r\n   * ğŸ†• ì„¸ì…˜ ì¢…ë£Œ í•¸ë“¤ëŸ¬\r\n   */\r\n  const handleSessionExit = useCallback(() => {\r\n    setIsSessionMode(false);\r\n  }, []);\r\n\r\n  /**\r\n   * ğŸ†• ë¶€ìœ„ë³„ í†µì¦ ì •ë³´ ë³€í™˜ (ì„¸ì…˜ í”Œë ˆì´ì–´ìš©)\r\n   */\r\n  const getBodyPartInfoForSession = useCallback(() => {\r\n    if (!requestData) return [];\r\n    return requestData.bodyParts.map((bp) => ({\r\n      bodyPartId: bp.bodyPartId,\r\n      bodyPartName: bp.bodyPartName,\r\n      painBefore: bp.painLevel,\r\n    }));\r\n  }, [requestData]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <main className=\"min-h-[calc(100vh-80px)] container mx-auto px-4 sm:px-6 md:px-8 py-8 sm:py-12\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <div className=\"flex flex-col items-center justify-center py-12\">\r\n            <Loader2\r\n              className=\"h-8 w-8 animate-spin text-primary mb-4\"\r\n              strokeWidth={1.5}\r\n            />\r\n            <p className=\"text-muted-foreground\">ì½”ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (error && !courseData) {\r\n    return (\r\n      <main className=\"min-h-[calc(100vh-80px)] container mx-auto px-4 sm:px-6 md:px-8 py-8 sm:py-12\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <Alert variant=\"destructive\">\r\n            <AlertCircle className=\"h-4 w-4\" strokeWidth={1.5} />\r\n            <AlertDescription>{error}</AlertDescription>\r\n          </Alert>\r\n          <div className=\"mt-6\">\r\n            <Button onClick={() => router.push(\"/\")} variant=\"outline\">\r\n              í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  if (!sections || !courseData) {\r\n    return null;\r\n  }\r\n\r\n  // ğŸ†• ì„¸ì…˜ í”Œë ˆì´ì–´ ëª¨ë“œ\r\n  if (isSessionMode) {\r\n    return (\r\n      <div className=\"fixed inset-0 z-50 bg-background\">\r\n        <SessionPlayer\r\n          exercises={allExercises}\r\n          courseId={savedCourseId ?? undefined}\r\n          courseName={`${requestData?.bodyParts.map(bp => bp.bodyPartName).join(', ')} ì¬í™œ ì½”ìŠ¤`}\r\n          bodyParts={getBodyPartInfoForSession()}\r\n          streak={0} // TODO: ì‹¤ì œ ì—°ì† ìš´ë™ ì¼ìˆ˜ ì¡°íšŒ\r\n          onComplete={handleSessionComplete}\r\n          onExit={handleSessionExit}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-[calc(100vh-80px)] container mx-auto px-4 sm:px-6 md:px-8 py-8 sm:py-12\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        {/* í—¤ë” */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl sm:text-4xl font-semibold text-foreground mb-2\">\r\n            ë‚´ ëª¸ì— ë§ëŠ” ì¬í™œ ì½”ìŠ¤\r\n          </h1>\r\n          <div className=\"flex items-center gap-2 text-muted-foreground\">\r\n            <Clock className=\"h-5 w-5\" strokeWidth={1.5} />\r\n            <span className=\"text-lg\">ì´ {courseData.totalDuration}ë¶„</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ê²½ê³  ë©”ì‹œì§€ */}\r\n        {courseData.warnings && courseData.warnings.length > 0 && (\r\n          <Alert\r\n            variant=\"default\"\r\n            className=\"mb-6 border-yellow-500/30 bg-yellow-500/10\"\r\n          >\r\n            <AlertCircle\r\n              className=\"h-4 w-4 text-yellow-500\"\r\n              strokeWidth={1.5}\r\n            />\r\n            <AlertDescription className=\"text-yellow-500/90\">\r\n              {courseData.warnings.map((warning, idx) => (\r\n                <p key={idx}>{warning}</p>\r\n              ))}\r\n            </AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        {/* ì—ëŸ¬ ë©”ì‹œì§€ */}\r\n        {error && (\r\n          <Alert variant=\"destructive\" className=\"mb-6\">\r\n            <AlertCircle className=\"h-4 w-4\" strokeWidth={1.5} />\r\n            <AlertDescription>{error}</AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        {/* ì„±ê³µ ë©”ì‹œì§€ */}\r\n        {saveSuccess && (\r\n          <Alert\r\n            variant=\"default\"\r\n            className=\"mb-6 border-green-500/30 bg-green-500/10\"\r\n          >\r\n            <CheckCircle2\r\n              className=\"h-4 w-4 text-green-500\"\r\n              strokeWidth={1.5}\r\n            />\r\n            <AlertDescription className=\"text-green-500/90\">\r\n              ì½”ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\r\n            </AlertDescription>\r\n          </Alert>\r\n        )}\r\n\r\n        {/* ì„¹ì…˜ë³„ ìš´ë™ íƒ­ */}\r\n        <div\r\n          {...swipeHandlers.onTouchStart}\r\n          {...swipeHandlers.onTouchMove}\r\n          {...swipeHandlers.onTouchEnd}\r\n        >\r\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"mb-8\">\r\n            <TabsList className=\"grid w-full grid-cols-3\">\r\n              <TabsTrigger value=\"warmup\">\r\n                ì¤€ë¹„ ìš´ë™ ({sections.warmup.length}) Â·{\" \"}\r\n                {sections.warmup.reduce(\r\n                  (sum, ex) => sum + (ex.durationMinutes || 0),\r\n                  0,\r\n                )}\r\n                ë¶„\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"main\">\r\n                ë©”ì¸ ìš´ë™ ({sections.main.length}) Â·{\" \"}\r\n                {sections.main.reduce(\r\n                  (sum, ex) => sum + (ex.durationMinutes || 0),\r\n                  0,\r\n                )}\r\n                ë¶„\r\n              </TabsTrigger>\r\n              <TabsTrigger value=\"cooldown\">\r\n                ë§ˆë¬´ë¦¬ ìš´ë™ ({sections.cooldown.length}) Â·{\" \"}\r\n                {sections.cooldown.reduce(\r\n                  (sum, ex) => sum + (ex.durationMinutes || 0),\r\n                  0,\r\n                )}\r\n                ë¶„\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            <TabsContent value=\"warmup\" className=\"mt-6\">\r\n              <div className=\"space-y-4\">\r\n                {sections.warmup.length === 0 ? (\r\n                  <Card>\r\n                    <CardContent className=\"p-8 text-center\">\r\n                      <p className=\"text-muted-foreground\">\r\n                        ì¤€ë¹„ ìš´ë™ì´ ì—†ìŠµë‹ˆë‹¤.\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                ) : (\r\n                  sections.warmup.map((exercise, index) => (\r\n                    <CourseExerciseCard\r\n                      key={`warmup-${index}-${exercise.exerciseTemplateId}`}\r\n                      exercise={exercise}\r\n                      section=\"warmup\"\r\n                      onStart={handleStartExercise}\r\n                    />\r\n                  ))\r\n                )}\r\n              </div>\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"main\" className=\"mt-6\">\r\n              <div className=\"space-y-4\">\r\n                {sections.main.length === 0 ? (\r\n                  <Card>\r\n                    <CardContent className=\"p-8 text-center\">\r\n                      <p className=\"text-muted-foreground\">\r\n                        ë©”ì¸ ìš´ë™ì´ ì—†ìŠµë‹ˆë‹¤.\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                ) : (\r\n                  sections.main.map((exercise, index) => (\r\n                    <CourseExerciseCard\r\n                      key={`main-${index}-${exercise.exerciseTemplateId}`}\r\n                      exercise={exercise}\r\n                      section=\"main\"\r\n                      onStart={handleStartExercise}\r\n                    />\r\n                  ))\r\n                )}\r\n              </div>\r\n            </TabsContent>\r\n\r\n            <TabsContent value=\"cooldown\" className=\"mt-6\">\r\n              <div className=\"space-y-4\">\r\n                {sections.cooldown.length === 0 ? (\r\n                  <Card>\r\n                    <CardContent className=\"p-8 text-center\">\r\n                      <p className=\"text-muted-foreground\">\r\n                        ë§ˆë¬´ë¦¬ ìš´ë™ì´ ì—†ìŠµë‹ˆë‹¤.\r\n                      </p>\r\n                    </CardContent>\r\n                  </Card>\r\n                ) : (\r\n                  sections.cooldown.map((exercise, index) => (\r\n                    <CourseExerciseCard\r\n                      key={`cooldown-${index}-${exercise.exerciseTemplateId}`}\r\n                      exercise={exercise}\r\n                      section=\"cooldown\"\r\n                      onStart={handleStartExercise}\r\n                    />\r\n                  ))\r\n                )}\r\n              </div>\r\n            </TabsContent>\r\n          </Tabs>\r\n        </div>\r\n\r\n        {/* ğŸ†• ì„¸ì…˜ ì‹œì‘ ë²„íŠ¼ (ë©”ì¸ CTA) */}\r\n        <Card className=\"mb-6 border-primary/30 bg-primary/5\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"text-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold mb-1\">ì¤€ë¹„ë˜ì…¨ë‚˜ìš”?</h3>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                ì „ì²´ ìš´ë™ì„ ì—°ì†ìœ¼ë¡œ ì§„í–‰í•˜ê³  ì½”ì¹­ í”¼ë“œë°±ì„ ë°›ì•„ë³´ì„¸ìš”\r\n              </p>\r\n            </div>\r\n            <Button\r\n              onClick={handleStartSession}\r\n              disabled={saving}\r\n              size=\"lg\"\r\n              className=\"w-full bg-primary hover:bg-primary-hover text-white\"\r\n            >\r\n              {saving ? (\r\n                <>\r\n                  <Loader2\r\n                    className=\"h-5 w-5 mr-2 animate-spin\"\r\n                    strokeWidth={1.5}\r\n                  />\r\n                  ì¤€ë¹„ ì¤‘...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Play className=\"h-5 w-5 mr-2\" strokeWidth={1.5} />\r\n                  ì„¸ì…˜ ì‹œì‘í•˜ê¸°\r\n                </>\r\n              )}\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ ì˜ì—­ */}\r\n        <Card className=\"mb-6\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex flex-col sm:flex-row gap-4\">\r\n              <Button\r\n                onClick={handleFindGyms}\r\n                variant=\"secondary\"\r\n                className=\"flex-1 bg-secondary hover:bg-secondary-hover text-secondary-foreground\"\r\n              >\r\n                <MapPin className=\"h-4 w-4 mr-2\" strokeWidth={1.5} />ì´ ì½”ìŠ¤\r\n                í•˜ê¸° ì¢‹ì€ ê·¼ì²˜ í—¬ìŠ¤ì¥ ë³´ê¸°\r\n              </Button>\r\n              <Button\r\n                onClick={handleSaveCourse}\r\n                disabled={saving || !!savedCourseId}\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n              >\r\n                {saving ? (\r\n                  <>\r\n                    <Loader2\r\n                      className=\"h-4 w-4 mr-2 animate-spin\"\r\n                      strokeWidth={1.5}\r\n                    />\r\n                    ì €ì¥ ì¤‘...\r\n                  </>\r\n                ) : savedCourseId ? (\r\n                  <>\r\n                    <CheckCircle2 className=\"h-4 w-4 mr-2\" strokeWidth={1.5} />\r\n                    ì €ì¥ë¨\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Save className=\"h-4 w-4 mr-2\" strokeWidth={1.5} />\r\n                    ì½”ìŠ¤ ì €ì¥í•˜ê¸°\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* ìƒˆ ì½”ìŠ¤ ë§Œë“¤ê¸° ë²„íŠ¼ */}\r\n        <div className=\"mb-8 flex justify-center\">\r\n          <Button\r\n            variant=\"outline\"\r\n            className=\"w-full sm:w-auto min-w-[200px]\"\r\n            onClick={() => router.push(\"/\")}\r\n          >\r\n            ìƒˆ ì½”ìŠ¤ ë§Œë“¤ê¸°\r\n          </Button>\r\n        </div>\r\n\r\n        {/* ì˜ë£Œí–‰ìœ„ ì•„ë‹˜ ì•ˆë‚´ ë¬¸êµ¬ */}\r\n        <Alert variant=\"default\" className=\"border-muted bg-muted/30\">\r\n          <AlertCircle\r\n            className=\"h-4 w-4 text-muted-foreground\"\r\n            strokeWidth={1.5}\r\n          />\r\n          <AlertDescription className=\"text-xs text-muted-foreground\">\r\n            <strong className=\"text-foreground\">ì˜ë£Œí–‰ìœ„ ì•„ë‹˜ ì•ˆë‚´:</strong> ë³¸\r\n            ì„œë¹„ìŠ¤ëŠ” ì˜ë£Œí–‰ìœ„ê°€ ì•„ë‹™ë‹ˆë‹¤. í†µì¦ì´ ì‹¬í•˜ê±°ë‚˜ ì§€ì†ë˜ë©´ ì „ë¬¸ì˜ì™€\r\n            ìƒë‹´í•˜ì„¸ìš”.\r\n          </AlertDescription>\r\n        </Alert>\r\n      </div>\r\n\r\n      {/* ìš´ë™ íƒ€ì´ë¨¸ ëª¨ë‹¬ */}\r\n      <ExerciseTimerModal\r\n        isOpen={!!activeExercise}\r\n        exercise={activeExercise}\r\n        hasNext={activeIndex < allExercises.length - 1}\r\n        onClose={handleCloseModal}\r\n        onNext={handleNextExercise}\r\n      />\r\n    </main>\r\n  );\r\n}\r\n\r\n/**\r\n * RehabPage ë©”ì¸ ì»´í¬ë„ŒíŠ¸\r\n * Suspenseë¡œ ê°ì‹¸ì„œ useSearchParams ì‚¬ìš©\r\n */\r\nexport default function RehabPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <main className=\"min-h-[calc(100vh-80px)] container mx-auto px-4 sm:px-6 md:px-8 py-8 sm:py-12\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <div className=\"flex flex-col items-center justify-center py-12\">\r\n              <Loader2\r\n                className=\"h-8 w-8 animate-spin text-primary mb-4\"\r\n                strokeWidth={1.5}\r\n              />\r\n              <p className=\"text-muted-foreground\">ë¡œë”© ì¤‘...</p>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      }\r\n    >\r\n      <RehabPageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\robots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\sentry-example-page\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\sign-in\\[[...sign-in]]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\sign-in\\sso-callback\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\sign-up\\[[...sign-up]]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\sitemap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\terms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\app\\unauthorized\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\Navbar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SignedIn' is defined but never used.","line":5,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SignedOut' is defined but never used.","line":5,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserButton' is defined but never used.","line":5,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":60},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":79,"column":23,"nodeType":"JSXOpeningElement","endLine":83,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport Link from \"next/link\";\nimport React, { useState } from \"react\";\nimport { useUser, useClerk, SignedIn, SignedOut, UserButton } from \"@clerk/nextjs\";\nimport { Button } from \"@/components/ui/button\";\nimport { Menu, X, User, LogOut, Settings } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { PainCheckModal } from \"@/components/pain-check-modal\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\nconst Navbar = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { isLoaded, isSignedIn, user } = useUser();\n  const { signOut } = useClerk();\n  const router = useRouter();\n\n  const handleSignOut = async () => {\n    await signOut();\n    router.push('/');\n  };\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80 shadow-sm\">\n      <div className=\"w-full flex h-16 items-center justify-between px-3 sm:px-4 md:px-6 py-3 relative\">\n        <div className=\"flex items-center\">\n          <Link\n            href=\"/\"\n            className=\"flex items-center group\"\n            aria-label=\"í™ˆí˜ì´ì§€ë¡œ ì´ë™\"\n            onClick={() => setIsOpen(false)}\n          >\n            <span className=\"text-lg sm:text-xl font-semibold\">REHAB</span>\n          </Link>\n        </div>\n\n        {/* ë°ìŠ¤í¬í†± ë©”ë‰´ */}\n        <div className=\"hidden sm:flex items-center gap-3\">\n          {isLoaded && !isSignedIn && (\n            <>\n              <Button \n                onClick={() => router.push('/sign-in')}\n                className=\"rounded-xl bg-primary hover:bg-primary-hover text-white transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5 px-4 py-2 text-sm\"\n              >\n                ë¡œê·¸ì¸\n              </Button>\n              <Button\n                onClick={() => router.push('/sign-up')}\n                variant=\"secondary\"\n                className=\"rounded-xl bg-secondary hover:bg-secondary-hover text-white border-2 border-secondary-dark/30 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5 px-4 py-2 text-sm\"\n              >\n                íšŒì›ê°€ì…\n              </Button>\n            </>\n          )}\n          {isLoaded && isSignedIn && (\n            <>\n              <PainCheckModal>\n                <Button className=\"rounded-xl bg-primary hover:bg-primary-hover text-white transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5 px-4 py-2 text-sm\">\n                  ì¬í™œ ì½”ìŠ¤\n                </Button>\n              </PainCheckModal>\n              \n              {/* í”„ë¡œí•„ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */}\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    className=\"rounded-full p-2 hover:bg-muted\"\n                    aria-label=\"í”„ë¡œí•„ ë©”ë‰´\"\n                  >\n                    {user?.imageUrl ? (\n                      <img\n                        src={user.imageUrl}\n                        alt=\"í”„ë¡œí•„\"\n                        className=\"w-8 h-8 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <User className=\"w-6 h-6\" strokeWidth={1.5} />\n                    )}\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-48\">\n                  <div className=\"px-3 py-2\">\n                    <p className=\"text-sm font-medium truncate\">\n                      {user?.fullName || user?.primaryEmailAddress?.emailAddress || 'ì‚¬ìš©ì'}\n                    </p>\n                    <p className=\"text-xs text-muted-foreground truncate\">\n                      {user?.primaryEmailAddress?.emailAddress}\n                    </p>\n                  </div>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem\n                    onClick={() => router.push('/mypage')}\n                    className=\"cursor-pointer\"\n                  >\n                    <User className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\n                    ë§ˆì´í˜ì´ì§€\n                  </DropdownMenuItem>\n                  <DropdownMenuItem\n                    onClick={() => router.push('/settings')}\n                    className=\"cursor-pointer\"\n                  >\n                    <Settings className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\n                    ì„¤ì •\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem\n                    onClick={handleSignOut}\n                    className=\"cursor-pointer text-destructive focus:text-destructive\"\n                  >\n                    <LogOut className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\n                    ë¡œê·¸ì•„ì›ƒ\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            </>\n          )}\n        </div>\n\n        {/* ëª¨ë°”ì¼ í–„ë²„ê±° ë²„íŠ¼ */}\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"sm:hidden p-2 text-foreground hover:bg-muted rounded-md transition-colors\"\n          aria-label=\"ë©”ë‰´ ì—´ê¸°/ë‹«ê¸°\"\n        >\n          {isOpen ? (\n            <X className=\"h-6 w-6\" strokeWidth={1.5} />\n          ) : (\n            <Menu className=\"h-6 w-6\" strokeWidth={1.5} />\n          )}\n        </button>\n      </div>\n\n      {/* ëª¨ë°”ì¼ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */}\n      {isOpen && (\n        <div className=\"sm:hidden absolute top-16 left-0 w-full bg-background border-b border-border shadow-lg\">\n          <div className=\"container px-3 py-3 flex flex-col gap-2\">\n            {isLoaded && !isSignedIn && (\n              <>\n                <Button \n                  onClick={() => {\n                    router.push('/sign-in');\n                    setIsOpen(false);\n                  }}\n                  className=\"w-full justify-start rounded-xl bg-primary hover:bg-primary-hover text-white transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5\"\n                >\n                  ë¡œê·¸ì¸\n                </Button>\n                <Button\n                  onClick={() => {\n                    router.push('/sign-up');\n                    setIsOpen(false);\n                  }}\n                  variant=\"secondary\"\n                  className=\"w-full justify-start rounded-xl bg-secondary hover:bg-secondary-hover text-white border-2 border-secondary-dark/30 transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5\"\n                >\n                  íšŒì›ê°€ì…\n                </Button>\n              </>\n            )}\n            {isLoaded && isSignedIn && (\n              <>\n                <PainCheckModal>\n                  <Button \n                    className=\"w-full justify-start rounded-xl bg-primary hover:bg-primary-hover text-white transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5\"\n                    onClick={() => setIsOpen(false)}\n                  >\n                    ì¬í™œ ì½”ìŠ¤\n                  </Button>\n                </PainCheckModal>\n               \n                {/* ëª¨ë°”ì¼ í”„ë¡œí•„ ë©”ë‰´ */}\n                <div className=\"border-t border-border pt-2 mt-2\">\n                  <div className=\"px-2 py-2 mb-2\">\n                    <p className=\"text-sm font-medium truncate\">\n                      {user?.fullName || user?.primaryEmailAddress?.emailAddress || 'ì‚¬ìš©ì'}\n                    </p>\n                    <p className=\"text-xs text-muted-foreground truncate\">\n                      {user?.primaryEmailAddress?.emailAddress}\n                    </p>\n                  </div>\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => {\n                      router.push('/mypage');\n                      setIsOpen(false);\n                    }}\n                    className=\"w-full justify-start\"\n                  >\n                    <User className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\n                    ë§ˆì´í˜ì´ì§€\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => {\n                      router.push('/settings');\n                      setIsOpen(false);\n                    }}\n                    className=\"w-full justify-start\"\n                  >\n                    <Settings className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\n                    ì„¤ì •\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => {\n                      handleSignOut();\n                      setIsOpen(false);\n                    }}\n                    className=\"w-full justify-start text-destructive hover:text-destructive\"\n                  >\n                    <LogOut className=\"w-4 h-4 mr-2\" strokeWidth={1.5} />\n                    ë¡œê·¸ì•„ì›ƒ\n                  </Button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </header>\n  );\n};\n\nexport default Navbar;","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\auth\\social-login-buttons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\body-part-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\coaching-feedback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\course-exercise-card.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ImageOff' is defined but never used.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":11},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":201,"column":9,"nodeType":"JSXOpeningElement","endLine":219,"endColumn":11},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":251,"column":9,"nodeType":"JSXOpeningElement","endLine":263,"endColumn":11},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":290,"column":9,"nodeType":"JSXOpeningElement","endLine":302,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file course-exercise-card.tsx\r\n * @description ì½”ìŠ¤ ìš´ë™ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ (YouTube ì˜ìƒ ì—°ë™)\r\n *\r\n * ì¬í™œ ì½”ìŠ¤ì˜ ê°œë³„ ìš´ë™ì„ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\r\n *\r\n * ì£¼ìš” ê¸°ëŠ¥:\r\n * - ìš´ë™ ì´ë¦„ ë° ì„¤ëª… í‘œì‹œ\r\n * - YouTube ì˜ìƒ ì¸ë„¤ì¼/ìë™ì¬ìƒ ì‹œê°í™”\r\n * - ì‹œê°„/ì„¸íŠ¸/íšŸìˆ˜ ì •ë³´ í‘œì‹œ\r\n * - ì£¼ì˜ì‚¬í•­ í‘œì‹œ (ìˆëŠ” ê²½ìš°)\r\n * - ì„¹ì…˜ë³„ ìŠ¤íƒ€ì¼ êµ¬ë¶„ (ì¤€ë¹„/ë©”ì¸/ë§ˆë¬´ë¦¬)\r\n * - ëª¨ë‹¬ fallback (ìë™ì¬ìƒ ì‹¤íŒ¨ ì‹œ)\r\n *\r\n * @dependencies\r\n * - @/types/body-part-merge: MergedExercise íƒ€ì…\r\n * - lucide-react: ì•„ì´ì½˜\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useState, useCallback } from \"react\";\r\nimport {\r\n  Clock,\r\n  Dumbbell,\r\n  AlertTriangle,\r\n  ImageOff,\r\n  Play,\r\n  X,\r\n  Footprints,\r\n  Activity,\r\n  Sprout,\r\n} from \"lucide-react\";\r\nimport type { MergedExercise } from \"@/types/body-part-merge\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface CourseExerciseCardProps {\r\n  exercise: MergedExercise;\r\n  section: \"warmup\" | \"main\" | \"cooldown\";\r\n  isActive?: boolean;\r\n  onSelect?: () => void;\r\n  onStart?: (exercise: MergedExercise) => void;\r\n}\r\n\r\n/**\r\n * ì„¹ì…˜ë³„ ë¼ë²¨ í…ìŠ¤íŠ¸\r\n */\r\nfunction getSectionLabel(section: \"warmup\" | \"main\" | \"cooldown\"): string {\r\n  switch (section) {\r\n    case \"warmup\":\r\n      return \"ì¤€ë¹„ ìš´ë™\";\r\n    case \"main\":\r\n      return \"ë©”ì¸ ìš´ë™\";\r\n    case \"cooldown\":\r\n      return \"ë§ˆë¬´ë¦¬ ìš´ë™\";\r\n  }\r\n}\r\n\r\n/**\r\n * YouTube ì¸ë„¤ì¼ URL ìƒì„±\r\n */\r\nfunction getYouTubeThumbnail(\r\n  videoId: string,\r\n  quality: \"hq\" | \"maxres\" = \"hq\",\r\n): string {\r\n  // hqdefault.jpgëŠ” ê±°ì˜ ëª¨ë“  ì˜ìƒì—ì„œ ì‚¬ìš© ê°€ëŠ¥\r\n  // maxresdefault.jpgëŠ” ê³ í™”ì§ˆì´ì§€ë§Œ ì¼ë¶€ ì˜ìƒì—ì„œ 404 ë°œìƒ ê°€ëŠ¥\r\n  const qualityMap = {\r\n    hq: \"hqdefault\",\r\n    maxres: \"maxresdefault\",\r\n  };\r\n  return `https://img.youtube.com/vi/${videoId}/${qualityMap[quality]}.jpg`;\r\n}\r\n\r\n/**\r\n * YouTube ì„ë² ë“œ URL ìƒì„± (ìë™ì¬ìƒ + ë¬´ìŒ + ë£¨í”„)\r\n */\r\nfunction getYouTubeEmbedUrl(videoId: string, autoplay: boolean = true): string {\r\n  const params = new URLSearchParams({\r\n    autoplay: autoplay ? \"1\" : \"0\",\r\n    mute: \"1\",\r\n    loop: \"1\",\r\n    playlist: videoId, // ë‹¨ì¼ ì˜ìƒ ë£¨í”„ë¥¼ ìœ„í•´ í•„ìš”\r\n    controls: \"0\",\r\n    modestbranding: \"1\",\r\n    rel: \"0\",\r\n    showinfo: \"0\",\r\n  });\r\n  return `https://www.youtube.com/embed/${videoId}?${params.toString()}`;\r\n}\r\n\r\n/**\r\n * YouTube ì˜ìƒ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸\r\n */\r\nfunction VideoModal({\r\n  videoId,\r\n  exerciseName,\r\n  onClose,\r\n}: {\r\n  videoId: string;\r\n  exerciseName: string;\r\n  onClose: () => void;\r\n}) {\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4\"\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"relative w-full max-w-3xl aspect-video bg-black rounded-lg overflow-hidden\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <iframe\r\n          src={getYouTubeEmbedUrl(videoId, true)}\r\n          title={`${exerciseName} ìš´ë™ ì˜ìƒ`}\r\n          className=\"w-full h-full\"\r\n          allow=\"autoplay; encrypted-media\"\r\n          allowFullScreen\r\n        />\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          className=\"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white rounded-full\"\r\n          onClick={onClose}\r\n        >\r\n          <X className=\"h-5 w-5\" />\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ìš´ë™ ë¯¸ë””ì–´ ì»´í¬ë„ŒíŠ¸ (YouTube ì—°ë™)\r\n */\r\nfunction ExerciseMedia({\r\n  videoUrl,\r\n  gifUrl,\r\n  imageUrl,\r\n  exerciseName,\r\n  isActive,\r\n  onPlayClick,\r\n}: {\r\n  videoUrl?: string;\r\n  gifUrl?: string;\r\n  imageUrl?: string;\r\n  exerciseName: string;\r\n  isActive?: boolean;\r\n  onPlayClick?: () => void;\r\n}) {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [thumbnailQuality, setThumbnailQuality] = useState<\"maxres\" | \"hq\">(\r\n    \"hq\",\r\n  );\r\n\r\n  // YouTube ì˜ìƒì´ ìˆëŠ” ê²½ìš°\r\n  if (videoUrl) {\r\n    const thumbnailUrl = getYouTubeThumbnail(videoUrl, thumbnailQuality);\r\n\r\n    // ì„ íƒëœ ì¹´ë“œ: ì¸ë¼ì¸ ìë™ì¬ìƒ\r\n    if (isActive) {\r\n      return (\r\n        <div className=\"relative w-full aspect-video rounded-lg overflow-hidden bg-black\">\r\n          <iframe\r\n            src={getYouTubeEmbedUrl(videoUrl, true)}\r\n            title={`${exerciseName} ìš´ë™ ì˜ìƒ`}\r\n            className=\"w-full h-full\"\r\n            allow=\"autoplay; encrypted-media\"\r\n            allowFullScreen\r\n          />\r\n          <div className=\"absolute bottom-2 right-2\">\r\n            <Badge\r\n              variant=\"secondary\"\r\n              className=\"text-xs bg-red-600 text-white border-0\"\r\n            >\r\n              â–¶ ì¬ìƒ ì¤‘\r\n            </Badge>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // ê¸°ë³¸ ìƒíƒœ: ì¸ë„¤ì¼ + ì¬ìƒ ë²„íŠ¼\r\n    return (\r\n      <div\r\n        className=\"relative w-full aspect-video rounded-lg overflow-hidden bg-muted/30 cursor-pointer group\"\r\n        onClick={onPlayClick}\r\n      >\r\n        {isLoading && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-muted/50\">\r\n            <div className=\"animate-pulse flex flex-col items-center\">\r\n              <div className=\"h-8 w-8 rounded-full bg-muted-foreground/20\" />\r\n              <div className=\"h-2 w-16 mt-2 rounded bg-muted-foreground/20\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <img\r\n          src={thumbnailUrl}\r\n          alt={`${exerciseName} ì¸ë„¤ì¼`}\r\n          className={cn(\r\n            \"w-full h-full object-cover transition-all duration-300\",\r\n            isLoading ? \"opacity-0\" : \"opacity-100\",\r\n            \"group-hover:scale-105 group-hover:brightness-75\",\r\n          )}\r\n          onLoad={() => setIsLoading(false)}\r\n          onError={() => {\r\n            // maxres ì‹¤íŒ¨ ì‹œ hqë¡œ fallback\r\n            if (thumbnailQuality === \"maxres\") {\r\n              setThumbnailQuality(\"hq\");\r\n            } else {\r\n              setIsLoading(false);\r\n              setHasError(true);\r\n            }\r\n          }}\r\n        />\r\n        {!isLoading && !hasError && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n            <div className=\"w-16 h-16 rounded-full bg-red-600 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform\">\r\n              <Play className=\"h-8 w-8 text-white ml-1\" fill=\"white\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"absolute bottom-2 right-2\">\r\n          <Badge\r\n            variant=\"secondary\"\r\n            className=\"text-xs bg-black/60 text-white border-0\"\r\n          >\r\n            ì˜ìƒ ë³´ê¸°\r\n          </Badge>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // GIFê°€ ìˆëŠ” ê²½ìš° (ê¸°ì¡´ ë¡œì§)\r\n  if (gifUrl) {\r\n    return (\r\n      <div className=\"relative w-full aspect-video rounded-lg overflow-hidden bg-muted/30\">\r\n        {isLoading && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-muted/50\">\r\n            <div className=\"animate-pulse flex flex-col items-center\">\r\n              <div className=\"h-8 w-8 rounded-full bg-muted-foreground/20\" />\r\n              <div className=\"h-2 w-16 mt-2 rounded bg-muted-foreground/20\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <img\r\n          src={gifUrl}\r\n          alt={`${exerciseName} ë™ì‘`}\r\n          className={cn(\r\n            \"w-full h-full object-cover transition-opacity duration-300\",\r\n            isLoading ? \"opacity-0\" : \"opacity-100\",\r\n          )}\r\n          onLoad={() => setIsLoading(false)}\r\n          onError={() => {\r\n            setIsLoading(false);\r\n            setHasError(true);\r\n          }}\r\n        />\r\n        {!isLoading && !hasError && (\r\n          <div className=\"absolute bottom-2 right-2\">\r\n            <Badge\r\n              variant=\"secondary\"\r\n              className=\"text-xs bg-black/50 text-white border-0\"\r\n            >\r\n              GIF\r\n            </Badge>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ì´ë¯¸ì§€ê°€ ìˆëŠ” ê²½ìš°\r\n  if (imageUrl && !hasError) {\r\n    return (\r\n      <div className=\"relative w-full aspect-video rounded-lg overflow-hidden bg-muted/30\">\r\n        {isLoading && (\r\n          <div className=\"absolute inset-0 flex items-center justify-center bg-muted/50\">\r\n            <div className=\"animate-pulse flex flex-col items-center\">\r\n              <div className=\"h-8 w-8 rounded-full bg-muted-foreground/20\" />\r\n              <div className=\"h-2 w-16 mt-2 rounded bg-muted-foreground/20\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n        <img\r\n          src={imageUrl}\r\n          alt={`${exerciseName} ë™ì‘`}\r\n          className={cn(\r\n            \"w-full h-full object-cover transition-opacity duration-300\",\r\n            isLoading ? \"opacity-0\" : \"opacity-100\",\r\n          )}\r\n          onLoad={() => setIsLoading(false)}\r\n          onError={() => {\r\n            setIsLoading(false);\r\n            setHasError(true);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // í”Œë ˆì´ìŠ¤í™€ë”: ì´ë¯¸ì§€ê°€ ì—†ì„ ë•Œ \"í”„ë¦¬ë¯¸ì—„ ì¶”ìƒí™” ë””ìì¸\" ì ìš©\r\n  // ë¶€ìœ„/í‚¤ì›Œë“œë³„ ê·¸ë¼ë””ì–¸íŠ¸ ë° íŒ¨í„´ ê²°ì •\r\n  const getDesignPattern = (name: string) => {\r\n    const n = name.toLowerCase();\r\n\r\n    // 1. í•˜ì²´/ë‹¤ë¦¬/ë¬´ë¦/ë°œëª© (ì•ˆì •ê° ìˆëŠ” ë¸”ë£¨/í‹¸)\r\n    if (\r\n      n.includes(\"ë‹¤ë¦¬\") ||\r\n      n.includes(\"ë¬´ë¦\") ||\r\n      n.includes(\"ë°œëª©\") ||\r\n      n.includes(\"í•˜ì²´\") ||\r\n      n.includes(\"ìŠ¤ì¿¼íŠ¸\") ||\r\n      n.includes(\"ëŸ°ì§€\")\r\n    ) {\r\n      return {\r\n        bg: \"bg-gradient-to-br from-cyan-500 to-blue-600\",\r\n        icon: \"lower\",\r\n        accent: \"text-cyan-100\",\r\n      };\r\n    }\r\n    // 2. ìƒì²´/ì–´ê¹¨/ê°€ìŠ´/íŒ” (ì—ë„ˆì§€ ìˆëŠ” ì˜¤ë Œì§€/ë ˆë“œ)\r\n    if (\r\n      n.includes(\"ì–´ê¹¨\") ||\r\n      n.includes(\"ê°€ìŠ´\") ||\r\n      n.includes(\"íŒ”\") ||\r\n      n.includes(\"í”„ë ˆìŠ¤\") ||\r\n      n.includes(\"í‘¸ì‹œì—…\") ||\r\n      n.includes(\"ì»¬\")\r\n    ) {\r\n      return {\r\n        bg: \"bg-gradient-to-br from-orange-400 to-rose-500\",\r\n        icon: \"upper\",\r\n        accent: \"text-orange-100\",\r\n      };\r\n    }\r\n    // 3. í—ˆë¦¬/ë“±/ì½”ì–´ (ì‹ ë¢°ê° ìˆëŠ” ì¸ë””ê³ /ë°”ì´ì˜¬ë ›)\r\n    if (\r\n      n.includes(\"í—ˆë¦¬\") ||\r\n      n.includes(\"ë“±\") ||\r\n      n.includes(\"ì½”ì–´\") ||\r\n      n.includes(\"í”Œë­í¬\") ||\r\n      n.includes(\"ìŠˆí¼ë§¨\")\r\n    ) {\r\n      return {\r\n        bg: \"bg-gradient-to-br from-indigo-500 to-purple-600\",\r\n        icon: \"core\",\r\n        accent: \"text-indigo-100\",\r\n      };\r\n    }\r\n    // 4. ìŠ¤íŠ¸ë ˆì¹­/ìš”ê°€/ëª© (ì°¨ë¶„í•œ ê·¸ë¦°/ì—ë©”ë„ë“œ/í•‘í¬)\r\n    if (\r\n      n.includes(\"ìŠ¤íŠ¸ë ˆì¹­\") ||\r\n      n.includes(\"ìš”ê°€\") ||\r\n      n.includes(\"ëª©\") ||\r\n      n.includes(\"ì´ì™„\") ||\r\n      n.includes(\"ë¡¤ë§\")\r\n    ) {\r\n      return {\r\n        bg: \"bg-gradient-to-br from-emerald-400 to-teal-600\",\r\n        icon: \"stretch\",\r\n        accent: \"text-emerald-100\",\r\n      };\r\n    }\r\n\r\n    // ê¸°ë³¸ (ëª¨ë˜í•œ ê·¸ë ˆì´/ìŠ¬ë ˆì´íŠ¸)\r\n    return {\r\n      bg: \"bg-gradient-to-br from-slate-500 to-slate-700\",\r\n      icon: \"default\",\r\n      accent: \"text-slate-200\",\r\n    };\r\n  };\r\n\r\n  const pattern = getDesignPattern(exerciseName);\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"relative w-full aspect-video rounded-lg overflow-hidden group shadow-inner\",\r\n        pattern.bg,\r\n      )}\r\n    >\r\n      {/* ë°°ê²½ íŒ¨í„´ (ì¶”ìƒì  ë„í˜• & ì€ì€í•œ ì§ˆê°) */}\r\n      <div className=\"absolute top-[-20%] right-[-10%] w-[70%] h-[140%] bg-white/10 rounded-full blur-3xl transform rotate-12 group-hover:rotate-45 transition-transform duration-1000 ease-in-out opacity-60\" />\r\n      <div className=\"absolute bottom-[-10%] left-[-10%] w-[50%] h-[100%] bg-black/10 rounded-full blur-2xl opacity-40\" />\r\n\r\n      {/* ë…¸ì´ì¦ˆ í…ìŠ¤ì²˜ ì˜¤ë²„ë ˆì´ (ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ëŠë‚Œ) */}\r\n      <div\r\n        className=\"absolute inset-0 opacity-[0.03]\"\r\n        style={{\r\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E\")`,\r\n        }}\r\n      ></div>\r\n\r\n      {/* ì¤‘ì•™ ì•„ì´ì½˜/ê·¸ë˜í”½ */}\r\n      <div className=\"absolute inset-0 flex items-center justify-center p-6\">\r\n        <div className=\"relative z-10 text-center transform group-hover:scale-105 transition-transform duration-500 ease-out\">\r\n          {/* Lucide ì•„ì´ì½˜ ë§¤í•‘ */}\r\n          {pattern.icon === \"stretch\" ? (\r\n            <div className=\"p-4 bg-white/10 rounded-full backdrop-blur-sm border border-white/20 shadow-lg\">\r\n              <Sprout\r\n                className=\"w-10 h-10 text-white drop-shadow-md\"\r\n                strokeWidth={1.5}\r\n              />\r\n            </div>\r\n          ) : pattern.icon === \"upper\" ? (\r\n            <div className=\"p-4 bg-white/10 rounded-full backdrop-blur-sm border border-white/20 shadow-lg\">\r\n              <Dumbbell\r\n                className=\"w-10 h-10 text-white drop-shadow-md\"\r\n                strokeWidth={1.5}\r\n              />\r\n            </div>\r\n          ) : pattern.icon === \"lower\" ? (\r\n            <div className=\"p-4 bg-white/10 rounded-full backdrop-blur-sm border border-white/20 shadow-lg\">\r\n              <Footprints\r\n                className=\"w-10 h-10 text-white drop-shadow-md\"\r\n                strokeWidth={1.5}\r\n              />\r\n            </div>\r\n          ) : pattern.icon === \"core\" ? (\r\n            <div className=\"p-4 bg-white/10 rounded-full backdrop-blur-sm border border-white/20 shadow-lg\">\r\n              <Activity\r\n                className=\"w-10 h-10 text-white drop-shadow-md\"\r\n                strokeWidth={1.5}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-4 bg-white/10 rounded-full backdrop-blur-sm border border-white/20 shadow-lg\">\r\n              <Dumbbell\r\n                className=\"w-10 h-10 text-white drop-shadow-md\"\r\n                strokeWidth={1.5}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <p\r\n            className={cn(\r\n              \"mt-4 text-lg font-bold text-white tracking-wide opacity-95\",\r\n              \"drop-shadow-md px-4 leading-tight\",\r\n            )}\r\n          >\r\n            {exerciseName}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ë¸Œëœë“œ ë±ƒì§€ */}\r\n      <div className=\"absolute bottom-3 right-3 opacity-0 group-hover:opacity-80 transition-opacity duration-300\">\r\n        <Badge\r\n          variant=\"outline\"\r\n          className=\"border-white/30 text-white text-[10px] uppercase font-semibold tracking-wider bg-black/20 backdrop-blur-sm h-5\"\r\n        >\r\n          Rehap Studio\r\n        </Badge>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ì½”ìŠ¤ ìš´ë™ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\r\n */\r\nexport function CourseExerciseCard({\r\n  exercise,\r\n  section,\r\n  isActive = false,\r\n  onSelect,\r\n  onStart,\r\n}: CourseExerciseCardProps) {\r\n  const isMain = section === \"main\";\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const handlePlayClick = useCallback(() => {\r\n    if (onSelect) {\r\n      onSelect();\r\n    } else if (onStart) {\r\n      // onStartê°€ ìˆìœ¼ë©´ íƒ€ì´ë¨¸ ëª¨ë‹¬ íŠ¸ë¦¬ê±° (ìƒìœ„ì—ì„œ ì²˜ë¦¬)\r\n      onStart(exercise);\r\n    } else {\r\n      // ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ë‹¨ìˆœ ë¹„ë””ì˜¤ ëª¨ë‹¬ fallback\r\n      setShowModal(true);\r\n    }\r\n  }, [onSelect, onStart, exercise]);\r\n\r\n  return (\r\n    <>\r\n      <Card\r\n        className={cn(\r\n          \"transition-all duration-300 hover:shadow-lg cursor-pointer\",\r\n          isMain && \"border-primary/30 bg-primary/5\",\r\n          isActive && \"ring-2 ring-primary shadow-lg\",\r\n        )}\r\n        onClick={onSelect}\r\n      >\r\n        <CardContent className=\"p-4 sm:p-6\">\r\n          {/* í—¤ë”: ì„¹ì…˜ ë¼ë²¨ + ìš´ë™ ì´ë¦„ */}\r\n          <div className=\"flex items-start justify-between gap-2 mb-3\">\r\n            <div className=\"flex-1\">\r\n              <Badge\r\n                variant=\"outline\"\r\n                className={cn(\r\n                  \"mb-2 text-xs\",\r\n                  section === \"warmup\" && \"border-blue-500/30 text-blue-500\",\r\n                  section === \"main\" &&\r\n                    \"border-primary text-primary bg-primary/10\",\r\n                  section === \"cooldown\" &&\r\n                    \"border-green-500/30 text-green-500\",\r\n                )}\r\n              >\r\n                {getSectionLabel(section)}\r\n              </Badge>\r\n              <h3 className=\"text-lg sm:text-xl font-semibold text-foreground\">\r\n                {exercise.exerciseTemplateName}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n\r\n          {/* ìš´ë™ ë™ì‘ ì˜ìƒ/ì´ë¯¸ì§€ */}\r\n          <div className=\"mb-4\">\r\n            <ExerciseMedia\r\n              videoUrl={exercise.videoUrl}\r\n              gifUrl={exercise.gifUrl}\r\n              imageUrl={exercise.imageUrl}\r\n              exerciseName={exercise.exerciseTemplateName}\r\n              isActive={isActive}\r\n              onPlayClick={handlePlayClick}\r\n            />\r\n          </div>\r\n\r\n          {/* ìš´ë™ ì„¤ëª… */}\r\n          {exercise.description && (\r\n            <p className=\"text-sm text-muted-foreground mb-4 leading-relaxed\">\r\n              {exercise.description}\r\n            </p>\r\n          )}\r\n\r\n          {/* ìš´ë™ ì •ë³´: ì‹œê°„, ì„¸íŠ¸, íšŸìˆ˜ */}\r\n          <div className=\"flex flex-wrap gap-4 mb-4\">\r\n            {exercise.durationMinutes && (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <Clock className=\"h-4 w-4\" strokeWidth={1.5} />\r\n                <span>{exercise.durationMinutes}ë¶„</span>\r\n              </div>\r\n            )}\r\n\r\n            {(exercise.sets || exercise.reps) && (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <Dumbbell className=\"h-4 w-4\" strokeWidth={1.5} />\r\n                <span>\r\n                  {exercise.sets && exercise.reps\r\n                    ? `${exercise.sets}ì„¸íŠ¸ Ã— ${exercise.reps}íšŒ`\r\n                    : exercise.sets\r\n                      ? `${exercise.sets}ì„¸íŠ¸`\r\n                      : exercise.reps\r\n                        ? `${exercise.reps}íšŒ`\r\n                        : \"\"}\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {exercise.restSeconds && (\r\n              <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                <Clock className=\"h-4 w-4\" strokeWidth={1.5} />\r\n                <span>íœ´ì‹ {exercise.restSeconds}ì´ˆ</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ì§€ì‹œì‚¬í•­ */}\r\n          {exercise.instructions && (\r\n            <div className=\"mb-4 p-3 rounded-lg bg-muted/50 border border-border\">\r\n              <p className=\"text-xs font-medium text-muted-foreground mb-1\">\r\n                ìš´ë™ ë°©ë²•\r\n              </p>\r\n              <p className=\"text-sm text-foreground leading-relaxed\">\r\n                {exercise.instructions}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* ì£¼ì˜ì‚¬í•­ */}\r\n          {exercise.precautions && (\r\n            <div className=\"p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/30\">\r\n              <div className=\"flex items-start gap-2\">\r\n                <AlertTriangle\r\n                  className=\"h-4 w-4 text-yellow-500 mt-0.5 flex-shrink-0\"\r\n                  strokeWidth={1.5}\r\n                />\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-xs font-medium text-yellow-500 mb-1\">\r\n                    ì£¼ì˜ì‚¬í•­\r\n                  </p>\r\n                  <p className=\"text-sm text-yellow-500/90 leading-relaxed\">\r\n                    {exercise.precautions}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* ëª¨ë‹¬ (fallback) */}\r\n      {showModal && exercise.videoUrl && (\r\n        <VideoModal\r\n          videoId={exercise.videoUrl}\r\n          exerciseName={exercise.exerciseTemplateName}\r\n          onClose={() => setShowModal(false)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\exercise-timer-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-card.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Volume2' is defined but never used.","line":24,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file gym-card.tsx\r\n * @description í—¬ìŠ¤ì¥ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\r\n *\r\n * í—¬ìŠ¤ì¥ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œí•©ë‹ˆë‹¤.\r\n *\r\n * ì£¼ìš” ê¸°ëŠ¥:\r\n * - í—¬ìŠ¤ì¥ ê¸°ë³¸ ì •ë³´ í‘œì‹œ (ì´ë¦„, ì£¼ì†Œ, ê±°ë¦¬, ì „í™”ë²ˆí˜¸)\r\n * - ì˜ì—… ìƒíƒœ ë°°ì§€ (ì˜ì—… ì¤‘ / íœ´ë¬´ / ì˜ì—… ì¢…ë£Œ)\r\n * - ì˜¤ëŠ˜ì˜ ìš´ì˜ì‹œê°„ í‘œì‹œ\r\n * - í¸ì˜ì‹œì„¤ ì•„ì´ì½˜ í‘œì‹œ\r\n * - í´ë¦­ ì‹œ í—¬ìŠ¤ì¥ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™\r\n *\r\n * @dependencies\r\n * - @/lib/utils/check-business-status: ì˜ì—… ìƒíƒœ í™•ì¸\r\n * - @/types/gym-search: GymSearchResult íƒ€ì…\r\n * - @/types/operating-hours: OperatingHours íƒ€ì…\r\n * - lucide-react: ì•„ì´ì½˜\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useRouter } from \"next/navigation\";\r\nimport { MapPin, Phone, Clock, Volume2, Dumbbell, Car } from \"lucide-react\";\r\nimport type { GymSearchResult } from \"@/types/gym-search\";\r\nimport { getBusinessStatus } from \"@/lib/utils/check-business-status\";\r\nimport { getDayOfWeek } from \"@/lib/constants/operating-hours\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface GymCardProps {\r\n  gym: GymSearchResult;\r\n}\r\n\r\n/**\r\n * ì˜¤ëŠ˜ì˜ ìš´ì˜ì‹œê°„ í…ìŠ¤íŠ¸ ìƒì„±\r\n */\r\nfunction getTodayOperatingHoursText(gym: GymSearchResult): string {\r\n  if (!gym.operatingHours || gym.operatingHours.length === 0) {\r\n    return \"ìš´ì˜ì‹œê°„ ì •ë³´ ì—†ìŒ\";\r\n  }\r\n\r\n  const now = new Date();\r\n  const dayOfWeek = getDayOfWeek(now);\r\n  const todayHours = gym.operatingHours.find((h) => h.dayOfWeek === dayOfWeek);\r\n\r\n  if (!todayHours) {\r\n    return \"ìš´ì˜ì‹œê°„ ì •ë³´ ì—†ìŒ\";\r\n  }\r\n\r\n  if (todayHours.isClosed) {\r\n    return \"ì˜¤ëŠ˜ íœ´ë¬´\";\r\n  }\r\n\r\n  if (todayHours.openTime === \"00:00\" && todayHours.closeTime === \"23:59\") {\r\n    return \"24ì‹œê°„ ìš´ì˜\";\r\n  }\r\n\r\n  if (todayHours.openTime && todayHours.closeTime) {\r\n    return `ì˜¤ëŠ˜ ${todayHours.openTime} - ${todayHours.closeTime}`;\r\n  }\r\n\r\n  return \"ìš´ì˜ì‹œê°„ ì •ë³´ ì—†ìŒ\";\r\n}\r\n\r\n/**\r\n * ì˜ì—… ìƒíƒœ ë°°ì§€ ì»´í¬ë„ŒíŠ¸\r\n */\r\nfunction BusinessStatusBadge({ gym }: { gym: GymSearchResult }) {\r\n  if (!gym.operatingHours || gym.operatingHours.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const status = getBusinessStatus(gym.operatingHours);\r\n\r\n  if (status.isOpen) {\r\n    return (\r\n      <Badge\r\n        variant=\"outline\"\r\n        className=\"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-500 border-green-500/30\"\r\n      >\r\n        ì˜ì—… ì¤‘\r\n      </Badge>\r\n    );\r\n  }\r\n\r\n  if (status.currentDayHours?.isClosed) {\r\n    return (\r\n      <Badge\r\n        variant=\"outline\"\r\n        className=\"text-xs px-2 py-1 rounded-full bg-gray-500/20 text-gray-500 border-gray-500/30\"\r\n      >\r\n        íœ´ë¬´\r\n      </Badge>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Badge\r\n      variant=\"outline\"\r\n      className=\"text-xs px-2 py-1 rounded-full bg-red-500/20 text-red-500 border-red-500/30\"\r\n    >\r\n      ì˜ì—… ì¢…ë£Œ\r\n    </Badge>\r\n  );\r\n}\r\n\r\n/**\r\n * ê±°ë¦¬ í¬ë§·íŒ… (ë¯¸í„° â†’ í‚¬ë¡œë¯¸í„°)\r\n */\r\nfunction formatDistance(meters: number): string {\r\n  if (meters < 1000) {\r\n    return `${Math.round(meters)}m`;\r\n  }\r\n  return `${(meters / 1000).toFixed(1)}km`;\r\n}\r\n\r\n/**\r\n * í—¬ìŠ¤ì¥ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\r\n */\r\nexport function GymCard({ gym }: GymCardProps) {\r\n  const router = useRouter();\r\n\r\n  const handleClick = () => {\r\n    // TODO: í—¬ìŠ¤ì¥ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™\r\n    // router.push(`/gyms/${gym.id}`);\r\n    console.log(\"í—¬ìŠ¤ì¥ í´ë¦­:\", gym.id);\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      className=\"p-4 sm:p-6 cursor-pointer transition-all duration-300 hover:-translate-y-1 hover:shadow-xl\"\r\n      onClick={handleClick}\r\n      data-testid=\"gym-card\"\r\n    >\r\n      {/* í—¤ë”: ì´ë¦„ + ì˜ì—… ìƒíƒœ ë°°ì§€ */}\r\n      <div className=\"flex items-start justify-between gap-2 mb-3\">\r\n        <h3 className=\"text-lg sm:text-xl font-semibold text-foreground flex-1\">\r\n          {gym.name}\r\n        </h3>\r\n        <BusinessStatusBadge gym={gym} />\r\n      </div>\r\n\r\n      {/* ì£¼ì†Œ + ê±°ë¦¬ */}\r\n      <div className=\"flex items-start gap-2 mb-3 text-sm text-muted-foreground\">\r\n        <MapPin className=\"h-4 w-4 mt-0.5 flex-shrink-0\" strokeWidth={1.5} />\r\n        <div className=\"flex-1\">\r\n          <p className=\"leading-relaxed\">{gym.address}</p>\r\n          <p className=\"text-xs mt-1 text-muted-foreground/80\">\r\n            {formatDistance(gym.distanceMeters)} ê±°ë¦¬\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ìš´ì˜ì‹œê°„ */}\r\n      <div className=\"flex items-start gap-2 mb-3 text-sm text-muted-foreground\">\r\n        <Clock className=\"h-4 w-4 mt-0.5 flex-shrink-0\" strokeWidth={1.5} />\r\n        <span>{getTodayOperatingHoursText(gym)}</span>\r\n      </div>\r\n\r\n      {/* ì „í™”ë²ˆí˜¸ */}\r\n      {gym.phone && (\r\n        <div className=\"flex items-center gap-2 mb-3 text-sm text-muted-foreground\">\r\n          <Phone className=\"h-4 w-4 flex-shrink-0\" strokeWidth={1.5} />\r\n          <a\r\n            href={`tel:${gym.phone}`}\r\n            onClick={(e) => e.stopPropagation()}\r\n            className=\"hover:text-primary transition-colors\"\r\n          >\r\n            {gym.phone}\r\n          </a>\r\n        </div>\r\n      )}\r\n\r\n      {/* í¸ì˜ì‹œì„¤ ì•„ì´ì½˜ */}\r\n      <div className=\"flex flex-wrap gap-2 mt-4 pt-4 border-t border-border\">\r\n        {gym.facilities.hasRehabEquipment && (\r\n          <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\r\n            <Dumbbell className=\"h-3 w-3\" strokeWidth={1.5} />\r\n            <span>ì¬í™œ ê¸°êµ¬</span>\r\n          </div>\r\n        )}\r\n        {gym.facilities.hasParking && (\r\n          <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\r\n            <Car className=\"h-3 w-3\" strokeWidth={1.5} />\r\n            <span>ì£¼ì°¨</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* ìƒì„¸ë³´ê¸° ë²„íŠ¼ */}\r\n      <div className=\"mt-4 pt-4 border-t border-border\">\r\n        <Button\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            router.push(`/gyms/${gym.id}`);\r\n          }}\r\n          className=\"w-full bg-primary hover:bg-primary-hover text-white transition-all duration-300 shadow-lg hover:shadow-xl hover:-translate-y-0.5\"\r\n        >\r\n          ìƒì„¸ë³´ê¸°\r\n        </Button>\r\n      </div>\r\n    </Card>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-actions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-basic-info.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-facilities.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-map-directions.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1113,1116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1113,1116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1156,1159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1156,1159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1200,1203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1200,1203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-operating-hours.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-report-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-report-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\gym-reviews.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6627,6630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6627,6630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":213,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6697,6700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6697,6700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\review-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-detail\\review-vote-button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\gym-map.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1602,1605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1602,1605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1643,1646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1643,1646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1687,1690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1687,1690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1731,1734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1731,1734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\home-features-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\home-hero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\language-switcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\layout\\main-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\layout\\mobile-container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\layout\\page-wrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\layout\\responsive-container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\naver-map.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\pain-after-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\pain-check-modal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HeartPulse' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSubmit' is assigned a value but never used.","line":289,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":289,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  HeartPulse,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Check,\r\n  RefreshCw,\r\n  Clock,\r\n} from \"lucide-react\";\r\nimport { savePainProfile } from \"@/actions/pain-check\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport StepLoader from \"@/components/ui/step-loader\";\r\nimport { BodyPartSelector } from \"@/components/body-part-selector\";\r\nimport type { BodyPartSelection, MergeRequest } from \"@/types/body-part-merge\";\r\n\r\n/**\r\n * í†µì¦ ì²´í¬ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸\r\n *\r\n * í”Œë¡œíŒ… ë²„íŠ¼ì„ í†µí•´ í†µì¦ ìƒíƒœë¥¼ ì²´í¬í•˜ëŠ” ëª¨ë‹¬ì„ ì—½ë‹ˆë‹¤.\r\n * 4ë‹¨ê³„ ì§ˆë¬¸ í¼ì„ í†µí•´ ì‚¬ìš©ìì˜ í†µì¦ í”„ë¡œí•„ì„ ìˆ˜ì§‘í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.\r\n *\r\n * ì§ˆë¬¸ ë‹¨ê³„:\r\n * 1. ë¶€ìœ„ ì„ íƒ (BodyPart)\r\n * 2. í†µì¦ ì •ë„ (1-5, í†µì¦ ì‹ í˜¸ë“± ì‹œìŠ¤í…œ)\r\n * 3. ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°êµ¬ (EquipmentType, ë³µìˆ˜ ì„ íƒ)\r\n * 4. ìš´ë™ ê²½í—˜ (ê±°ì˜ ì•ˆ í•¨/ì£¼1-2íšŒ/ì£¼3íšŒ ì´ìƒ)\r\n */\r\n\r\ninterface BodyPart {\r\n  id: string;\r\n  name: string;\r\n  displayOrder: number;\r\n}\r\n\r\ninterface EquipmentType {\r\n  id: string;\r\n  name: string;\r\n  displayOrder: number;\r\n}\r\n\r\ninterface PainCheckModalProps {\r\n  children: React.ReactNode;\r\n  initialValues?: {\r\n    bodyPartNames?: string[];\r\n    painLevel?: number;\r\n  };\r\n  defaultOpen?: boolean;\r\n}\r\n\r\nexport function PainCheckModal({\r\n  children,\r\n  initialValues,\r\n  defaultOpen = false,\r\n}: PainCheckModalProps) {\r\n  const router = useRouter();\r\n  const { user } = useUser();\r\n  const [open, setOpen] = useState(defaultOpen);\r\n  const [step, setStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // í¼ ë°ì´í„°\r\n  const [selectedBodyParts, setSelectedBodyParts] = useState<\r\n    BodyPartSelection[]\r\n  >([]);\r\n  const [equipmentAvailable, setEquipmentAvailable] = useState<string[]>([]);\r\n  // ğŸ†• Step 4: ìš´ë™ ì‹œê°„ ì„ íƒ\r\n  const [totalDurationMinutes, setTotalDurationMinutes] = useState<\r\n    60 | 90 | 120\r\n  >(60);\r\n  const [experienceLevel, setExperienceLevel] = useState<string>(\"\");\r\n\r\n  // ë°ì´í„° ë¡œë”©\r\n  const [bodyParts, setBodyParts] = useState<BodyPart[]>([]);\r\n  const [equipmentTypes, setEquipmentTypes] = useState<EquipmentType[]>([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [dataLoadError, setDataLoadError] = useState<string | null>(null);\r\n\r\n  // ìƒíƒœ ì´ˆê¸°í™” í•¨ìˆ˜\r\n  const resetState = () => {\r\n    setStep(1);\r\n    setSelectedBodyParts([]);\r\n    setEquipmentAvailable([]);\r\n    setExperienceLevel(\"\");\r\n    setTotalDurationMinutes(60);\r\n    setSuccess(false);\r\n    setError(null);\r\n    setDataLoadError(null);\r\n    setIsSaving(false);\r\n  };\r\n\r\n  // ëª¨ë‹¬ ì—´ë¦¼/ë‹«í˜ ì²˜ë¦¬\r\n  const handleOpenChange = (isOpen: boolean) => {\r\n    setOpen(isOpen);\r\n    if (!isOpen) {\r\n      // ëª¨ë‹¬ì´ ë‹«í ë•Œ ìƒíƒœ ì´ˆê¸°í™”\r\n      resetState();\r\n    } else {\r\n      // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ë°ì´í„° ë¡œë“œ\r\n      if (bodyParts.length === 0) {\r\n        loadData();\r\n      }\r\n    }\r\n  };\r\n\r\n  // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ë°ì´í„° ë¡œë“œ\r\n  useEffect(() => {\r\n    if (open && bodyParts.length === 0) {\r\n      loadData();\r\n    }\r\n  }, [open, bodyParts.length]);\r\n\r\n  // ğŸ†• ì´ˆê¸° ë°ì´í„° ì ìš© (ë°ì´í„° ë¡œë“œ ì™„ë£Œ í›„)\r\n  useEffect(() => {\r\n    if (open && bodyParts.length > 0 && initialValues?.bodyPartNames) {\r\n      const matchedParts = bodyParts.filter((bp) =>\r\n        initialValues.bodyPartNames?.includes(bp.name),\r\n      );\r\n\r\n      if (matchedParts.length > 0) {\r\n        const selection: BodyPartSelection[] = matchedParts.map((bp) => ({\r\n          bodyPartId: bp.id,\r\n          bodyPartName: bp.name,\r\n          painLevel: initialValues.painLevel || 1,\r\n        }));\r\n        setSelectedBodyParts(selection);\r\n      }\r\n    }\r\n  }, [open, bodyParts, initialValues]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setDataLoading(true);\r\n      setDataLoadError(null);\r\n      const response = await fetch(\"/api/pain-check-data\");\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setBodyParts(result.data.bodyParts);\r\n        setEquipmentTypes(result.data.equipmentTypes);\r\n      } else {\r\n        throw new Error(\r\n          result.error || \"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\r\n        );\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Load data error:\", err);\r\n      const errorMessage =\r\n        err instanceof Error\r\n          ? err.message\r\n          : \"ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\";\r\n      setDataLoadError(errorMessage);\r\n    } finally {\r\n      setDataLoading(false);\r\n    }\r\n  };\r\n\r\n  // \"ë§¨ëª¸\" ê¸°êµ¬ ID ì°¾ê¸°\r\n  const noneEquipmentId = equipmentTypes.find((eq) => eq.name === \"ë§¨ëª¸\")?.id;\r\n\r\n  // ê¸°êµ¬ ì„ íƒ í† ê¸€ (ê°œì„ : \"ë§¨ëª¸\" ì²˜ë¦¬ ë¡œì§ ì¶”ê°€)\r\n  const toggleEquipment = (equipmentId: string) => {\r\n    setEquipmentAvailable((prev) => {\r\n      const isNone = equipmentId === noneEquipmentId;\r\n      const isCurrentlySelected = prev.includes(equipmentId);\r\n\r\n      if (isNone) {\r\n        // \"ë§¨ëª¸\" ì„ íƒ ì‹œ: ë‹¤ë¥¸ ëª¨ë“  ê¸°êµ¬ í•´ì œí•˜ê³  \"ë§¨ëª¸\"ë§Œ ì„ íƒ\r\n        return isCurrentlySelected ? [] : [equipmentId];\r\n      } else {\r\n        // ë‹¤ë¥¸ ê¸°êµ¬ ì„ íƒ ì‹œ: \"ë§¨ëª¸\"ì´ ìˆìœ¼ë©´ ì œê±°í•˜ê³  ì„ íƒí•œ ê¸°êµ¬ ì¶”ê°€/ì œê±°\r\n        const withoutNone = prev.filter((id) => id !== noneEquipmentId);\r\n        if (isCurrentlySelected) {\r\n          return withoutNone.filter((id) => id !== equipmentId);\r\n        } else {\r\n          return [...withoutNone, equipmentId];\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™\r\n  const handleNext = () => {\r\n    // ë‹¨ê³„ë³„ ìœ íš¨ì„± ê²€ì‚¬ ë° êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€\r\n    if (step === 1) {\r\n      if (selectedBodyParts.length === 0) {\r\n        setError(\r\n          \"ìµœì†Œ 1ê°œ ì´ìƒì˜ ë¶€ìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”. ê°€ì¥ ë¶ˆí¸í•œ ë¶€ìœ„ë¥¼ ì„ íƒí•˜ì‹œë©´ ë” ì •í™•í•œ ì½”ìŠ¤ë¥¼ ì¶”ì²œë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\r\n        );\r\n        return;\r\n      }\r\n      // ëª¨ë“  ì„ íƒëœ ë¶€ìœ„ì— í†µì¦ ì •ë„ê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\r\n      const hasInvalidPainLevel = selectedBodyParts.some(\r\n        (bp) => !bp.painLevel || bp.painLevel < 1 || bp.painLevel > 5,\r\n      );\r\n      if (hasInvalidPainLevel) {\r\n        setError(\"ëª¨ë“  ì„ íƒëœ ë¶€ìœ„ì— í†µì¦ ì •ë„ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.\");\r\n        return;\r\n      }\r\n    }\r\n    if (step === 2) {\r\n      if (equipmentAvailable.length === 0) {\r\n        setError(\r\n          \"ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°êµ¬ë¥¼ ìµœì†Œ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”. ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°êµ¬ê°€ ì—†ë‹¤ë©´ 'ë§¨ëª¸'ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\",\r\n        );\r\n        return;\r\n      }\r\n    }\r\n    if (step === 3) {\r\n      if (!experienceLevel) {\r\n        setError(\r\n          \"ìš´ë™ ê²½í—˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”. í‰ì†Œ ìš´ë™ ë¹ˆë„ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ì ì ˆí•œ ë‚œì´ë„ì˜ ì½”ìŠ¤ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤.\",\r\n        );\r\n        return;\r\n      }\r\n    }\r\n    // Step 4ëŠ” ê¸°ë³¸ê°’ì´ ìˆìœ¼ë¯€ë¡œ ë³„ë„ ê²€ì¦ ë¶ˆí•„ìš”\r\n\r\n    setError(null);\r\n    if (step < 4) {\r\n      setStep(step + 1);\r\n    } else {\r\n      handleNavigateToRehab();\r\n    }\r\n  };\r\n\r\n  // ì´ì „ ë‹¨ê³„ë¡œ ì´ë™\r\n  const handlePrev = () => {\r\n    if (step > 1) {\r\n      setStep(step - 1);\r\n      setError(null);\r\n    }\r\n  };\r\n\r\n  // ğŸ†• ì½”ìŠ¤ ìƒì„± í˜ì´ì§€ë¡œ ì´ë™ (localStorage ì €ì¥ í›„ /rehab ë¦¬ë‹¤ì´ë ‰íŠ¸)\r\n  const handleNavigateToRehab = () => {\r\n    // ìœ íš¨ì„± ê²€ì‚¬\r\n    if (\r\n      selectedBodyParts.length === 0 ||\r\n      !experienceLevel ||\r\n      equipmentAvailable.length === 0\r\n    ) {\r\n      setError(\"ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // MergeRequest í˜•ì‹ìœ¼ë¡œ ë³€í™˜\r\n      const mergeRequest: MergeRequest = {\r\n        bodyParts: selectedBodyParts,\r\n        painLevel: Math.max(...selectedBodyParts.map((bp) => bp.painLevel)),\r\n        equipmentAvailable,\r\n        experienceLevel,\r\n        totalDurationMinutes,\r\n      };\r\n\r\n      // localStorageì— ì €ì¥\r\n      localStorage.setItem(\"rehabCourseRequest\", JSON.stringify(mergeRequest));\r\n\r\n      // ëª¨ë‹¬ ë‹«ê³  /rehabë¡œ ì´ë™\r\n      setOpen(false);\r\n      router.push(\"/rehab\");\r\n    } catch (err) {\r\n      console.error(\"localStorage save error:\", err);\r\n      setError(\"ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\");\r\n    }\r\n  };\r\n\r\n  // í¼ ì œì¶œ (ê¸°ì¡´ í•¨ìˆ˜ - í•„ìš” ì‹œ ìˆ˜ë™ í†µì¦ ì²´í¬ìš©ìœ¼ë¡œ ìœ ì§€)\r\n  const handleSubmit = async () => {\r\n    // ìµœì¢… ìœ íš¨ì„± ê²€ì‚¬\r\n    if (\r\n      selectedBodyParts.length === 0 ||\r\n      !experienceLevel ||\r\n      equipmentAvailable.length === 0\r\n    ) {\r\n      setError(\"ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. ë¹ ì§„ í•­ëª©ì´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    // ì¸ì¦ í™•ì¸\r\n    if (!user?.id) {\r\n      setError(\"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // ê° ë¶€ìœ„ë³„ë¡œ ë³„ë„ì˜ í”„ë¡œí•„ ì €ì¥ (ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì—†ì´ ê¸°ì¡´ êµ¬ì¡° í™œìš©)\r\n      const savePromises = selectedBodyParts.map((bodyPart) =>\r\n        savePainProfile(user.id, {\r\n          bodyPartId: bodyPart.bodyPartId,\r\n          painLevel: bodyPart.painLevel,\r\n          experienceLevel,\r\n          equipmentAvailable,\r\n        }),\r\n      );\r\n\r\n      // ìµœì†Œ ë¡œë”© ì‹œê°„ì„ ë³´ì¥í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ\r\n      const delayPromise = new Promise((resolve) => setTimeout(resolve, 1500)); // ìµœì†Œ 1.5ì´ˆ ë¡œë”©\r\n\r\n      const results = await Promise.all(savePromises);\r\n      await delayPromise; // ì €ì¥ì´ ë¹¨ë¦¬ ëë‚˜ë„ ìµœì†Œ 1.5ì´ˆëŠ” ë¡œë”© í‘œì‹œ\r\n\r\n      // ëª¨ë“  ì €ì¥ì´ ì„±ê³µí–ˆëŠ”ì§€ í™•ì¸\r\n      const allSuccess = results.every((result) => result.success);\r\n      const firstError = results.find((result) => !result.success);\r\n\r\n      if (allSuccess) {\r\n        setSuccess(true);\r\n        // 2ì´ˆ í›„ ëª¨ë‹¬ ë‹«ê¸° (ìƒíƒœ ì´ˆê¸°í™”ëŠ” handleOpenChangeì—ì„œ ì²˜ë¦¬)\r\n        setTimeout(() => {\r\n          setOpen(false);\r\n        }, 2000);\r\n      } else {\r\n        // êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ\r\n        const errorMessage =\r\n          firstError?.error ||\r\n          \"ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\";\r\n        setError(errorMessage);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Submit error:\", err);\r\n      const errorMessage =\r\n        err instanceof Error\r\n          ? `ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${err.message}`\r\n          : \"ì €ì¥ ì¤‘ ì˜ˆê¸°ì¹˜ ì•Šì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\";\r\n      setError(errorMessage);\r\n    } finally {\r\n      setIsSaving(false);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={handleOpenChange}>\r\n      <DialogTrigger asChild>{children}</DialogTrigger>\r\n      <DialogContent className=\"rounded-2xl w-[95vw] md:w-[500px] max-h-[90vh] overflow-y-auto p-4 sm:p-6\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-2xl\">ì˜¤ëŠ˜ì˜ í†µì¦ ì²´í¬</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        {isSaving ? (\r\n          <div className=\"h-[400px] flex items-center justify-center\">\r\n            <StepLoader />\r\n          </div>\r\n        ) : dataLoading ? (\r\n          <div className=\"py-8 text-center\">\r\n            <div className=\"text-muted-foreground mb-2\">\r\n              ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”\r\n            </div>\r\n          </div>\r\n        ) : dataLoadError ? (\r\n          <div className=\"py-8 text-center\">\r\n            <div className=\"text-destructive mb-4\">{dataLoadError}</div>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={loadData}\r\n              className=\"gap-2\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4\" strokeWidth={1.5} />\r\n              ë‹¤ì‹œ ì‹œë„\r\n            </Button>\r\n          </div>\r\n        ) : success ? (\r\n          <div className=\"py-8 text-center\">\r\n            <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-primary/20 flex items-center justify-center\">\r\n              <Check className=\"w-8 h-8 text-primary\" strokeWidth={1.5} />\r\n            </div>\r\n            <p className=\"text-lg font-semibold text-foreground mb-2\">\r\n              í†µì¦ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              ì•ˆì „í•œ íšŒë³µì„ ìœ„í•´ ë…¸ë ¥í•˜ì„¸ìš”\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"py-4\">\r\n            {/* ì§„í–‰ í‘œì‹œ */}\r\n            <div className=\"mb-6\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"text-sm text-muted-foreground\">\r\n                  {step} / 4\r\n                </span>\r\n                <span className=\"text-sm font-medium text-foreground\">\r\n                  {step === 1 && \"ë¶€ìœ„ ì„ íƒ\"}\r\n                  {step === 2 && \"ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°êµ¬\"}\r\n                  {step === 3 && \"ìš´ë™ ê²½í—˜\"}\r\n                  {step === 4 && \"ìš´ë™ ì‹œê°„\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"w-full bg-muted rounded-full h-2\">\r\n                <div\r\n                  className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${(step / 4) * 100}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* ì—ëŸ¬ ë©”ì‹œì§€ */}\r\n            {error && (\r\n              <div className=\"mb-4 p-3 rounded-lg bg-destructive/10 text-destructive text-sm\">\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 1: ë¶€ìœ„ ì„ íƒ (ë‹¤ì¤‘ ì„ íƒ + í†µì¦ ì •ë„) */}\r\n            {step === 1 && (\r\n              <div className=\"space-y-3\">\r\n                <BodyPartSelector\r\n                  bodyParts={bodyParts}\r\n                  selectedBodyParts={selectedBodyParts}\r\n                  onSelectionChange={setSelectedBodyParts}\r\n                  maxSelections={5}\r\n                  disabled={loading || isSaving}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 2: ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°êµ¬ */}\r\n            {step === 2 && (\r\n              <div className=\"space-y-4\">\r\n                <p className=\"text-muted-foreground mb-4\">\r\n                  í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ ê¸°êµ¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš” (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mb-3\">\r\n                  ğŸ’¡ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°êµ¬ê°€ ì—†ë‹¤ë©´ &apos;ë§¨ëª¸&apos;ì„\r\n                  ì„ íƒí•´ì£¼ì„¸ìš”\r\n                </p>\r\n                <div className=\"grid grid-cols-2 gap-3\">\r\n                  {equipmentTypes.map((equipment) => (\r\n                    <button\r\n                      key={equipment.id}\r\n                      type=\"button\"\r\n                      onClick={() => toggleEquipment(equipment.id)}\r\n                      className={cn(\r\n                        \"p-4 rounded-xl border-2 transition-all duration-200 text-left relative\",\r\n                        equipmentAvailable.includes(equipment.id)\r\n                          ? \"border-primary bg-primary/10 shadow-md\"\r\n                          : \"border-border hover:border-primary/50 hover:bg-accent\",\r\n                      )}\r\n                    >\r\n                      <span className=\"font-medium text-foreground\">\r\n                        {equipment.name}\r\n                      </span>\r\n                      {equipmentAvailable.includes(equipment.id) && (\r\n                        <Check\r\n                          className=\"absolute top-2 right-2 w-5 h-5 text-primary\"\r\n                          strokeWidth={1.5}\r\n                        />\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Step 3: ìš´ë™ ê²½í—˜ */}\r\n            {step === 3 && (\r\n              <div className=\"space-y-4\">\r\n                <p className=\"text-muted-foreground mb-4\">\r\n                  í‰ì†Œ ìš´ë™ ë¹ˆë„ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?\r\n                </p>\r\n                <div className=\"space-y-3\">\r\n                  {[\r\n                    { value: \"rarely\", label: \"ê±°ì˜ ì•ˆ í•¨\" },\r\n                    { value: \"weekly_1_2\", label: \"ì£¼ 1-2íšŒ\" },\r\n                    { value: \"weekly_3_plus\", label: \"ì£¼ 3íšŒ ì´ìƒ\" },\r\n                  ].map((option) => (\r\n                    <button\r\n                      key={option.value}\r\n                      type=\"button\"\r\n                      onClick={() => setExperienceLevel(option.value)}\r\n                      className={cn(\r\n                        \"w-full p-4 rounded-xl border-2 transition-all duration-200 text-left\",\r\n                        experienceLevel === option.value\r\n                          ? \"border-primary bg-primary/10 shadow-md\"\r\n                          : \"border-border hover:border-primary/50 hover:bg-accent\",\r\n                      )}\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <span className=\"font-medium text-foreground\">\r\n                          {option.label}\r\n                        </span>\r\n                        {experienceLevel === option.value && (\r\n                          <Check\r\n                            className=\"w-5 h-5 text-primary\"\r\n                            strokeWidth={1.5}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ğŸ†• Step 4: ìš´ë™ ì‹œê°„ ì„ íƒ */}\r\n            {step === 4 && (\r\n              <div className=\"space-y-4\">\r\n                <p className=\"text-muted-foreground mb-4\">\r\n                  ì›í•˜ì‹œëŠ” ìš´ë™ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”\r\n                </p>\r\n                <div className=\"space-y-3\">\r\n                  {[\r\n                    {\r\n                      value: 60 as const,\r\n                      label: \"60ë¶„\",\r\n                      description: \"ì§§ì€ ì‹œê°„ ì§‘ì¤‘\",\r\n                    },\r\n                    {\r\n                      value: 90 as const,\r\n                      label: \"90ë¶„\",\r\n                      description: \"í‘œì¤€ ìš´ë™ ì‹œê°„\",\r\n                    },\r\n                    {\r\n                      value: 120 as const,\r\n                      label: \"120ë¶„\",\r\n                      description: \"ì¶©ë¶„í•œ ì¬í™œ ì‹œê°„\",\r\n                    },\r\n                  ].map((option) => (\r\n                    <button\r\n                      key={option.value}\r\n                      type=\"button\"\r\n                      onClick={() => setTotalDurationMinutes(option.value)}\r\n                      data-testid={`duration-${option.value}`}\r\n                      className={cn(\r\n                        \"w-full p-4 rounded-xl border-2 transition-all duration-200 text-left\",\r\n                        totalDurationMinutes === option.value\r\n                          ? \"border-primary bg-primary/10 shadow-md\"\r\n                          : \"border-border hover:border-primary/50 hover:bg-accent\",\r\n                      )}\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Clock\r\n                              className=\"w-5 h-5 text-primary\"\r\n                              strokeWidth={1.5}\r\n                            />\r\n                            <span className=\"text-xl font-bold text-foreground\">\r\n                              {option.label}\r\n                            </span>\r\n                          </div>\r\n                          <span className=\"text-sm text-muted-foreground\">\r\n                            {option.description}\r\n                          </span>\r\n                        </div>\r\n                        {totalDurationMinutes === option.value && (\r\n                          <Check\r\n                            className=\"w-5 h-5 text-primary\"\r\n                            strokeWidth={1.5}\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* ë²„íŠ¼ ì˜ì—­ */}\r\n            <div className=\"flex gap-3 mt-6\">\r\n              {step > 1 && (\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={handlePrev}\r\n                  disabled={loading}\r\n                  className=\"flex-1\"\r\n                >\r\n                  <ChevronLeft className=\"w-4 h-4\" strokeWidth={1.5} />\r\n                  ì´ì „\r\n                </Button>\r\n              )}\r\n              <Button\r\n                type=\"button\"\r\n                onClick={handleNext}\r\n                disabled={loading}\r\n                data-testid={step === 4 ? \"generate-course\" : undefined}\r\n                className={cn(\"flex-1\", step === 1 && \"ml-auto\")}\r\n              >\r\n                {step === 4 ? (\r\n                  loading ? (\r\n                    \"ì½”ìŠ¤ ìƒì„± ì¤‘...\"\r\n                  ) : (\r\n                    \"ì½”ìŠ¤ ìƒì„±í•˜ê¸°\"\r\n                  )\r\n                ) : (\r\n                  <>\r\n                    ë‹¤ìŒ\r\n                    <ChevronRight className=\"w-4 h-4\" strokeWidth={1.5} />\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\profile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\providers\\client-providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\providers\\sync-user-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\providers\\theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\session-player.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Pause' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":4},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronDown' is defined but never used.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":14},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleStartSession'. Either include it or remove the dependency array.","line":96,"column":6,"nodeType":"ArrayExpression","endLine":96,"endColumn":33,"suggestions":[{"desc":"Update the dependencies array to be: [autoStart, handleStartSession, session.status]","fix":{"range":[2477,2504],"text":"[autoStart, handleStartSession, session.status]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useMemo, useEffect } from 'react';\r\nimport { ExerciseTimerModal } from './exercise-timer-modal';\r\nimport { SessionProgressHeader } from './session-progress-bar';\r\nimport { SessionResultModal } from './session-result-modal';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  Play,\r\n  Pause,\r\n  SkipForward,\r\n  SkipBack,\r\n  X,\r\n  ListOrdered,\r\n  ChevronDown,\r\n  ChevronUp,\r\n} from 'lucide-react';\r\nimport { useSessionState, type SessionResult, type UserFeedback } from '@/hooks/use-session-state';\r\nimport type { MergedExercise } from '@/types/body-part-merge';\r\n\r\ninterface BodyPartInfo {\r\n  bodyPartId: string;\r\n  bodyPartName: string;\r\n  painBefore: number;\r\n}\r\n\r\ninterface SessionPlayerProps {\r\n  /** ìš´ë™ ëª©ë¡ */\r\n  exercises: MergedExercise[];\r\n  /** ì½”ìŠ¤ ID */\r\n  courseId?: string;\r\n  /** ì½”ìŠ¤ ì´ë¦„ */\r\n  courseName?: string;\r\n  /** ë¶€ìœ„ë³„ í†µì¦ ì •ë³´ */\r\n  bodyParts: BodyPartInfo[];\r\n  /** ì—°ì† ìš´ë™ ì¼ìˆ˜ */\r\n  streak?: number;\r\n  /** ì„¸ì…˜ ì™„ë£Œ ì½œë°± */\r\n  onComplete: (result: SessionResult, feedback: UserFeedback) => Promise<void>;\r\n  /** ì„¸ì…˜ ì¢…ë£Œ ì½œë°± */\r\n  onExit: () => void;\r\n  /** ìë™ ì‹œì‘ ì—¬ë¶€ */\r\n  autoStart?: boolean;\r\n}\r\n\r\n/**\r\n * ì„¸ì…˜ í”Œë ˆì´ì–´ ì»´í¬ë„ŒíŠ¸\r\n *\r\n * ì „ì²´ ìš´ë™ ì½”ìŠ¤ë¥¼ ì—°ì†ìœ¼ë¡œ ì‹¤í–‰í•˜ê³ , ì§„í–‰ ìƒí™©ì„ ì¶”ì í•˜ë©°,\r\n * ì™„ë£Œ í›„ ê²°ê³¼ ë° ì½”ì¹­ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤.\r\n */\r\nexport function SessionPlayer({\r\n  exercises,\r\n  courseId,\r\n  courseName = 'ì¬í™œ ìš´ë™ ì½”ìŠ¤',\r\n  bodyParts,\r\n  streak = 0,\r\n  onComplete,\r\n  onExit,\r\n  autoStart = false,\r\n}: SessionPlayerProps) {\r\n  const [isTimerOpen, setIsTimerOpen] = useState(false);\r\n  const [isResultOpen, setIsResultOpen] = useState(false);\r\n  const [showExitConfirm, setShowExitConfirm] = useState(false);\r\n  const [showExerciseList, setShowExerciseList] = useState(false);\r\n  const [sessionResultData, setSessionResultData] = useState<SessionResult | null>(null);\r\n\r\n  // ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬\r\n  const session = useSessionState({\r\n    exercises,\r\n    courseId,\r\n    onSessionComplete: (result) => {\r\n      setSessionResultData(result);\r\n      setIsTimerOpen(false);\r\n      setIsResultOpen(true);\r\n    },\r\n  });\r\n\r\n  // ìë™ ì‹œì‘\r\n  useEffect(() => {\r\n    if (autoStart && session.status === 'idle') {\r\n      handleStartSession();\r\n    }\r\n  }, [autoStart, session.status]);\r\n\r\n  // ì„¸ì…˜ ì‹œì‘\r\n  const handleStartSession = useCallback(() => {\r\n    session.startSession();\r\n    setIsTimerOpen(true);\r\n  }, [session]);\r\n\r\n  // ë‹¤ìŒ ìš´ë™ (íƒ€ì´ë¨¸ ëª¨ë‹¬ì—ì„œ í˜¸ì¶œ)\r\n  const handleNextExercise = useCallback(() => {\r\n    session.nextExercise('completed');\r\n  }, [session]);\r\n\r\n  // ìš´ë™ ê±´ë„ˆë›°ê¸°\r\n  const handleSkipExercise = useCallback(() => {\r\n    session.skipExercise();\r\n  }, [session]);\r\n\r\n  // ì´ì „ ìš´ë™\r\n  const handlePreviousExercise = useCallback(() => {\r\n    session.previousExercise();\r\n  }, [session]);\r\n\r\n  // íƒ€ì´ë¨¸ ëª¨ë‹¬ ë‹«ê¸°\r\n  const handleTimerClose = useCallback(() => {\r\n    if (session.status === 'running') {\r\n      session.pauseSession();\r\n    }\r\n    setIsTimerOpen(false);\r\n  }, [session]);\r\n\r\n  // íƒ€ì´ë¨¸ ì¬ê°œ\r\n  const handleResumeTimer = useCallback(() => {\r\n    session.resumeSession();\r\n    setIsTimerOpen(true);\r\n  }, [session]);\r\n\r\n  // ì„¸ì…˜ ì¢…ë£Œ í™•ì¸\r\n  const handleExitRequest = useCallback(() => {\r\n    if (session.status === 'running' || session.status === 'paused') {\r\n      setShowExitConfirm(true);\r\n    } else {\r\n      onExit();\r\n    }\r\n  }, [session.status, onExit]);\r\n\r\n  // ì„¸ì…˜ ê°•ì œ ì¢…ë£Œ\r\n  const handleConfirmExit = useCallback(() => {\r\n    session.resetSession();\r\n    setShowExitConfirm(false);\r\n    onExit();\r\n  }, [session, onExit]);\r\n\r\n  // ê²°ê³¼ ì €ì¥\r\n  const handleSaveResult = useCallback(\r\n    async (feedback: UserFeedback) => {\r\n      if (sessionResultData) {\r\n        await onComplete(sessionResultData, feedback);\r\n        setIsResultOpen(false);\r\n        onExit();\r\n      }\r\n    },\r\n    [sessionResultData, onComplete, onExit]\r\n  );\r\n\r\n  // ê²°ê³¼ ëª¨ë‹¬ ë‹«ê¸° (ì €ì¥í•˜ì§€ ì•ŠìŒ)\r\n  const handleCloseResult = useCallback(() => {\r\n    setIsResultOpen(false);\r\n    onExit();\r\n  }, [onExit]);\r\n\r\n  // íŠ¹ì • ìš´ë™ìœ¼ë¡œ ì í”„\r\n  const handleJumpToExercise = useCallback(\r\n    (index: number) => {\r\n      session.jumpToExercise(index);\r\n      setShowExerciseList(false);\r\n      if (!isTimerOpen) {\r\n        setIsTimerOpen(true);\r\n      }\r\n    },\r\n    [session, isTimerOpen]\r\n  );\r\n\r\n  // ì„¹ì…˜ë³„ ë¶„ë¥˜\r\n  const sections = useMemo(() => {\r\n    return {\r\n      warmup: exercises.filter((ex) => ex.section === 'warmup'),\r\n      main: exercises.filter((ex) => ex.section === 'main'),\r\n      cooldown: exercises.filter((ex) => ex.section === 'cooldown'),\r\n    };\r\n  }, [exercises]);\r\n\r\n  const isSessionActive = session.status === 'running' || session.status === 'paused';\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full\">\r\n      {/* í”„ë¡œê·¸ë ˆìŠ¤ í—¤ë” */}\r\n      {isSessionActive && (\r\n        <SessionProgressHeader\r\n          currentIndex={session.currentIndex}\r\n          totalExercises={exercises.length}\r\n          progressPercentage={session.progressPercentage}\r\n          formattedTime={session.formattedSessionTime}\r\n          courseName={courseName}\r\n          onBack={handleExitRequest}\r\n        />\r\n      )}\r\n\r\n      {/* ë©”ì¸ ì»¨í…ì¸  */}\r\n      <div className=\"flex-1 overflow-auto p-4\">\r\n        {/* ëŒ€ê¸° ìƒíƒœ (ì„¸ì…˜ ë¯¸ì‹œì‘) */}\r\n        {session.status === 'idle' && (\r\n          <div className=\"flex flex-col items-center justify-center h-full gap-6\">\r\n            <div className=\"text-center\">\r\n              <h2 className=\"text-2xl font-bold mb-2\">{courseName}</h2>\r\n              <p className=\"text-muted-foreground\">\r\n                {exercises.length}ê°œ ìš´ë™ ì¤€ë¹„ ì™„ë£Œ\r\n              </p>\r\n            </div>\r\n\r\n            {/* ì„¹ì…˜ ìš”ì•½ */}\r\n            <div className=\"flex gap-3 text-sm\">\r\n              {sections.warmup.length > 0 && (\r\n                <span className=\"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full\">\r\n                  ì¤€ë¹„ {sections.warmup.length}ê°œ\r\n                </span>\r\n              )}\r\n              {sections.main.length > 0 && (\r\n                <span className=\"px-3 py-1 bg-primary/10 text-primary rounded-full\">\r\n                  ë©”ì¸ {sections.main.length}ê°œ\r\n                </span>\r\n              )}\r\n              {sections.cooldown.length > 0 && (\r\n                <span className=\"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-full\">\r\n                  ë§ˆë¬´ë¦¬ {sections.cooldown.length}ê°œ\r\n                </span>\r\n              )}\r\n            </div>\r\n\r\n            <Button size=\"lg\" onClick={handleStartSession} className=\"gap-2\">\r\n              <Play className=\"h-5 w-5\" />\r\n              ì„¸ì…˜ ì‹œì‘\r\n            </Button>\r\n\r\n            <Button variant=\"ghost\" onClick={onExit}>\r\n              ëŒì•„ê°€ê¸°\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* ì¼ì‹œì •ì§€ ìƒíƒœ */}\r\n        {session.status === 'paused' && !isTimerOpen && (\r\n          <div className=\"flex flex-col items-center justify-center h-full gap-6\">\r\n            <div className=\"text-center\">\r\n              <h2 className=\"text-2xl font-bold mb-2\">ì¼ì‹œì •ì§€</h2>\r\n              <p className=\"text-muted-foreground\">\r\n                {session.currentExercise?.exerciseTemplateName}\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {session.currentIndex + 1} / {exercises.length}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <Button size=\"lg\" onClick={handleResumeTimer} className=\"gap-2\">\r\n                <Play className=\"h-5 w-5\" />\r\n                ê³„ì†í•˜ê¸°\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"lg\"\r\n                onClick={() => setShowExerciseList(!showExerciseList)}\r\n                className=\"gap-2\"\r\n              >\r\n                <ListOrdered className=\"h-5 w-5\" />\r\n                ìš´ë™ ëª©ë¡\r\n              </Button>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={handleExitRequest}\r\n              className=\"text-destructive\"\r\n            >\r\n              ì„¸ì…˜ ì¢…ë£Œ\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* ìš´ë™ ëª©ë¡ (ì¼ì‹œì •ì§€ ì‹œ í‘œì‹œ) */}\r\n        {showExerciseList && session.status === 'paused' && (\r\n          <Card className=\"mt-4\">\r\n            <CardContent className=\"p-4 space-y-2\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"font-medium\">ìš´ë™ ëª©ë¡</span>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setShowExerciseList(false)}\r\n                >\r\n                  <ChevronUp className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n              <div className=\"space-y-1 max-h-60 overflow-auto\">\r\n                {exercises.map((ex, index) => {\r\n                  const isCompleted = session.completionLogs.some(\r\n                    (log) => log.exerciseTemplateId === ex.exerciseTemplateId\r\n                  );\r\n                  const isCurrent = index === session.currentIndex;\r\n                  return (\r\n                    <button\r\n                      key={`${ex.exerciseTemplateId}-${index}`}\r\n                      onClick={() => handleJumpToExercise(index)}\r\n                      className={cn(\r\n                        'w-full text-left px-3 py-2 rounded-md text-sm transition-colors',\r\n                        isCurrent\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : isCompleted\r\n                            ? 'bg-muted text-muted-foreground'\r\n                            : 'hover:bg-muted'\r\n                      )}\r\n                    >\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <span className=\"w-6 text-center opacity-60\">\r\n                          {index + 1}\r\n                        </span>\r\n                        <span className=\"flex-1 truncate\">\r\n                          {ex.exerciseTemplateName}\r\n                        </span>\r\n                        {ex.durationMinutes && (\r\n                          <span className=\"text-xs opacity-60\">\r\n                            {ex.durationMinutes}ë¶„\r\n                          </span>\r\n                        )}\r\n                      </span>\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n\r\n      {/* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ (ì„¸ì…˜ ì§„í–‰ ì¤‘) */}\r\n      {isSessionActive && !isTimerOpen && (\r\n        <div className=\"border-t p-4 bg-background\">\r\n          <div className=\"flex items-center justify-between max-w-md mx-auto\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={handlePreviousExercise}\r\n              disabled={!session.hasPrevious}\r\n            >\r\n              <SkipBack className=\"h-5 w-5\" />\r\n            </Button>\r\n\r\n            <Button size=\"lg\" onClick={handleResumeTimer} className=\"gap-2 px-8\">\r\n              <Play className=\"h-5 w-5\" />\r\n              ê³„ì†í•˜ê¸°\r\n            </Button>\r\n\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleSkipExercise}>\r\n              <SkipForward className=\"h-5 w-5\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ìš´ë™ íƒ€ì´ë¨¸ ëª¨ë‹¬ */}\r\n      <ExerciseTimerModal\r\n        isOpen={isTimerOpen}\r\n        exercise={session.currentExercise}\r\n        hasNext={session.hasNext}\r\n        onClose={handleTimerClose}\r\n        onNext={handleNextExercise}\r\n        onDone={() => {\r\n          // ë§ˆì§€ë§‰ ìš´ë™ ì™„ë£Œ ì‹œ ìë™ìœ¼ë¡œ ê²°ê³¼ ëª¨ë‹¬ í‘œì‹œ\r\n          // useSessionStateì˜ onSessionComplete ì½œë°±ì—ì„œ ì²˜ë¦¬ë¨\r\n        }}\r\n      />\r\n\r\n      {/* ì„¸ì…˜ ê²°ê³¼ ëª¨ë‹¬ */}\r\n      {sessionResultData && (\r\n        <SessionResultModal\r\n          isOpen={isResultOpen}\r\n          sessionResult={sessionResultData}\r\n          bodyParts={bodyParts}\r\n          streak={streak}\r\n          onSave={handleSaveResult}\r\n          onClose={handleCloseResult}\r\n        />\r\n      )}\r\n\r\n      {/* ì¢…ë£Œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ */}\r\n      <AlertDialog open={showExitConfirm} onOpenChange={setShowExitConfirm}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>ì„¸ì…˜ì„ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              ì§„í–‰ ì¤‘ì¸ ìš´ë™ ê¸°ë¡ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\r\n              <br />\r\n              ì™„ë£Œí•œ ìš´ë™: {session.completionLogs.length} / {exercises.length}ê°œ\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>ê³„ì†í•˜ê¸°</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={handleConfirmExit}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              ì¢…ë£Œ\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\session-progress-bar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isCompleted' is defined but never used.","line":65,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { cn } from '@/lib/utils';\r\nimport { Check, Circle, Loader2 } from 'lucide-react';\r\n\r\ninterface SectionStats {\r\n  total: number;\r\n  completed: number;\r\n}\r\n\r\ninterface SessionProgressBarProps {\r\n  /** í˜„ì¬ ìš´ë™ ì¸ë±ìŠ¤ (0-based) */\r\n  currentIndex: number;\r\n  /** ì „ì²´ ìš´ë™ ìˆ˜ */\r\n  totalExercises: number;\r\n  /** ì „ì²´ ì§„í–‰ë¥  (0-100) */\r\n  progressPercentage: number;\r\n  /** ì„¹ì…˜ë³„ í†µê³„ */\r\n  sectionProgress: {\r\n    warmup: SectionStats;\r\n    main: SectionStats;\r\n    cooldown: SectionStats;\r\n  };\r\n  /** í˜„ì¬ ì„¹ì…˜ */\r\n  currentSection: 'warmup' | 'main' | 'cooldown' | null;\r\n  /** ì„¸ì…˜ ê²½ê³¼ ì‹œê°„ (í¬ë§·íŒ…ëœ ë¬¸ìì—´) */\r\n  formattedTime: string;\r\n  /** ê°„ì†Œí™” ëª¨ë“œ (ì„¸ì…˜ í—¤ë”ìš©) */\r\n  compact?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst SECTION_LABELS = {\r\n  warmup: 'ì¤€ë¹„',\r\n  main: 'ë©”ì¸',\r\n  cooldown: 'ë§ˆë¬´ë¦¬',\r\n} as const;\r\n\r\nconst SECTION_COLORS = {\r\n  warmup: {\r\n    active: 'bg-blue-500',\r\n    completed: 'bg-blue-400',\r\n    pending: 'bg-blue-200 dark:bg-blue-800',\r\n  },\r\n  main: {\r\n    active: 'bg-primary',\r\n    completed: 'bg-primary/80',\r\n    pending: 'bg-primary/20',\r\n  },\r\n  cooldown: {\r\n    active: 'bg-green-500',\r\n    completed: 'bg-green-400',\r\n    pending: 'bg-green-200 dark:bg-green-800',\r\n  },\r\n} as const;\r\n\r\n/**\r\n * ì„¹ì…˜ ìƒíƒœ í‘œì‹œ ì»´í¬ë„ŒíŠ¸\r\n */\r\nfunction SectionIndicator({\r\n  section,\r\n  stats,\r\n  isCurrent,\r\n  isCompleted,\r\n}: {\r\n  section: 'warmup' | 'main' | 'cooldown';\r\n  stats: SectionStats;\r\n  isCurrent: boolean;\r\n  isCompleted: boolean;\r\n}) {\r\n  const colors = SECTION_COLORS[section];\r\n  const label = SECTION_LABELS[section];\r\n\r\n  // ì„¹ì…˜ì´ ì—†ëŠ” ê²½ìš° (ìš´ë™ 0ê°œ)\r\n  if (stats.total === 0) return null;\r\n\r\n  const sectionCompleted = stats.completed >= stats.total;\r\n  const hasProgress = stats.completed > 0;\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium transition-all',\r\n        isCurrent && 'ring-2 ring-offset-1 ring-offset-background',\r\n        isCurrent && section === 'warmup' && 'ring-blue-500',\r\n        isCurrent && section === 'main' && 'ring-primary',\r\n        isCurrent && section === 'cooldown' && 'ring-green-500',\r\n        sectionCompleted\r\n          ? cn(colors.completed, 'text-white')\r\n          : hasProgress\r\n            ? cn(colors.active, 'text-white')\r\n            : cn(colors.pending, 'text-muted-foreground')\r\n      )}\r\n    >\r\n      {sectionCompleted ? (\r\n        <Check className=\"h-3 w-3\" />\r\n      ) : isCurrent ? (\r\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\r\n      ) : (\r\n        <Circle className=\"h-3 w-3\" />\r\n      )}\r\n      <span>{label}</span>\r\n      <span className=\"opacity-80\">\r\n        ({stats.completed}/{stats.total})\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ì„¸ì…˜ ì§„í–‰ë¥  í‘œì‹œ ì»´í¬ë„ŒíŠ¸\r\n */\r\nexport function SessionProgressBar({\r\n  currentIndex,\r\n  totalExercises,\r\n  progressPercentage,\r\n  sectionProgress,\r\n  currentSection,\r\n  formattedTime,\r\n  compact = false,\r\n  className,\r\n}: SessionProgressBarProps) {\r\n  // ì„¹ì…˜ ì™„ë£Œ ì—¬ë¶€ íŒë‹¨\r\n  const isSectionCompleted = (section: 'warmup' | 'main' | 'cooldown') => {\r\n    const stats = sectionProgress[section];\r\n    return stats.completed >= stats.total;\r\n  };\r\n\r\n  // ê°„ì†Œí™” ëª¨ë“œ (ì„¸ì…˜ í—¤ë”ìš©)\r\n  if (compact) {\r\n    return (\r\n      <div className={cn('w-full space-y-1', className)}>\r\n        <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\r\n          <span>\r\n            {currentIndex + 1} / {totalExercises}\r\n          </span>\r\n          <span>{progressPercentage}%</span>\r\n        </div>\r\n        <Progress value={progressPercentage} className=\"h-1.5\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn('w-full space-y-3', className)}>\r\n      {/* í”„ë¡œê·¸ë ˆìŠ¤ ë°” */}\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex items-center justify-between text-sm\">\r\n          <span className=\"font-medium\">\r\n            ìš´ë™ {currentIndex + 1} / {totalExercises}\r\n          </span>\r\n          <span className=\"text-muted-foreground font-mono\">{formattedTime}</span>\r\n        </div>\r\n        <Progress value={progressPercentage} className=\"h-2\" />\r\n        <div className=\"flex justify-end\">\r\n          <span className=\"text-xs text-muted-foreground\">{progressPercentage}% ì™„ë£Œ</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì„¹ì…˜ë³„ ì§„í–‰ ìƒíƒœ */}\r\n      <div className=\"flex items-center justify-center gap-2 flex-wrap\">\r\n        {(['warmup', 'main', 'cooldown'] as const).map((section) => (\r\n          <SectionIndicator\r\n            key={section}\r\n            section={section}\r\n            stats={sectionProgress[section]}\r\n            isCurrent={currentSection === section}\r\n            isCompleted={isSectionCompleted(section)}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * ì„¸ì…˜ í—¤ë”ìš© ê°„ì†Œí™” ì§„í–‰ ë°”\r\n */\r\nexport function SessionProgressHeader({\r\n  currentIndex,\r\n  totalExercises,\r\n  progressPercentage,\r\n  formattedTime,\r\n  courseName,\r\n  onBack,\r\n}: {\r\n  currentIndex: number;\r\n  totalExercises: number;\r\n  progressPercentage: number;\r\n  formattedTime: string;\r\n  courseName?: string;\r\n  onBack?: () => void;\r\n}) {\r\n  return (\r\n    <div className=\"w-full bg-background/95 backdrop-blur-sm border-b px-4 py-2 sticky top-0 z-40\">\r\n      <div className=\"flex items-center gap-3\">\r\n        {onBack && (\r\n          <button\r\n            onClick={onBack}\r\n            className=\"p-1 hover:bg-muted rounded-md transition-colors\"\r\n            aria-label=\"ë’¤ë¡œ ê°€ê¸°\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            >\r\n              <path d=\"m15 18-6-6 6-6\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n\r\n        <div className=\"flex-1 min-w-0\">\r\n          {courseName && (\r\n            <p className=\"text-sm font-medium truncate\">{courseName}</p>\r\n          )}\r\n          <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n            <span>\r\n              {currentIndex + 1}/{totalExercises}\r\n            </span>\r\n            <span>â€¢</span>\r\n            <span className=\"font-mono\">{formattedTime}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"w-24\">\r\n          <Progress value={progressPercentage} className=\"h-1.5\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\session-result-modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\storage-warning-banner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\theme-switcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\button-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\empty-state.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\empty.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\error-state.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\field.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\input-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\item.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\kbd.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\loading-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\navigation-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\spinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\step-loader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\toggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\components\\user-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-local-favorites.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-pwa-install.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-recent-courses.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-service-worker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-session-state.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sessionStartTime' is assigned a value but never used.","line":65,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":26},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'sections' object makes the dependencies of useCallback Hook (at line 108) change on every render. To fix this, wrap the initialization of 'sections' in its own useMemo() Hook.","line":75,"column":9,"nodeType":"VariableDeclarator","endLine":79,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useCallback, useRef, useEffect } from 'react';\r\nimport type { MergedExercise } from '@/types/body-part-merge';\r\n\r\n/**\r\n * ê°œë³„ ìš´ë™ ì™„ë£Œ ê¸°ë¡\r\n */\r\nexport interface ExerciseCompletionData {\r\n  exerciseTemplateId: string;\r\n  exerciseTemplateName: string;\r\n  section: 'warmup' | 'main' | 'cooldown';\r\n  status: 'completed' | 'skipped' | 'modified';\r\n  plannedDuration: number; // ì˜ˆì • ì‹œê°„ (ì´ˆ)\r\n  actualDuration: number; // ì‹¤ì œ ì†Œìš” ì‹œê°„ (ì´ˆ)\r\n  completedAt: Date;\r\n}\r\n\r\n/**\r\n * ì„¸ì…˜ ìƒíƒœ\r\n */\r\nexport type SessionStatus = 'idle' | 'running' | 'paused' | 'completed';\r\n\r\n/**\r\n * ì„¸ì…˜ ê²°ê³¼ ë°ì´í„°\r\n */\r\nexport interface SessionResult {\r\n  totalExercises: number;\r\n  completedExercises: number;\r\n  skippedExercises: number;\r\n  modifiedExercises: number;\r\n  totalPlannedTime: number; // ì´ˆ\r\n  totalActualTime: number; // ì´ˆ\r\n  sessionDuration: number; // ì „ì²´ ì„¸ì…˜ ê²½ê³¼ ì‹œê°„ (ì´ˆ)\r\n  completionRate: number; // ë°±ë¶„ìœ¨\r\n  exerciseLogs: ExerciseCompletionData[];\r\n  sectionStats: {\r\n    warmup: { total: number; completed: number };\r\n    main: { total: number; completed: number };\r\n    cooldown: { total: number; completed: number };\r\n  };\r\n}\r\n\r\n/**\r\n * ì‚¬ìš©ì í”¼ë“œë°± ë°ì´í„°\r\n */\r\nexport interface UserFeedback {\r\n  painAfter: Record<string, number>; // ë¶€ìœ„ë³„ í†µì¦ (1-10)\r\n  notes?: string;\r\n}\r\n\r\ninterface UseSessionStateOptions {\r\n  exercises: MergedExercise[];\r\n  courseId?: string;\r\n  onSessionComplete?: (result: SessionResult) => void;\r\n}\r\n\r\nexport function useSessionState(options: UseSessionStateOptions) {\r\n  const { exercises, courseId, onSessionComplete } = options;\r\n\r\n  // ê¸°ë³¸ ìƒíƒœ\r\n  const [status, setStatus] = useState<SessionStatus>('idle');\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [completionLogs, setCompletionLogs] = useState<ExerciseCompletionData[]>([]);\r\n  const [sessionStartTime, setSessionStartTime] = useState<Date | null>(null);\r\n  const [sessionElapsedTime, setSessionElapsedTime] = useState(0); // ì´ˆ ë‹¨ìœ„\r\n\r\n  // í˜„ì¬ ìš´ë™ ì‹œì‘ ì‹œê°„ (ì‹¤ì œ ì†Œìš” ì‹œê°„ ê³„ì‚°ìš©)\r\n  const exerciseStartTimeRef = useRef<Date | null>(null);\r\n\r\n  // ì„¸ì…˜ íƒ€ì´ë¨¸ ì¸í„°ë²Œ ref\r\n  const sessionTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // ì„¹ì…˜ë³„ ë¶„ë¥˜\r\n  const sections = {\r\n    warmup: exercises.filter(ex => ex.section === 'warmup'),\r\n    main: exercises.filter(ex => ex.section === 'main'),\r\n    cooldown: exercises.filter(ex => ex.section === 'cooldown'),\r\n  };\r\n\r\n  // í˜„ì¬ ìš´ë™\r\n  const currentExercise = exercises[currentIndex] ?? null;\r\n  const hasNext = currentIndex < exercises.length - 1;\r\n  const hasPrevious = currentIndex > 0;\r\n\r\n  // ì§„í–‰ë¥  ê³„ì‚°\r\n  const progressPercentage = exercises.length > 0\r\n    ? Math.round((completionLogs.length / exercises.length) * 100)\r\n    : 0;\r\n\r\n  // ì„¹ì…˜ë³„ ì§„í–‰ ìƒíƒœ\r\n  const getSectionProgress = useCallback(() => {\r\n    const warmupCompleted = completionLogs.filter(\r\n      log => log.section === 'warmup' && log.status !== 'skipped'\r\n    ).length;\r\n    const mainCompleted = completionLogs.filter(\r\n      log => log.section === 'main' && log.status !== 'skipped'\r\n    ).length;\r\n    const cooldownCompleted = completionLogs.filter(\r\n      log => log.section === 'cooldown' && log.status !== 'skipped'\r\n    ).length;\r\n\r\n    return {\r\n      warmup: { total: sections.warmup.length, completed: warmupCompleted },\r\n      main: { total: sections.main.length, completed: mainCompleted },\r\n      cooldown: { total: sections.cooldown.length, completed: cooldownCompleted },\r\n    };\r\n  }, [completionLogs, sections]);\r\n\r\n  // í˜„ì¬ ì„¹ì…˜ íŒë³„\r\n  const getCurrentSection = useCallback(() => {\r\n    if (!currentExercise) return null;\r\n    return currentExercise.section;\r\n  }, [currentExercise]);\r\n\r\n  // ì„¸ì…˜ íƒ€ì´ë¨¸ ì‹œì‘\r\n  const startSessionTimer = useCallback(() => {\r\n    if (sessionTimerRef.current) return;\r\n\r\n    sessionTimerRef.current = setInterval(() => {\r\n      setSessionElapsedTime(prev => prev + 1);\r\n    }, 1000);\r\n  }, []);\r\n\r\n  // ì„¸ì…˜ íƒ€ì´ë¨¸ ì •ì§€\r\n  const stopSessionTimer = useCallback(() => {\r\n    if (sessionTimerRef.current) {\r\n      clearInterval(sessionTimerRef.current);\r\n      sessionTimerRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // ì„¸ì…˜ ì‹œì‘\r\n  const startSession = useCallback(() => {\r\n    if (status !== 'idle') return;\r\n\r\n    setStatus('running');\r\n    setSessionStartTime(new Date());\r\n    setCurrentIndex(0);\r\n    setCompletionLogs([]);\r\n    setSessionElapsedTime(0);\r\n    exerciseStartTimeRef.current = new Date();\r\n    startSessionTimer();\r\n  }, [status, startSessionTimer]);\r\n\r\n  // ì„¸ì…˜ ì¼ì‹œì •ì§€\r\n  const pauseSession = useCallback(() => {\r\n    if (status !== 'running') return;\r\n    setStatus('paused');\r\n    stopSessionTimer();\r\n  }, [status, stopSessionTimer]);\r\n\r\n  // ì„¸ì…˜ ì¬ê°œ\r\n  const resumeSession = useCallback(() => {\r\n    if (status !== 'paused') return;\r\n    setStatus('running');\r\n    startSessionTimer();\r\n  }, [status, startSessionTimer]);\r\n\r\n  // ìš´ë™ ì™„ë£Œ ê¸°ë¡\r\n  const completeExercise = useCallback((\r\n    exerciseStatus: 'completed' | 'skipped' | 'modified' = 'completed'\r\n  ) => {\r\n    if (!currentExercise) return;\r\n\r\n    const now = new Date();\r\n    const actualDuration = exerciseStartTimeRef.current\r\n      ? Math.floor((now.getTime() - exerciseStartTimeRef.current.getTime()) / 1000)\r\n      : (currentExercise.durationMinutes ?? 3) * 60;\r\n\r\n    const log: ExerciseCompletionData = {\r\n      exerciseTemplateId: currentExercise.exerciseTemplateId,\r\n      exerciseTemplateName: currentExercise.exerciseTemplateName,\r\n      section: currentExercise.section,\r\n      status: exerciseStatus,\r\n      plannedDuration: (currentExercise.durationMinutes ?? 3) * 60,\r\n      actualDuration,\r\n      completedAt: now,\r\n    };\r\n\r\n    setCompletionLogs(prev => [...prev, log]);\r\n    exerciseStartTimeRef.current = new Date();\r\n  }, [currentExercise]);\r\n\r\n  // ë‹¤ìŒ ìš´ë™ìœ¼ë¡œ ì´ë™\r\n  const nextExercise = useCallback((\r\n    currentStatus: 'completed' | 'skipped' | 'modified' = 'completed'\r\n  ) => {\r\n    completeExercise(currentStatus);\r\n\r\n    if (hasNext) {\r\n      setCurrentIndex(prev => prev + 1);\r\n    } else {\r\n      // ë§ˆì§€ë§‰ ìš´ë™ ì™„ë£Œ\r\n      setStatus('completed');\r\n      stopSessionTimer();\r\n    }\r\n  }, [hasNext, completeExercise, stopSessionTimer]);\r\n\r\n  // ì´ì „ ìš´ë™ìœ¼ë¡œ ì´ë™ (ê¸°ë¡ ì œê±° ì—†ì´)\r\n  const previousExercise = useCallback(() => {\r\n    if (!hasPrevious) return;\r\n    setCurrentIndex(prev => prev - 1);\r\n    exerciseStartTimeRef.current = new Date();\r\n  }, [hasPrevious]);\r\n\r\n  // ìš´ë™ ê±´ë„ˆë›°ê¸°\r\n  const skipExercise = useCallback(() => {\r\n    nextExercise('skipped');\r\n  }, [nextExercise]);\r\n\r\n  // íŠ¹ì • ìš´ë™ìœ¼ë¡œ ì í”„\r\n  const jumpToExercise = useCallback((index: number) => {\r\n    if (index < 0 || index >= exercises.length) return;\r\n\r\n    // í˜„ì¬ ìš´ë™ì„ ê±´ë„ˆë›°ê¸°ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ì´ë™\r\n    setCurrentIndex(index);\r\n    exerciseStartTimeRef.current = new Date();\r\n  }, [exercises.length]);\r\n\r\n  // ì„¸ì…˜ ê²°ê³¼ ê³„ì‚°\r\n  const getSessionResult = useCallback((): SessionResult => {\r\n    const completed = completionLogs.filter(l => l.status === 'completed').length;\r\n    const skipped = completionLogs.filter(l => l.status === 'skipped').length;\r\n    const modified = completionLogs.filter(l => l.status === 'modified').length;\r\n\r\n    const totalPlannedTime = completionLogs.reduce(\r\n      (sum, log) => sum + log.plannedDuration, 0\r\n    );\r\n    const totalActualTime = completionLogs.reduce(\r\n      (sum, log) => sum + log.actualDuration, 0\r\n    );\r\n\r\n    return {\r\n      totalExercises: exercises.length,\r\n      completedExercises: completed,\r\n      skippedExercises: skipped,\r\n      modifiedExercises: modified,\r\n      totalPlannedTime,\r\n      totalActualTime,\r\n      sessionDuration: sessionElapsedTime,\r\n      completionRate: exercises.length > 0\r\n        ? Math.round((completed / exercises.length) * 100)\r\n        : 0,\r\n      exerciseLogs: completionLogs,\r\n      sectionStats: getSectionProgress(),\r\n    };\r\n  }, [completionLogs, exercises.length, sessionElapsedTime, getSectionProgress]);\r\n\r\n  // ì„¸ì…˜ ì´ˆê¸°í™”\r\n  const resetSession = useCallback(() => {\r\n    setStatus('idle');\r\n    setCurrentIndex(0);\r\n    setCompletionLogs([]);\r\n    setSessionStartTime(null);\r\n    setSessionElapsedTime(0);\r\n    exerciseStartTimeRef.current = null;\r\n    stopSessionTimer();\r\n  }, [stopSessionTimer]);\r\n\r\n  // ì„¸ì…˜ ì™„ë£Œ ì‹œ ì½œë°± í˜¸ì¶œ\r\n  useEffect(() => {\r\n    if (status === 'completed' && onSessionComplete) {\r\n      onSessionComplete(getSessionResult());\r\n    }\r\n  }, [status, onSessionComplete, getSessionResult]);\r\n\r\n  // ì–¸ë§ˆìš´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì •ë¦¬\r\n  useEffect(() => {\r\n    return () => {\r\n      if (sessionTimerRef.current) {\r\n        clearInterval(sessionTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ì‹œê°„ í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹°\r\n  const formatTime = (seconds: number): string => {\r\n    const hrs = Math.floor(seconds / 3600);\r\n    const mins = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n\r\n    if (hrs > 0) {\r\n      return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return {\r\n    // ìƒíƒœ\r\n    status,\r\n    currentIndex,\r\n    currentExercise,\r\n    exercises,\r\n    courseId,\r\n\r\n    // ì§„í–‰ ì •ë³´\r\n    hasNext,\r\n    hasPrevious,\r\n    progressPercentage,\r\n    sessionElapsedTime,\r\n    formattedSessionTime: formatTime(sessionElapsedTime),\r\n\r\n    // ì„¹ì…˜ ì •ë³´\r\n    sections,\r\n    currentSection: getCurrentSection(),\r\n    sectionProgress: getSectionProgress(),\r\n\r\n    // ì™„ë£Œ ê¸°ë¡\r\n    completionLogs,\r\n\r\n    // ì•¡ì…˜\r\n    startSession,\r\n    pauseSession,\r\n    resumeSession,\r\n    nextExercise,\r\n    previousExercise,\r\n    skipExercise,\r\n    jumpToExercise,\r\n    completeExercise,\r\n    resetSession,\r\n\r\n    // ê²°ê³¼\r\n    getSessionResult,\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-swipe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\use-sync-user.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\hooks\\useAnalytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\i18n\\request.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\i18n\\routing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\instrumentation-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\instrumentation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\algorithms\\adjust-difficulty.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\algorithms\\auto-adjust-routine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\algorithms\\merge-body-parts.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BodyPartSelection' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'intensityAdjustment' is assigned a value but never used.","line":55,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { prisma } from \"@/lib/prisma/client\";\r\nimport { calculatePriorityScore } from \"@/lib/utils/calculate-priority\";\r\nimport { deduplicateExercises } from \"@/lib/utils/deduplicate-exercises\";\r\nimport { filterContraindications } from \"@/lib/utils/filter-contraindications\";\r\nimport { classifyBySection } from \"@/lib/utils/classify-by-section\";\r\nimport { distributeTime } from \"@/lib/utils/distribute-time\";\r\nimport { adjustDifficultyForUser } from \"@/lib/algorithms/adjust-difficulty\";\r\nimport { filterByDifficultyRange } from \"@/lib/utils/filter-by-difficulty\";\r\nimport { mapExperienceLevel } from \"@/lib/utils/map-experience-level\";\r\nimport type { ExperienceLevel } from \"@/types/difficulty\";\r\nimport type {\r\n  MergeRequest,\r\n  MergeResult,\r\n  MergedExercise,\r\n  BodyPartSelection,\r\n} from \"@/types/body-part-merge\";\r\n\r\n/**\r\n * pain_level_rangeì™€ ì‚¬ìš©ì painLevel ë§¤ì¹­\r\n *\r\n * @param painLevelRange í†µì¦ ì •ë„ ë²”ìœ„ ('1-2', '3-4', '5', 'all')\r\n * @param userPainLevel ì‚¬ìš©ì í†µì¦ ì •ë„ (1-5)\r\n * @returns ë§¤ì¹­ ì—¬ë¶€\r\n */\r\nfunction matchesPainLevelRange(\r\n  painLevelRange: string | null | undefined,\r\n  userPainLevel: number,\r\n): boolean {\r\n  if (!painLevelRange || painLevelRange === \"all\") {\r\n    return true;\r\n  }\r\n\r\n  if (painLevelRange.includes(\"-\")) {\r\n    // ë²”ìœ„ í˜•ì‹: '1-2', '3-4'\r\n    const [min, max] = painLevelRange.split(\"-\").map(Number);\r\n    return userPainLevel >= min && userPainLevel <= max;\r\n  }\r\n\r\n  // ë‹¨ì¼ ê°’: '5'\r\n  const level = Number(painLevelRange);\r\n  return userPainLevel === level;\r\n}\r\n\r\n/**\r\n * ë‹¤ì¤‘ ë¶€ìœ„ ë³‘í•© ë©”ì¸ í•¨ìˆ˜\r\n *\r\n * ì—¬ëŸ¬ ë¶€ìœ„ì˜ ì¶”ì²œ ìš´ë™ì„ ë³‘í•©í•˜ì—¬ ìµœì¢… ì½”ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\r\n *\r\n * @param request ë³‘í•© ìš”ì²­\r\n * @param intensityAdjustment ê°•ë„ ì¡°ì • (-1: í•˜í–¥, 0: ìœ ì§€, +1: ìƒí–¥) - P2-F1-01\r\n * @returns ë³‘í•© ê²°ê³¼\r\n */\r\nexport async function mergeBodyParts(\r\n  request: MergeRequest,\r\n  intensityAdjustment: number = 0,\r\n): Promise<MergeResult> {\r\n  const warnings: string[] = [];\r\n  const bodyPartIds = request.bodyParts.map((bp) => bp.bodyPartId);\r\n\r\n  // 0. ê¸°êµ¬ ID -> Name ë³€í™˜ì„ ìœ„í•œ ë§µ ì¡°íšŒ\r\n  const allEquipment = await prisma.equipmentType.findMany();\r\n  const equipmentMap = new Map(allEquipment.map((eq) => [eq.id, eq.name]));\r\n\r\n  // ì‚¬ìš©ì ì„ íƒ ê¸°êµ¬ IDë¥¼ Nameìœ¼ë¡œ ë³€í™˜\r\n  const userEquipmentNames = (request.equipmentAvailable || [])\r\n    .map((id) => equipmentMap.get(id))\r\n    .filter((name): name is string => !!name); // ìœ íš¨í•œ ì´ë¦„ë§Œ í•„í„°ë§\r\n\r\n  // 1. ê° ë¶€ìœ„ë³„ ì¶”ì²œ ìš´ë™ ì¡°íšŒ\r\n  const mappings = await prisma.bodyPartExerciseMapping.findMany({\r\n    where: {\r\n      bodyPartId: { in: bodyPartIds },\r\n      isActive: true,\r\n    },\r\n    include: {\r\n      exerciseTemplate: {\r\n        include: {\r\n          exerciseEquipmentMappings: {\r\n            include: { equipmentType: true },\r\n          },\r\n        },\r\n      },\r\n      bodyPart: true,\r\n    },\r\n    orderBy: [{ bodyPartId: \"asc\" }, { priority: \"asc\" }],\r\n  });\r\n\r\n  if (mappings.length === 0) {\r\n    warnings.push(\"ì¶”ì²œ ìš´ë™ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ìš´ë™ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\");\r\n    return {\r\n      exercises: [],\r\n      totalDuration: request.totalDurationMinutes ?? 90,\r\n      warnings,\r\n    };\r\n  }\r\n\r\n  // 2. pain_level_range í•„í„°ë§ ë° ìš°ì„ ìˆœìœ„ ì ìˆ˜ ê³„ì‚°\r\n  const exercisesWithScores: MergedExercise[] = [];\r\n\r\n  for (const mapping of mappings) {\r\n    const bodyPart = request.bodyParts.find(\r\n      (bp) => bp.bodyPartId === mapping.bodyPartId,\r\n    );\r\n\r\n    if (!bodyPart) continue;\r\n\r\n    // âœ… ë¹„í™œì„± ìš´ë™ í•„í„°ë§ (isActive: falseì¸ ìš´ë™ ì œì™¸)\r\n    if (!mapping.exerciseTemplate.isActive) {\r\n      continue;\r\n    }\r\n\r\n    // pain_level_range ë§¤ì¹­ í™•ì¸\r\n    if (!matchesPainLevelRange(mapping.painLevelRange, bodyPart.painLevel)) {\r\n      continue;\r\n    }\r\n\r\n    // ê¸°êµ¬ í•„í„°ë§: ì •í™•í•œ ê¸°êµ¬ ë§¤ì¹­\r\n    const exerciseEquipment =\r\n      mapping.exerciseTemplate.exerciseEquipmentMappings.map(\r\n        (eem) => eem.equipmentType.name,\r\n      );\r\n\r\n    // ì‚¬ìš©ìê°€ ì„ íƒí•œ ê¸°êµ¬ Set (ë§¨ëª¸/ì—†ìŒì€ ë™ì¼ ì·¨ê¸‰)\r\n    const userEquipmentSet = new Set(userEquipmentNames);\r\n\r\n    // \"ë§¨ëª¸\" ë˜ëŠ” \"ì—†ìŒ\" ì„ íƒ ì‹œ, ë‘˜ ë‹¤ í—ˆìš©\r\n    const userWantsBodyweight =\r\n      userEquipmentSet.has(\"ë§¨ëª¸\") || userEquipmentSet.has(\"ì—†ìŒ\");\r\n    if (userWantsBodyweight) {\r\n      userEquipmentSet.add(\"ë§¨ëª¸\");\r\n      userEquipmentSet.add(\"ì—†ìŒ\");\r\n    }\r\n\r\n    // ìš´ë™ ê°€ëŠ¥ ì¡°ê±´ ì²´í¬\r\n    // 1. \"ë§¨ëª¸\" ë˜ëŠ” \"ì—†ìŒ\"ì„ í¬í•¨í•˜ëŠ” ìš´ë™ â†’ ë§¨ì†ìœ¼ë¡œ ê°€ëŠ¥\r\n    const isNoEquipmentExercise = exerciseEquipment.some(\r\n      (eq) => eq === \"ë§¨ëª¸\" || eq === \"ì—†ìŒ\",\r\n    );\r\n\r\n    // 2. íŠ¹ì • ê¸°êµ¬ í•„ìš” â†’ ì‚¬ìš©ìê°€ í•´ë‹¹ ê¸°êµ¬ë¥¼ ëª¨ë‘ ê°€ì§€ê³  ìˆì–´ì•¼ í•¨\r\n    //    (ë˜ëŠ” \"ë§¨ëª¸\"/\"ì—†ìŒ\"ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥í•œ ê²½ìš°)\r\n    const hasAllRequiredEquipment = exerciseEquipment.some(\r\n      (eq) => eq === \"ë§¨ëª¸\" || eq === \"ì—†ìŒ\" || userEquipmentSet.has(eq),\r\n    );\r\n\r\n    // í•„í„°ë§: ë§¨ì† ìš´ë™ì´ ì•„ë‹ˆê³ , í•„ìš”í•œ ê¸°êµ¬ë„ ì—†ìœ¼ë©´ ì œì™¸\r\n    if (!isNoEquipmentExercise && !hasAllRequiredEquipment) {\r\n      continue;\r\n    }\r\n\r\n    // ìš°ì„ ìˆœìœ„ ì ìˆ˜ ê³„ì‚°\r\n    const priorityScore = calculatePriorityScore(\r\n      bodyPart,\r\n      mapping.priority,\r\n      mapping.intensityLevel || 2,\r\n    );\r\n\r\n    exercisesWithScores.push({\r\n      exerciseTemplateId: mapping.exerciseTemplateId,\r\n      exerciseTemplateName: mapping.exerciseTemplate.name,\r\n      bodyPartIds: [mapping.bodyPartId],\r\n      priorityScore,\r\n      section: \"main\", // ì„ì‹œ, ë‚˜ì¤‘ì— ë¶„ë¥˜ë¨\r\n      orderInSection: 0, // ì„ì‹œ, ë‚˜ì¤‘ì— ì„¤ì •ë¨\r\n      durationMinutes: mapping.exerciseTemplate.durationMinutes || undefined,\r\n      reps: mapping.exerciseTemplate.reps || undefined,\r\n      sets: mapping.exerciseTemplate.sets || undefined,\r\n      restSeconds: mapping.exerciseTemplate.restSeconds || undefined,\r\n      intensityLevel:\r\n        mapping.intensityLevel ||\r\n        mapping.exerciseTemplate.intensityLevel ||\r\n        undefined,\r\n      difficultyScore: mapping.exerciseTemplate.difficultyScore || undefined,\r\n      painLevelRange: mapping.painLevelRange || undefined,\r\n      description: mapping.exerciseTemplate.description || undefined,\r\n      instructions: mapping.exerciseTemplate.instructions || undefined,\r\n      precautions: mapping.exerciseTemplate.precautions || undefined,\r\n      imageUrl: mapping.exerciseTemplate.imageUrl || undefined,\r\n      gifUrl: mapping.exerciseTemplate.gifUrl || undefined,\r\n      videoUrl: mapping.exerciseTemplate.videoUrl || undefined,\r\n    });\r\n  }\r\n\r\n  // 3. ë‚œì´ë„ ìë™ ì¡°ì ˆ ë° í•„í„°ë§\r\n  let filteredByDifficulty = exercisesWithScores;\r\n\r\n  if (request.experienceLevel) {\r\n    const experienceLevel: ExperienceLevel = mapExperienceLevel(\r\n      request.experienceLevel,\r\n    );\r\n    const difficultyAdjustment = adjustDifficultyForUser({\r\n      experienceLevel,\r\n      painLevel: request.painLevel,\r\n    });\r\n\r\n    // ë‚œì´ë„ ë²”ìœ„ë¡œ í•„í„°ë§\r\n    filteredByDifficulty = filterByDifficultyRange(\r\n      exercisesWithScores,\r\n      difficultyAdjustment.allowedRange,\r\n    );\r\n\r\n    // ë‚œì´ë„ ì¡°ì • ì‚¬ìœ ê°€ ìˆìœ¼ë©´ ê²½ê³  ì¶”ê°€\r\n    if (difficultyAdjustment.adjustmentReason) {\r\n      warnings.push(difficultyAdjustment.adjustmentReason);\r\n    }\r\n  }\r\n\r\n  // 4. ìš°ì„ ìˆœìœ„ ì ìˆ˜ë¡œ ì •ë ¬\r\n  filteredByDifficulty.sort((a, b) => a.priorityScore - b.priorityScore);\r\n\r\n  // 5. ì¤‘ë³µ ìš´ë™ ì œê±° ë° ë³‘í•©\r\n  const deduplicated = deduplicateExercises(filteredByDifficulty);\r\n\r\n  // 6. ê¸ˆê¸° ìš´ë™ í•„í„°ë§\r\n  const contraindications = await prisma.bodyPartContraindication.findMany({\r\n    where: {\r\n      bodyPartId: { in: bodyPartIds },\r\n      isActive: true,\r\n    },\r\n    include: {\r\n      exerciseTemplate: true,\r\n    },\r\n  });\r\n\r\n  const contraindicationData = contraindications.map((c) => ({\r\n    exerciseTemplateId: c.exerciseTemplateId,\r\n    exerciseTemplateName: c.exerciseTemplate.name,\r\n    painLevelMin: c.painLevelMin,\r\n    severity: c.severity as \"warning\" | \"strict\",\r\n    reason: c.reason,\r\n  }));\r\n\r\n  const filterResult = filterContraindications(\r\n    deduplicated,\r\n    contraindicationData,\r\n    request.painLevel,\r\n  );\r\n\r\n  // 7. ì„¹ì…˜ë³„ ë¶„ë¥˜\r\n  const classified = classifyBySection(filterResult.exercises);\r\n\r\n  // 8. ì‹œê°„ ë°°ë¶„\r\n  const finalExercises = distributeTime(\r\n    classified,\r\n    request.totalDurationMinutes ?? 90,\r\n  );\r\n\r\n  // 9. í†µê³„ ê³„ì‚°\r\n  const stats = {\r\n    warmup: classified.warmup.length,\r\n    main: classified.main.length,\r\n    cooldown: classified.cooldown.length,\r\n    byBodyPart: {} as Record<string, number>,\r\n  };\r\n\r\n  // ë¶€ìœ„ë³„ ìš´ë™ ê°œìˆ˜ ê³„ì‚°\r\n  request.bodyParts.forEach((bp) => {\r\n    stats.byBodyPart[bp.bodyPartName] = finalExercises.filter((ex) =>\r\n      ex.bodyPartIds.includes(bp.bodyPartId),\r\n    ).length;\r\n  });\r\n\r\n  // ì´ ì‹œê°„ ê³„ì‚°\r\n  const totalDuration = finalExercises.reduce(\r\n    (sum, ex) => sum + (ex.durationMinutes || 0),\r\n    0,\r\n  );\r\n\r\n  return {\r\n    exercises: finalExercises,\r\n    totalDuration: Math.round(totalDuration),\r\n    warnings: warnings.length > 0 ? warnings : undefined,\r\n    stats,\r\n  };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\auth\\admin-guard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\clerk\\localization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\coaching\\coaching-messages.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\coaching\\generate-feedback.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'skippedCount' is defined but never used.","line":73,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'intensity' is assigned a value but never used.","line":197,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":197,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ê·œì¹™ ê¸°ë°˜ ì½”ì¹­ í”¼ë“œë°± ìƒì„± ë¡œì§\r\n *\r\n * ìš´ë™ ì„¸ì…˜ ì™„ë£Œ í›„ í†µì¦ ë³€í™”, ì™„ë£Œìœ¨, ì—°ì† ê¸°ë¡ ë“±ì„ ë¶„ì„í•˜ì—¬\r\n * ê°œì¸í™”ëœ ì½”ì¹­ í”¼ë“œë°±ì„ ìƒì„±í•©ë‹ˆë‹¤.\r\n */\r\n\r\nimport {\r\n  COMPLETION_MESSAGES,\r\n  PAIN_FEEDBACK_MESSAGES,\r\n  NEXT_SESSION_RECOMMENDATIONS,\r\n  MOTIVATION_MESSAGES,\r\n  BODY_PART_SPECIFIC_ADVICE,\r\n  SECTION_MESSAGES,\r\n  TIME_FEEDBACK,\r\n  pickRandom,\r\n  getStreakMessage,\r\n} from './coaching-messages';\r\nimport type { SessionResult, UserFeedback } from '@/hooks/use-session-state';\r\n\r\n/**\r\n * í”¼ë“œë°± ìœ í˜•\r\n */\r\nexport type FeedbackType =\r\n  | 'completion'\r\n  | 'pain'\r\n  | 'streak'\r\n  | 'recommendation'\r\n  | 'motivation'\r\n  | 'bodyPart'\r\n  | 'section'\r\n  | 'time';\r\n\r\n/**\r\n * ë‹¨ì¼ í”¼ë“œë°± í•­ëª©\r\n */\r\nexport interface FeedbackItem {\r\n  type: FeedbackType;\r\n  message: string;\r\n  priority: number; // 1ì´ ê°€ì¥ ë†’ìŒ\r\n  emoji?: string;\r\n}\r\n\r\n/**\r\n * í”¼ë“œë°± ìƒì„± ì…ë ¥\r\n */\r\nexport interface FeedbackInput {\r\n  sessionResult: SessionResult;\r\n  userFeedback?: UserFeedback;\r\n  painBefore?: Record<string, number>; // ìš´ë™ ì „ ë¶€ìœ„ë³„ í†µì¦\r\n  streak?: number; // ì—°ì† ìš´ë™ ì¼ìˆ˜\r\n  bodyParts?: string[]; // ìš´ë™ ëŒ€ìƒ ë¶€ìœ„ ì´ë¦„ë“¤\r\n}\r\n\r\n/**\r\n * í”¼ë“œë°± ìƒì„± ê²°ê³¼\r\n */\r\nexport interface FeedbackResult {\r\n  mainMessage: string;\r\n  feedbackItems: FeedbackItem[];\r\n  summary: {\r\n    overallTone: 'positive' | 'neutral' | 'encouraging';\r\n    shouldRest: boolean;\r\n    intensityRecommendation: 'lower' | 'same' | 'higher';\r\n  };\r\n}\r\n\r\n/**\r\n * ì™„ë£Œìœ¨ ê¸°ë°˜ í”¼ë“œë°± ìƒì„±\r\n */\r\nfunction generateCompletionFeedback(\r\n  completionRate: number,\r\n  skippedCount: number\r\n): FeedbackItem {\r\n  let message: string;\r\n  let emoji: string;\r\n\r\n  if (completionRate === 100) {\r\n    message = pickRandom(COMPLETION_MESSAGES.perfect);\r\n    emoji = 'ğŸ‰';\r\n  } else if (completionRate >= 75) {\r\n    message = pickRandom(COMPLETION_MESSAGES.good);\r\n    emoji = 'ğŸ‘';\r\n  } else if (completionRate >= 50) {\r\n    message = pickRandom(COMPLETION_MESSAGES.partial);\r\n    emoji = 'ğŸ’ª';\r\n  } else {\r\n    message = pickRandom(COMPLETION_MESSAGES.skippedMany);\r\n    emoji = 'ğŸ¤—';\r\n  }\r\n\r\n  return {\r\n    type: 'completion',\r\n    message,\r\n    priority: 1,\r\n    emoji,\r\n  };\r\n}\r\n\r\n/**\r\n * í†µì¦ ë³€í™” ê¸°ë°˜ í”¼ë“œë°± ìƒì„±\r\n */\r\nfunction generatePainFeedback(\r\n  painBefore: Record<string, number>,\r\n  painAfter: Record<string, number>\r\n): FeedbackItem[] {\r\n  const feedbackItems: FeedbackItem[] = [];\r\n\r\n  for (const bodyPart of Object.keys(painAfter)) {\r\n    const before = painBefore[bodyPart] ?? 5;\r\n    const after = painAfter[bodyPart];\r\n    const diff = before - after;\r\n\r\n    let message: string;\r\n    let emoji: string;\r\n    let priority: number;\r\n\r\n    if (diff >= 3) {\r\n      // í†µì¦ í¬ê²Œ ê°ì†Œ\r\n      message = pickRandom(PAIN_FEEDBACK_MESSAGES.decreased.significant);\r\n      emoji = 'âœ¨';\r\n      priority = 2;\r\n    } else if (diff >= 1) {\r\n      // í†µì¦ ì•½ê°„ ê°ì†Œ\r\n      message = pickRandom(PAIN_FEEDBACK_MESSAGES.decreased.slight);\r\n      emoji = 'ğŸ‘';\r\n      priority = 3;\r\n    } else if (diff === 0) {\r\n      // í†µì¦ ìœ ì§€\r\n      message = pickRandom(PAIN_FEEDBACK_MESSAGES.same);\r\n      emoji = 'â¡ï¸';\r\n      priority = 4;\r\n    } else if (diff >= -2) {\r\n      // í†µì¦ ì•½ê°„ ì¦ê°€\r\n      message = pickRandom(PAIN_FEEDBACK_MESSAGES.increased.slight);\r\n      emoji = 'âš ï¸';\r\n      priority = 2;\r\n    } else {\r\n      // í†µì¦ í¬ê²Œ ì¦ê°€\r\n      message = pickRandom(PAIN_FEEDBACK_MESSAGES.increased.significant);\r\n      emoji = 'ğŸš¨';\r\n      priority = 1;\r\n    }\r\n\r\n    feedbackItems.push({\r\n      type: 'pain',\r\n      message: `${bodyPart}: ${message}`,\r\n      priority,\r\n      emoji,\r\n    });\r\n  }\r\n\r\n  return feedbackItems;\r\n}\r\n\r\n/**\r\n * ì—°ì† ê¸°ë¡ í”¼ë“œë°± ìƒì„±\r\n */\r\nfunction generateStreakFeedback(streak: number): FeedbackItem | null {\r\n  const message = getStreakMessage(streak);\r\n  if (!message) return null;\r\n\r\n  return {\r\n    type: 'streak',\r\n    message,\r\n    priority: 2,\r\n    emoji: 'ğŸ”¥',\r\n  };\r\n}\r\n\r\n/**\r\n * ë‹¤ìŒ ì„¸ì…˜ ê¶Œì¥ì‚¬í•­ ìƒì„±\r\n */\r\nfunction generateRecommendation(\r\n  completionRate: number,\r\n  painIncreased: boolean,\r\n  streak: number\r\n): FeedbackItem {\r\n  let message: string;\r\n  let intensity: 'lower' | 'same' | 'higher';\r\n\r\n  if (painIncreased) {\r\n    message = pickRandom(NEXT_SESSION_RECOMMENDATIONS.lowerIntensity);\r\n    intensity = 'lower';\r\n  } else if (completionRate < 50) {\r\n    message = pickRandom(NEXT_SESSION_RECOMMENDATIONS.lowerIntensity);\r\n    intensity = 'lower';\r\n  } else if (streak > 5 && completionRate === 100) {\r\n    // ì—°ì† 5ì¼ ì´ìƒ + ì™„ë²½ ì™„ë£Œ ì‹œ íœ´ì‹ ê¶Œì¥\r\n    message = pickRandom(NEXT_SESSION_RECOMMENDATIONS.rest);\r\n    intensity = 'same';\r\n  } else if (completionRate === 100) {\r\n    message = pickRandom(NEXT_SESSION_RECOMMENDATIONS.higherIntensity);\r\n    intensity = 'higher';\r\n  } else {\r\n    message = pickRandom(NEXT_SESSION_RECOMMENDATIONS.sameIntensity);\r\n    intensity = 'same';\r\n  }\r\n\r\n  return {\r\n    type: 'recommendation',\r\n    message,\r\n    priority: 3,\r\n    emoji: 'ğŸ“Œ',\r\n  };\r\n}\r\n\r\n/**\r\n * ë™ê¸°ë¶€ì—¬ ë©”ì‹œì§€ ìƒì„±\r\n */\r\nfunction generateMotivation(): FeedbackItem {\r\n  const hour = new Date().getHours();\r\n  const day = new Date().getDay();\r\n  const isWeekend = day === 0 || day === 6;\r\n\r\n  let message: string;\r\n\r\n  if (isWeekend) {\r\n    message = pickRandom(MOTIVATION_MESSAGES.weekend);\r\n  } else if (hour < 12) {\r\n    message = pickRandom(MOTIVATION_MESSAGES.morning);\r\n  } else if (hour >= 18) {\r\n    message = pickRandom(MOTIVATION_MESSAGES.evening);\r\n  } else {\r\n    message = pickRandom(MOTIVATION_MESSAGES.general);\r\n  }\r\n\r\n  return {\r\n    type: 'motivation',\r\n    message,\r\n    priority: 5,\r\n    emoji: 'ğŸ’š',\r\n  };\r\n}\r\n\r\n/**\r\n * ë¶€ìœ„ë³„ íŠ¹í™” ì¡°ì–¸ ìƒì„±\r\n */\r\nfunction generateBodyPartAdvice(\r\n  bodyParts: string[],\r\n  painAfter: Record<string, number>\r\n): FeedbackItem[] {\r\n  const items: FeedbackItem[] = [];\r\n\r\n  for (const part of bodyParts) {\r\n    const advice = BODY_PART_SPECIFIC_ADVICE[part as keyof typeof BODY_PART_SPECIFIC_ADVICE];\r\n    if (!advice) continue;\r\n\r\n    const pain = painAfter[part] ?? 5;\r\n\r\n    if (pain >= 7) {\r\n      items.push({\r\n        type: 'bodyPart',\r\n        message: advice.recovery,\r\n        priority: 2,\r\n        emoji: 'ğŸ’†',\r\n      });\r\n    } else if (pain >= 4) {\r\n      items.push({\r\n        type: 'bodyPart',\r\n        message: advice.afterPain,\r\n        priority: 4,\r\n        emoji: 'ğŸ©¹',\r\n      });\r\n    }\r\n  }\r\n\r\n  return items;\r\n}\r\n\r\n/**\r\n * ì„¹ì…˜ë³„ í”¼ë“œë°± ìƒì„±\r\n */\r\nfunction generateSectionFeedback(\r\n  sectionStats: SessionResult['sectionStats']\r\n): FeedbackItem[] {\r\n  const items: FeedbackItem[] = [];\r\n\r\n  // ì¤€ë¹„ìš´ë™ ê±´ë„ˆëœ€ ê²½ê³ \r\n  if (sectionStats.warmup.total > 0 && sectionStats.warmup.completed === 0) {\r\n    items.push({\r\n      type: 'section',\r\n      message: SECTION_MESSAGES.warmup.skip,\r\n      priority: 2,\r\n      emoji: 'âš¡',\r\n    });\r\n  }\r\n\r\n  // ë§ˆë¬´ë¦¬ìš´ë™ ê±´ë„ˆëœ€ ê²½ê³ \r\n  if (sectionStats.cooldown.total > 0 && sectionStats.cooldown.completed === 0) {\r\n    items.push({\r\n      type: 'section',\r\n      message: SECTION_MESSAGES.cooldown.skip,\r\n      priority: 3,\r\n      emoji: 'ğŸ§˜',\r\n    });\r\n  }\r\n\r\n  // ë©”ì¸ ìš´ë™ ë¶€ë¶„ ì™„ë£Œ\r\n  if (\r\n    sectionStats.main.total > 0 &&\r\n    sectionStats.main.completed > 0 &&\r\n    sectionStats.main.completed < sectionStats.main.total\r\n  ) {\r\n    items.push({\r\n      type: 'section',\r\n      message: SECTION_MESSAGES.main.partial,\r\n      priority: 3,\r\n      emoji: 'ğŸ’ª',\r\n    });\r\n  }\r\n\r\n  return items;\r\n}\r\n\r\n/**\r\n * ì‹œê°„ í”¼ë“œë°± ìƒì„±\r\n */\r\nfunction generateTimeFeedback(\r\n  plannedTime: number,\r\n  actualTime: number\r\n): FeedbackItem | null {\r\n  const ratio = actualTime / plannedTime;\r\n\r\n  if (ratio < 0.7) {\r\n    return {\r\n      type: 'time',\r\n      message: pickRandom(TIME_FEEDBACK.faster),\r\n      priority: 4,\r\n      emoji: 'â±ï¸',\r\n    };\r\n  } else if (ratio <= 1.1) {\r\n    return {\r\n      type: 'time',\r\n      message: pickRandom(TIME_FEEDBACK.onTime),\r\n      priority: 5,\r\n      emoji: 'â±ï¸',\r\n    };\r\n  } else {\r\n    return {\r\n      type: 'time',\r\n      message: pickRandom(TIME_FEEDBACK.slower),\r\n      priority: 5,\r\n      emoji: 'â±ï¸',\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * ì „ì²´ í”¼ë“œë°± ìƒì„±\r\n */\r\nexport function generateFeedback(input: FeedbackInput): FeedbackResult {\r\n  const {\r\n    sessionResult,\r\n    userFeedback,\r\n    painBefore = {},\r\n    streak = 0,\r\n    bodyParts = [],\r\n  } = input;\r\n\r\n  const feedbackItems: FeedbackItem[] = [];\r\n\r\n  // 1. ì™„ë£Œ ì¶•í•˜ ë©”ì‹œì§€ (í•­ìƒ í¬í•¨)\r\n  feedbackItems.push(\r\n    generateCompletionFeedback(\r\n      sessionResult.completionRate,\r\n      sessionResult.skippedExercises\r\n    )\r\n  );\r\n\r\n  // 2. í†µì¦ ë³€í™” í”¼ë“œë°±\r\n  if (userFeedback?.painAfter && Object.keys(painBefore).length > 0) {\r\n    feedbackItems.push(...generatePainFeedback(painBefore, userFeedback.painAfter));\r\n  }\r\n\r\n  // 3. ì—°ì† ê¸°ë¡ ì¶•í•˜\r\n  const streakFeedback = generateStreakFeedback(streak);\r\n  if (streakFeedback) {\r\n    feedbackItems.push(streakFeedback);\r\n  }\r\n\r\n  // 4. ì„¹ì…˜ë³„ í”¼ë“œë°±\r\n  feedbackItems.push(...generateSectionFeedback(sessionResult.sectionStats));\r\n\r\n  // 5. ë¶€ìœ„ë³„ íŠ¹í™” ì¡°ì–¸\r\n  if (userFeedback?.painAfter) {\r\n    feedbackItems.push(...generateBodyPartAdvice(bodyParts, userFeedback.painAfter));\r\n  }\r\n\r\n  // 6. ì‹œê°„ í”¼ë“œë°±\r\n  if (sessionResult.totalPlannedTime > 0) {\r\n    const timeFeedback = generateTimeFeedback(\r\n      sessionResult.totalPlannedTime,\r\n      sessionResult.totalActualTime\r\n    );\r\n    if (timeFeedback) {\r\n      feedbackItems.push(timeFeedback);\r\n    }\r\n  }\r\n\r\n  // 7. ë‹¤ìŒ ì„¸ì…˜ ê¶Œì¥ì‚¬í•­\r\n  const painIncreased = Object.keys(userFeedback?.painAfter ?? {}).some(\r\n    part => (userFeedback?.painAfter?.[part] ?? 0) > (painBefore[part] ?? 5)\r\n  );\r\n  feedbackItems.push(\r\n    generateRecommendation(sessionResult.completionRate, painIncreased, streak)\r\n  );\r\n\r\n  // 8. ë™ê¸°ë¶€ì—¬ ë©”ì‹œì§€\r\n  feedbackItems.push(generateMotivation());\r\n\r\n  // ìš°ì„ ìˆœìœ„ë¡œ ì •ë ¬\r\n  feedbackItems.sort((a, b) => a.priority - b.priority);\r\n\r\n  // ìš”ì•½ ìƒì„±\r\n  const overallTone =\r\n    sessionResult.completionRate >= 75\r\n      ? 'positive'\r\n      : sessionResult.completionRate >= 50\r\n        ? 'neutral'\r\n        : 'encouraging';\r\n\r\n  const shouldRest = painIncreased || streak >= 6;\r\n\r\n  const intensityRecommendation = painIncreased\r\n    ? 'lower'\r\n    : sessionResult.completionRate === 100 && !shouldRest\r\n      ? 'higher'\r\n      : 'same';\r\n\r\n  // ë©”ì¸ ë©”ì‹œì§€ (ì²« ë²ˆì§¸ ì•„ì´í…œ)\r\n  const mainMessage = feedbackItems[0]?.message ?? 'ìš´ë™ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!';\r\n\r\n  return {\r\n    mainMessage,\r\n    feedbackItems,\r\n    summary: {\r\n      overallTone,\r\n      shouldRest,\r\n      intensityRecommendation,\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * ê°„ë‹¨í•œ í”¼ë“œë°± ë©”ì‹œì§€ ìƒì„± (UIìš©)\r\n * ìµœëŒ€ 3ê°œì˜ í”¼ë“œë°±ë§Œ ë°˜í™˜\r\n */\r\nexport function generateSimpleFeedback(\r\n  input: FeedbackInput,\r\n  maxItems: number = 3\r\n): string[] {\r\n  const result = generateFeedback(input);\r\n  return result.feedbackItems\r\n    .slice(0, maxItems)\r\n    .map(item => (item.emoji ? `${item.emoji} ${item.message}` : item.message));\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\coaching\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\constants\\body-part-priority.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\constants\\difficulty-levels.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\constants\\naver-map-search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\constants\\operating-hours.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\engine\\__tests__\\contraindication-engine.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expect' is defined but never used.","line":5,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkContraindication' is defined but never used.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkContraindicationsBatch' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'input' is assigned a value but never used.","line":35,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'input' is assigned a value but never used.","line":47,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'input' is assigned a value but never used.","line":59,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'input' is assigned a value but never used.","line":72,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ENG-S5-01: Contraindication Engine Unit Tests\r\n */\r\n\r\nimport { describe, it, expect, vi, beforeEach } from 'vitest';\r\n\r\n// Mock Prisma\r\nvi.mock('@prisma/client', () => {\r\n  return {\r\n    PrismaClient: class {\r\n      bodyPartContraindication = {\r\n        findMany: vi.fn()\r\n      }\r\n      exerciseTemplate = {\r\n        findMany: vi.fn()\r\n      }\r\n    }\r\n  };\r\n});\r\n\r\n// Import after mocking\r\nimport { \r\n  checkContraindication, \r\n  checkContraindicationsBatch \r\n} from '@/lib/engine/contraindication-engine';\r\n\r\ndescribe('Contraindication Engine', () => {\r\n  beforeEach(() => {\r\n    vi.clearAllMocks();\r\n  });\r\n\r\n  describe('checkContraindication', () => {\r\n    it('í†µì¦ 5 + hard ê¸ˆê¸° = ì œì™¸', async () => {\r\n      // This is a conceptual test - actual implementation would mock Prisma\r\n      const input = {\r\n        templateId: 'template-001',\r\n        bodyPartId: 'body-part-001',\r\n        painLevel: 5,\r\n        condition: null\r\n      };\r\n\r\n      // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” Prisma mock ì„¤ì • í•„ìš”\r\n      // expect ê²°ê³¼ëŠ” isExcluded: true ì˜ˆìƒ\r\n    });\r\n\r\n    it('í†µì¦ 2 + ê¸ˆê¸° ì—†ìŒ = í†µê³¼', async () => {\r\n      const input = {\r\n        templateId: 'template-002',\r\n        bodyPartId: 'body-part-001',\r\n        painLevel: 2,\r\n        condition: null\r\n      };\r\n\r\n      // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ê¸ˆê¸° ì¡°ê±´ ì—†ëŠ” ê²½ìš° í…ŒìŠ¤íŠ¸\r\n      // expect ê²°ê³¼ëŠ” isExcluded: false ì˜ˆìƒ\r\n    });\r\n\r\n    it('soft ê¸ˆê¸° = ê²½ê³ ë§Œ (ì œì™¸ ì•ˆí•¨)', async () => {\r\n      const input = {\r\n        templateId: 'template-003',\r\n        bodyPartId: 'body-part-001',\r\n        painLevel: 3,\r\n        condition: null\r\n      };\r\n\r\n      // soft ê¸ˆê¸°ì˜ ê²½ìš° isExcluded: false, reason ì¡´ì¬\r\n    });\r\n  });\r\n\r\n  describe('checkContraindicationsBatch', () => {\r\n    it('ì—¬ëŸ¬ ìš´ë™ ì¤‘ ì¼ë¶€ë§Œ ì œì™¸', async () => {\r\n      const input = {\r\n        templateIds: ['t1', 't2', 't3'],\r\n        bodyPartId: 'bp-001',\r\n        painLevel: 4,\r\n        condition: null\r\n      };\r\n\r\n      // ë°°ì¹˜ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\engine\\__tests__\\difficulty-engine.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\engine\\contraindication-engine.ts","messages":[{"ruleId":"import/no-anonymous-default-export","severity":1,"message":"Assign object to a variable before exporting as module default","line":206,"column":1,"nodeType":"ExportDefaultDeclaration","endLine":210,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ENG-S3-02: Contraindication Engine\r\n * \r\n * ê¸ˆê¸° ì¡°ê±´ì„ ì²´í¬í•˜ê³  ì œì™¸í•  ìš´ë™ì„ ê²°ì •í•˜ëŠ” ì—”ì§„\r\n */\r\n\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// ì…ë ¥ íƒ€ì…\r\nexport interface ContraindicationCheckInput {\r\n  templateId: string;\r\n  bodyPartId: string;\r\n  painLevel: number;\r\n  condition?: 'ê¸‰ì„±' | 'ë§Œì„±' | 'ìˆ˜ìˆ í›„' | null;\r\n}\r\n\r\n// ê²°ê³¼ íƒ€ì…\r\nexport interface ContraindicationResult {\r\n  isExcluded: boolean;\r\n  reason?: string;\r\n  severity: 'soft' | 'hard';\r\n  alternativeTemplateIds?: string[];\r\n}\r\n\r\n// ë°°ì¹˜ ì²´í¬ ì…ë ¥\r\nexport interface BatchContraindicationInput {\r\n  templateIds: string[];\r\n  bodyPartId: string;\r\n  painLevel: number;\r\n  condition?: 'ê¸‰ì„±' | 'ë§Œì„±' | 'ìˆ˜ìˆ í›„' | null;\r\n}\r\n\r\n// ë°°ì¹˜ ì²´í¬ ê²°ê³¼\r\nexport interface BatchContraindicationResult {\r\n  excludedTemplateIds: string[];\r\n  warningTemplateIds: string[];\r\n  exclusionReasons: Record<string, string>;\r\n  alternatives: Record<string, string[]>;\r\n}\r\n\r\n/**\r\n * ë‹¨ì¼ ìš´ë™ì— ëŒ€í•œ ê¸ˆê¸° ì¡°ê±´ ì²´í¬\r\n */\r\nexport async function checkContraindication(\r\n  input: ContraindicationCheckInput\r\n): Promise<ContraindicationResult> {\r\n  const { templateId, bodyPartId, painLevel, condition } = input;\r\n\r\n  // ê¸ˆê¸° ì¡°ê±´ ì¡°íšŒ\r\n  const contraindications = await prisma.bodyPartContraindication.findMany({\r\n    where: {\r\n      exerciseTemplateId: templateId,\r\n      bodyPartId: bodyPartId,\r\n      isActive: true,\r\n      // í†µì¦ ë ˆë²¨ ë²”ìœ„ ì²´í¬\r\n      OR: [\r\n        { painLevelMin: null }, // ëª¨ë“  í†µì¦ ë ˆë²¨ì— ì ìš©\r\n        { painLevelMin: { lte: painLevel } }\r\n      ]\r\n    }\r\n  });\r\n\r\n  if (contraindications.length === 0) {\r\n    return { isExcluded: false, severity: 'soft' };\r\n  }\r\n\r\n  // ê°€ì¥ ì‹¬ê°í•œ ê¸ˆê¸° ì¡°ê±´ ì°¾ê¸°\r\n  const hardContra = contraindications.find(c => c.severity === 'hard');\r\n  \r\n  if (hardContra) {\r\n    // ì¡°ê±´ ë§¤ì¹­ ì²´í¬\r\n    if (condition && hardContra.condition && hardContra.condition !== condition) {\r\n      // ì¡°ê±´ì´ ë§ì§€ ì•Šìœ¼ë©´ softë¡œ ì²˜ë¦¬\r\n      return {\r\n        isExcluded: false,\r\n        reason: hardContra.reason || 'ì£¼ì˜ í•„ìš”',\r\n        severity: 'soft'\r\n      };\r\n    }\r\n\r\n    // ëŒ€ì²´ ìš´ë™ ì°¾ê¸°\r\n    const alternatives = await findAlternativeExercises(templateId, bodyPartId, painLevel);\r\n\r\n    return {\r\n      isExcluded: true,\r\n      reason: hardContra.reason || 'ì´ ìš´ë™ì€ í˜„ì¬ ìƒíƒœì—ì„œ ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',\r\n      severity: 'hard',\r\n      alternativeTemplateIds: alternatives\r\n    };\r\n  }\r\n\r\n  // soft ê¸ˆê¸°ë§Œ ìˆëŠ” ê²½ìš°\r\n  const softContra = contraindications[0];\r\n  return {\r\n    isExcluded: false,\r\n    reason: softContra.reason || 'ì£¼ì˜í•˜ì—¬ ìˆ˜í–‰í•˜ì„¸ìš”.',\r\n    severity: 'soft'\r\n  };\r\n}\r\n\r\n/**\r\n * ì—¬ëŸ¬ ìš´ë™ì— ëŒ€í•œ ê¸ˆê¸° ì¡°ê±´ ë°°ì¹˜ ì²´í¬\r\n */\r\nexport async function checkContraindicationsBatch(\r\n  input: BatchContraindicationInput\r\n): Promise<BatchContraindicationResult> {\r\n  const { templateIds, bodyPartId, painLevel, condition } = input;\r\n\r\n  const excludedTemplateIds: string[] = [];\r\n  const warningTemplateIds: string[] = [];\r\n  const exclusionReasons: Record<string, string> = {};\r\n  const alternatives: Record<string, string[]> = {};\r\n\r\n  for (const templateId of templateIds) {\r\n    const result = await checkContraindication({\r\n      templateId,\r\n      bodyPartId,\r\n      painLevel,\r\n      condition\r\n    });\r\n\r\n    if (result.isExcluded) {\r\n      excludedTemplateIds.push(templateId);\r\n      if (result.reason) {\r\n        exclusionReasons[templateId] = result.reason;\r\n      }\r\n      if (result.alternativeTemplateIds) {\r\n        alternatives[templateId] = result.alternativeTemplateIds;\r\n      }\r\n    } else if (result.severity === 'soft' && result.reason) {\r\n      warningTemplateIds.push(templateId);\r\n      exclusionReasons[templateId] = result.reason;\r\n    }\r\n  }\r\n\r\n  return {\r\n    excludedTemplateIds,\r\n    warningTemplateIds,\r\n    exclusionReasons,\r\n    alternatives\r\n  };\r\n}\r\n\r\n/**\r\n * ëŒ€ì²´ ìš´ë™ ì°¾ê¸°\r\n */\r\nasync function findAlternativeExercises(\r\n  excludedTemplateId: string,\r\n  bodyPartId: string,\r\n  painLevel: number\r\n): Promise<string[]> {\r\n  // ì œì™¸ëœ ìš´ë™ê³¼ ê°™ì€ ë¶€ìœ„ì˜ ë‹¤ë¥¸ ìš´ë™ ì°¾ê¸°\r\n  const alternatives = await prisma.exerciseTemplate.findMany({\r\n    where: {\r\n      bodyPartId,\r\n      isActive: true,\r\n      id: { not: excludedTemplateId },\r\n      // ë‚®ì€ ê°•ë„ ìš°ì„ \r\n      intensityLevel: { lte: Math.max(1, 3 - Math.floor(painLevel / 2)) }\r\n    },\r\n    select: { id: true },\r\n    take: 3\r\n  });\r\n\r\n  return alternatives.map(a => a.id);\r\n}\r\n\r\n/**\r\n * ì½”ìŠ¤ ìƒì„± ì‹œ ê¸ˆê¸° ì¡°ê±´ í•„í„°ë§\r\n */\r\nexport async function filterContraindicatedExercises(\r\n  exercises: { id: string; templateId: string }[],\r\n  bodyPartId: string,\r\n  painLevel: number,\r\n  condition?: 'ê¸‰ì„±' | 'ë§Œì„±' | 'ìˆ˜ìˆ í›„' | null\r\n): Promise<{\r\n  filtered: { id: string; templateId: string }[];\r\n  excluded: { id: string; templateId: string; reason: string }[];\r\n}> {\r\n  const filtered: { id: string; templateId: string }[] = [];\r\n  const excluded: { id: string; templateId: string; reason: string }[] = [];\r\n\r\n  for (const exercise of exercises) {\r\n    const result = await checkContraindication({\r\n      templateId: exercise.templateId,\r\n      bodyPartId,\r\n      painLevel,\r\n      condition\r\n    });\r\n\r\n    if (result.isExcluded) {\r\n      excluded.push({\r\n        ...exercise,\r\n        reason: result.reason || 'ê¸ˆê¸° ì¡°ê±´ì— í•´ë‹¹'\r\n      });\r\n    } else {\r\n      filtered.push(exercise);\r\n    }\r\n  }\r\n\r\n  return { filtered, excluded };\r\n}\r\n\r\nexport default {\r\n  checkContraindication,\r\n  checkContraindicationsBatch,\r\n  filterContraindicatedExercises\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\engine\\difficulty-engine.ts","messages":[{"ruleId":"import/no-anonymous-default-export","severity":1,"message":"Assign object to a variable before exporting as module default","line":171,"column":1,"nodeType":"ExportDefaultDeclaration","endLine":174,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ENG-S4-02: Difficulty Engine\r\n * \r\n * ì‚¬ìš©ì ìƒíƒœ ê¸°ë°˜ ìë™ ë‚œì´ë„ ì¡°ì ˆ ì—”ì§„\r\n */\r\n\r\nimport { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// ì…ë ¥ íƒ€ì…\r\nexport interface DifficultyInput {\r\n  userId?: string;\r\n  selectedBodyParts: string[];\r\n  painLevels: Record<string, number>;  // bodyPartId -> painLevel\r\n  userRehabPhase?: 'initial' | 'recovery' | 'strengthening';\r\n}\r\n\r\n// ì¶œë ¥ íƒ€ì…\r\nexport interface DifficultyOutput {\r\n  recommendedIntensity: 1 | 2 | 3 | 4 | 5;\r\n  adjustmentReason: string;\r\n  adjustments: {\r\n    repsMultiplier: number;      // 0.5 ~ 1.5\r\n    setsMultiplier: number;      // 0.5 ~ 1.5\r\n    restMultiplier: number;      // 0.8 ~ 1.5\r\n    durationMultiplier: number;  // 0.7 ~ 1.3\r\n  };\r\n  warnings: string[];\r\n}\r\n\r\n// ì¬í™œ ë‹¨ê³„ë³„ ê¸°ë³¸ ì„¤ì •\r\nconst PHASE_CONFIG = {\r\n  initial: {\r\n    maxIntensity: 2,\r\n    repsMultiplier: 0.7,\r\n    setsMultiplier: 0.8,\r\n    restMultiplier: 1.3,\r\n    durationMultiplier: 0.8\r\n  },\r\n  recovery: {\r\n    maxIntensity: 3,\r\n    repsMultiplier: 1.0,\r\n    setsMultiplier: 1.0,\r\n    restMultiplier: 1.0,\r\n    durationMultiplier: 1.0\r\n  },\r\n  strengthening: {\r\n    maxIntensity: 4,\r\n    repsMultiplier: 1.2,\r\n    setsMultiplier: 1.1,\r\n    restMultiplier: 0.8,\r\n    durationMultiplier: 1.1\r\n  }\r\n};\r\n\r\n// í†µì¦ ë ˆë²¨ë³„ ì¡°ì •\r\nconst PAIN_ADJUSTMENTS = {\r\n  1: { intensityMod: 1, repsMod: 1.2, restMod: 0.9 },   // ê±°ì˜ ì—†ìŒ\r\n  2: { intensityMod: 0, repsMod: 1.0, restMod: 1.0 },   // ì•½ê°„\r\n  3: { intensityMod: 0, repsMod: 0.9, restMod: 1.1 },   // ì¤‘ê°„\r\n  4: { intensityMod: -1, repsMod: 0.7, restMod: 1.3 },  // ì‹¬í•¨\r\n  5: { intensityMod: -2, repsMod: 0.5, restMod: 1.5 }   // ë§¤ìš° ì‹¬í•¨\r\n};\r\n\r\n/**\r\n * ë‚œì´ë„ ê³„ì‚°\r\n */\r\nexport async function calculateDifficulty(\r\n  input: DifficultyInput\r\n): Promise<DifficultyOutput> {\r\n  const { userId, painLevels, userRehabPhase } = input;\r\n  \r\n  const warnings: string[] = [];\r\n  let phase: 'initial' | 'recovery' | 'strengthening' = userRehabPhase || 'initial';\r\n  let fitnessLevel = 2; // ê¸°ë³¸ê°’\r\n\r\n  // ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ\r\n  if (userId) {\r\n    const profile = await prisma.userFitnessProfile.findUnique({\r\n      where: { userId }\r\n    });\r\n\r\n    if (profile) {\r\n      fitnessLevel = profile.fitnessLevel;\r\n      phase = profile.rehabPhase as 'initial' | 'recovery' | 'strengthening';\r\n      \r\n      // ì™„ë£Œìœ¨ì´ ë‚®ìœ¼ë©´ ê²½ê³ \r\n      if (profile.avgCompletionRate && profile.avgCompletionRate < 0.5) {\r\n        warnings.push('ìµœê·¼ ì½”ìŠ¤ ì™„ë£Œìœ¨ì´ ë‚®ìŠµë‹ˆë‹¤. ë‚œì´ë„ë¥¼ ë‚®ì¶”ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.');\r\n      }\r\n    }\r\n  }\r\n\r\n  // í‰ê·  í†µì¦ ë ˆë²¨ ê³„ì‚°\r\n  const painValues = Object.values(painLevels);\r\n  const avgPain = painValues.length > 0 \r\n    ? painValues.reduce((a, b) => a + b, 0) / painValues.length \r\n    : 2;\r\n  const maxPain = painValues.length > 0 ? Math.max(...painValues) : 2;\r\n\r\n  // ê¸°ë³¸ ì„¤ì • ê°€ì ¸ì˜¤ê¸°\r\n  const phaseConfig = PHASE_CONFIG[phase];\r\n  const painAdjust = PAIN_ADJUSTMENTS[Math.min(5, Math.round(avgPain)) as 1|2|3|4|5];\r\n\r\n  // ê¶Œì¥ ê°•ë„ ê³„ì‚°\r\n  const baseIntensity = Math.min(fitnessLevel, phaseConfig.maxIntensity);\r\n  let recommendedIntensity = Math.max(1, Math.min(5, baseIntensity + painAdjust.intensityMod)) as 1|2|3|4|5;\r\n\r\n  // ìµœëŒ€ í†µì¦ì´ 4 ì´ìƒì´ë©´ ê°•ë„ ì œí•œ\r\n  if (maxPain >= 4) {\r\n    recommendedIntensity = Math.min(recommendedIntensity, 2) as 1|2|3|4|5;\r\n    warnings.push('í†µì¦ì´ ì‹¬í•œ ë¶€ìœ„ê°€ ìˆì–´ ê°•ë„ë¥¼ ì œí•œí•©ë‹ˆë‹¤.');\r\n  }\r\n\r\n  // Multiplier ê³„ì‚°\r\n  const adjustments = {\r\n    repsMultiplier: clamp(phaseConfig.repsMultiplier * painAdjust.repsMod, 0.5, 1.5),\r\n    setsMultiplier: clamp(phaseConfig.setsMultiplier, 0.5, 1.5),\r\n    restMultiplier: clamp(phaseConfig.restMultiplier * painAdjust.restMod, 0.8, 1.5),\r\n    durationMultiplier: clamp(phaseConfig.durationMultiplier, 0.7, 1.3)\r\n  };\r\n\r\n  // ì¡°ì • ì´ìœ  ìƒì„±\r\n  const reasons: string[] = [];\r\n  reasons.push(`ì¬í™œ ë‹¨ê³„: ${getPhaseLabel(phase)}`);\r\n  if (avgPain >= 3) {\r\n    reasons.push(`í‰ê·  í†µì¦ ${avgPain.toFixed(1)}ë¡œ ì¸í•´ ê°•ë„ ì¡°ì •`);\r\n  }\r\n  if (fitnessLevel !== 2) {\r\n    reasons.push(`í”¼íŠ¸ë‹ˆìŠ¤ ë ˆë²¨ ${fitnessLevel}`);\r\n  }\r\n\r\n  return {\r\n    recommendedIntensity,\r\n    adjustmentReason: reasons.join(', '),\r\n    adjustments,\r\n    warnings\r\n  };\r\n}\r\n\r\n/**\r\n * ìš´ë™ì— ë‚œì´ë„ ì¡°ì • ì ìš©\r\n */\r\nexport function applyDifficultyAdjustments(\r\n  exercise: { reps?: number; sets?: number; restSeconds?: number; durationMinutes?: number },\r\n  adjustments: DifficultyOutput['adjustments']\r\n): { reps: number; sets: number; restSeconds: number; durationMinutes: number } {\r\n  return {\r\n    reps: Math.round((exercise.reps || 10) * adjustments.repsMultiplier),\r\n    sets: Math.round((exercise.sets || 3) * adjustments.setsMultiplier),\r\n    restSeconds: Math.round((exercise.restSeconds || 30) * adjustments.restMultiplier),\r\n    durationMinutes: Math.round((exercise.durationMinutes || 5) * adjustments.durationMultiplier)\r\n  };\r\n}\r\n\r\n// í—¬í¼ í•¨ìˆ˜\r\nfunction clamp(value: number, min: number, max: number): number {\r\n  return Math.max(min, Math.min(max, value));\r\n}\r\n\r\nfunction getPhaseLabel(phase: string): string {\r\n  switch (phase) {\r\n    case 'initial': return 'ì´ˆê¸° ë‹¨ê³„';\r\n    case 'recovery': return 'íšŒë³µ ë‹¨ê³„';\r\n    case 'strengthening': return 'ê°•í™” ë‹¨ê³„';\r\n    default: return phase;\r\n  }\r\n}\r\n\r\nexport default {\r\n  calculateDifficulty,\r\n  applyDifficultyAdjustments\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\naver-map\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\naver-map\\monitor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\prisma\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\services\\gym-search.service.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2068,2071],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2068,2071],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2109,2112],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2109,2112],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2306,2309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2306,2309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2334,2337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2334,2337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":145,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4861,4864],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4861,4864],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":156,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5152,5155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5152,5155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5200,5203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5200,5203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":166,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5483,5486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5483,5486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":229,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7240,7243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7240,7243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":230,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":230,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7265,7268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7265,7268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":279,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8524,8527],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8524,8527],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":285,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8647,8650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8647,8650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":342,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":342,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10353,10356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10353,10356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":356,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":356,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10631,10634],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10631,10634],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\services\\place-search-cache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\services\\place-search.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\supabase\\service-role.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\ai-coach.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\calculate-priority.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\classify-by-section.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BODY_PART_IDS' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * classify-by-section.ts ë‹¨ìœ„ í…ŒìŠ¤íŠ¸\r\n * \r\n * ìš´ë™ì„ ì„¹ì…˜ë³„(warmup, main, cooldown)ë¡œ ë¶„ë¥˜í•˜ëŠ” ë¡œì§ì„ ê²€ì¦í•©ë‹ˆë‹¤.\r\n */\r\n\r\nimport { describe, it, expect } from 'vitest';\r\nimport { classifyBySection } from '../classify-by-section';\r\nimport {\r\n  createMergedExercise,\r\n  EXERCISE_IDS,\r\n  BODY_PART_IDS,\r\n  EXERCISES,\r\n} from './test-fixtures';\r\n\r\ndescribe('classifyBySection', () => {\r\n  // ============================================\r\n  // ê¸°ë³¸ ë™ì‘ í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('ê¸°ë³¸ ë™ì‘', () => {\r\n    it('ë¹ˆ ë°°ì—´ì„ ì…ë ¥í•˜ë©´ ëª¨ë“  ì„¹ì…˜ì´ ë¹ˆ ë°°ì—´ì¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤', () => {\r\n      // Arrange\r\n      const exercises: Parameters<typeof classifyBySection>[0] = [];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      expect(result.warmup).toEqual([]);\r\n      expect(result.main).toEqual([]);\r\n      expect(result.cooldown).toEqual([]);\r\n    });\r\n\r\n    it('ê²°ê³¼ ê°ì²´ì— warmup, main, cooldown í‚¤ê°€ ì¡´ì¬í•œë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [EXERCISES.latPulldown];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      expect(result).toHaveProperty('warmup');\r\n      expect(result).toHaveProperty('main');\r\n      expect(result).toHaveProperty('cooldown');\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // ê°•ë„ë³„ ë¶„ë¥˜ í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('ê°•ë„ë³„ ë¶„ë¥˜', () => {\r\n    it('ë‚®ì€ ê°•ë„(intensityLevel <= 2) ìš´ë™ì€ warmup/cooldown í›„ë³´ê°€ ëœë‹¤', () => {\r\n      // Arrange\r\n      const lowIntensity = [\r\n        EXERCISES.childPose,      // intensity 1\r\n        EXERCISES.catStretch,     // intensity 1\r\n        EXERCISES.wallPushUp,     // intensity 1\r\n        EXERCISES.superman,       // intensity 2\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(lowIntensity);\r\n      \r\n      // Assert\r\n      // ëª¨ë“  ë‚®ì€ ê°•ë„ ìš´ë™ì´ warmup ë˜ëŠ” cooldownì— ë¶„ë¥˜ë¨\r\n      const allInWarmupOrCooldown = lowIntensity.every(exercise => \r\n        result.warmup.some(e => e.exerciseTemplateId === exercise.exerciseTemplateId) ||\r\n        result.cooldown.some(e => e.exerciseTemplateId === exercise.exerciseTemplateId) ||\r\n        result.main.some(e => e.exerciseTemplateId === exercise.exerciseTemplateId)\r\n      );\r\n      expect(allInWarmupOrCooldown).toBe(true);\r\n    });\r\n\r\n    it('ë†’ì€ ê°•ë„(intensityLevel > 2) ìš´ë™ì€ mainì— ë¶„ë¥˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const highIntensity = [\r\n        EXERCISES.latPulldown,  // intensity 3\r\n        EXERCISES.pushUp,       // intensity 3\r\n        EXERCISES.lunge,        // intensity 3\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(highIntensity);\r\n      \r\n      // Assert\r\n      expect(result.main.length).toBe(3);\r\n      expect(result.warmup.length).toBe(0);\r\n      expect(result.cooldown.length).toBe(0);\r\n    });\r\n\r\n    it('intensityLevelì´ ì—†ëŠ” ìš´ë™ì€ ë‚®ì€ ê°•ë„ë¡œ ì²˜ë¦¬ëœë‹¤', () => {\r\n      // Arrange\r\n      const noIntensity = createMergedExercise({\r\n        exerciseTemplateId: 'no-intensity-001',\r\n        exerciseTemplateName: 'ê°•ë„ ë¯¸ì • ìš´ë™',\r\n        intensityLevel: undefined,\r\n      });\r\n      \r\n      // Act\r\n      const result = classifyBySection([noIntensity]);\r\n      \r\n      // Assert\r\n      // intensityLevelì´ ì—†ìœ¼ë©´ warmup/cooldown í›„ë³´\r\n      expect(result.warmup.length + result.cooldown.length).toBeGreaterThanOrEqual(1);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // Warmup ë¶„ë¥˜ í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('Warmup ë¶„ë¥˜', () => {\r\n    it('warmupì—ëŠ” ìµœì†Œ 2ê°œì˜ ìš´ë™ì´ ë°°ì¹˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      expect(result.warmup.length).toBeGreaterThanOrEqual(2);\r\n    });\r\n\r\n    it('warmupì—ëŠ” ìµœëŒ€ 4ê°œì˜ ìš´ë™ì´ ë°°ì¹˜ëœë‹¤', () => {\r\n      // Arrange\r\n      // 10ê°œì˜ ë‚®ì€ ê°•ë„ ìš´ë™ ìƒì„±\r\n      const manyLowIntensity = Array.from({ length: 10 }, (_, i) => \r\n        createMergedExercise({\r\n          exerciseTemplateId: `low-${i}`,\r\n          exerciseTemplateName: `ë‚®ì€ ê°•ë„ ìš´ë™ ${i}`,\r\n          intensityLevel: 1,\r\n          priorityScore: 50 + i,\r\n        })\r\n      );\r\n      \r\n      // Act\r\n      const result = classifyBySection(manyLowIntensity);\r\n      \r\n      // Assert\r\n      expect(result.warmup.length).toBeLessThanOrEqual(4);\r\n    });\r\n\r\n    it('warmup ìš´ë™ì—ëŠ” section: \"warmup\"ì´ ì„¤ì •ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [EXERCISES.childPose, EXERCISES.catStretch];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      result.warmup.forEach(exercise => {\r\n        expect(exercise.section).toBe('warmup');\r\n      });\r\n    });\r\n\r\n    it('warmup ìš´ë™ì—ëŠ” orderInSectionì´ 1ë¶€í„° ìˆœì„œëŒ€ë¡œ ì„¤ì •ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      result.warmup.forEach((exercise, index) => {\r\n        expect(exercise.orderInSection).toBe(index + 1);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // Main ë¶„ë¥˜ í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('Main ë¶„ë¥˜', () => {\r\n    it('mainì—ëŠ” ë†’ì€ ê°•ë„ ìš´ë™ì´ í¬í•¨ëœë‹¤', () => {\r\n      // Arrange\r\n      const mixedExercises = [\r\n        EXERCISES.latPulldown,  // high intensity\r\n        EXERCISES.pushUp,       // high intensity\r\n        EXERCISES.childPose,    // low intensity\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(mixedExercises);\r\n      \r\n      // Assert\r\n      const mainIds = result.main.map(e => e.exerciseTemplateId);\r\n      expect(mainIds).toContain(EXERCISE_IDS.latPulldown);\r\n      expect(mainIds).toContain(EXERCISE_IDS.pushUp);\r\n    });\r\n\r\n    it('main ìš´ë™ì—ëŠ” section: \"main\"ì´ ì„¤ì •ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [EXERCISES.latPulldown, EXERCISES.pushUp, EXERCISES.lunge];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      result.main.forEach(exercise => {\r\n        expect(exercise.section).toBe('main');\r\n      });\r\n    });\r\n\r\n    it('main ìš´ë™ì€ priorityScore ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ëœë‹¤', () => {\r\n      // Arrange\r\n      const unsorted = [\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'high-priority',\r\n          exerciseTemplateName: 'ë†’ì€ ì ìˆ˜ (ë‚®ì€ ìš°ì„ ìˆœìœ„)',\r\n          intensityLevel: 3,\r\n          priorityScore: 200,\r\n        }),\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-priority',\r\n          exerciseTemplateName: 'ë‚®ì€ ì ìˆ˜ (ë†’ì€ ìš°ì„ ìˆœìœ„)',\r\n          intensityLevel: 3,\r\n          priorityScore: 100,\r\n        }),\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(unsorted);\r\n      \r\n      // Assert\r\n      expect(result.main[0].priorityScore).toBeLessThanOrEqual(result.main[1].priorityScore);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // Cooldown ë¶„ë¥˜ í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('Cooldown ë¶„ë¥˜', () => {\r\n    it('cooldownì—ëŠ” ìµœì†Œ 2ê°œì˜ ìš´ë™ì´ ë°°ì¹˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n        EXERCISES.shoulderStretch,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      expect(result.cooldown.length).toBeGreaterThanOrEqual(2);\r\n    });\r\n\r\n    it('cooldownì—ëŠ” ìµœëŒ€ 3ê°œì˜ ìš´ë™ì´ ë°°ì¹˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const manyLowIntensity = Array.from({ length: 10 }, (_, i) => \r\n        createMergedExercise({\r\n          exerciseTemplateId: `low-${i}`,\r\n          exerciseTemplateName: `ë‚®ì€ ê°•ë„ ìš´ë™ ${i}`,\r\n          intensityLevel: 1,\r\n          priorityScore: 50 + i,\r\n        })\r\n      );\r\n      \r\n      // Act\r\n      const result = classifyBySection(manyLowIntensity);\r\n      \r\n      // Assert\r\n      expect(result.cooldown.length).toBeLessThanOrEqual(3);\r\n    });\r\n\r\n    it('cooldown ìš´ë™ì—ëŠ” section: \"cooldown\"ì´ ì„¤ì •ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n        EXERCISES.shoulderStretch,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      result.cooldown.forEach(exercise => {\r\n        expect(exercise.section).toBe('cooldown');\r\n      });\r\n    });\r\n\r\n    it('cooldownì— í¬í•¨ëœ ìš´ë™ì€ mainì—ì„œ ì œê±°ëœë‹¤', () => {\r\n      // Arrange\r\n      const exercises = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n        EXERCISES.shoulderStretch,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n      \r\n      // Assert\r\n      const cooldownIds = new Set(result.cooldown.map(e => e.exerciseTemplateId));\r\n      const mainIds = result.main.map(e => e.exerciseTemplateId);\r\n      \r\n      mainIds.forEach(id => {\r\n        expect(cooldownIds.has(id)).toBe(false);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('ë³µí•© ì‹œë‚˜ë¦¬ì˜¤', () => {\r\n    it('í˜¼í•©ëœ ê°•ë„ì˜ ìš´ë™ì´ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const mixed = [\r\n        EXERCISES.childPose,     // low\r\n        EXERCISES.catStretch,    // low\r\n        EXERCISES.wallPushUp,    // low\r\n        EXERCISES.pelvicTilt,    // low\r\n        EXERCISES.shoulderStretch, // low\r\n        EXERCISES.latPulldown,   // high\r\n        EXERCISES.pushUp,        // high\r\n        EXERCISES.lunge,         // high\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(mixed);\r\n      \r\n      // Assert\r\n      // warmup: 2-4ê°œ (ë‚®ì€ ê°•ë„)\r\n      expect(result.warmup.length).toBeGreaterThanOrEqual(2);\r\n      expect(result.warmup.length).toBeLessThanOrEqual(4);\r\n      \r\n      // main: ë†’ì€ ê°•ë„ + ì¼ë¶€ ë‚®ì€ ê°•ë„\r\n      expect(result.main.length).toBeGreaterThan(0);\r\n      \r\n      // cooldown: 2-3ê°œ (ë‚®ì€ ê°•ë„)\r\n      expect(result.cooldown.length).toBeGreaterThanOrEqual(2);\r\n      expect(result.cooldown.length).toBeLessThanOrEqual(3);\r\n      \r\n      // ë†’ì€ ê°•ë„ ìš´ë™ì€ ëª¨ë‘ mainì— ìˆì–´ì•¼ í•¨\r\n      const mainIds = new Set(result.main.map(e => e.exerciseTemplateId));\r\n      expect(mainIds.has(EXERCISE_IDS.latPulldown)).toBe(true);\r\n      expect(mainIds.has(EXERCISE_IDS.pushUp)).toBe(true);\r\n      expect(mainIds.has(EXERCISE_IDS.lunge)).toBe(true);\r\n    });\r\n\r\n    it('ë‚®ì€ ê°•ë„ ìš´ë™ë§Œ ìˆì„ ë•Œë„ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const allLow = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n        EXERCISES.shoulderStretch,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(allLow);\r\n      \r\n      // Assert\r\n      // ëª¨ë“  ìš´ë™ì´ warmup, main, cooldown ì¤‘ í•˜ë‚˜ì— ë¶„ë¥˜ë¨\r\n      const totalClassified = \r\n        result.warmup.length + result.main.length + result.cooldown.length;\r\n      // ì¤‘ë³µ ì œê±°ë˜ëŠ” ë¶€ë¶„ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ >= ì‚¬ìš©\r\n      expect(totalClassified).toBeLessThanOrEqual(allLow.length + result.cooldown.length);\r\n    });\r\n\r\n    it('ë†’ì€ ê°•ë„ ìš´ë™ë§Œ ìˆì„ ë•Œ ëª¨ë‘ mainì— ë¶„ë¥˜ëœë‹¤', () => {\r\n      // Arrange\r\n      const allHigh = [\r\n        EXERCISES.latPulldown,\r\n        EXERCISES.pushUp,\r\n        EXERCISES.lunge,\r\n      ];\r\n      \r\n      // Act\r\n      const result = classifyBySection(allHigh);\r\n      \r\n      // Assert\r\n      expect(result.warmup.length).toBe(0);\r\n      expect(result.main.length).toBe(3);\r\n      expect(result.cooldown.length).toBe(0);\r\n    });\r\n  });\r\n\r\n  // ============================================\r\n  // ë©”ì¸ ìš°ì„ ìˆœìœ„ ì¤‘ë³µ ì œê±° í…ŒìŠ¤íŠ¸\r\n  // ============================================\r\n\r\n  describe('ë©”ì¸ ìš°ì„ ìˆœìœ„ ì¤‘ë³µ ì œê±°', () => {\r\n    it('ë™ì¼ ìš´ë™ì´ ì—¬ëŸ¬ ì„¹ì…˜ì— ìˆìœ¼ë©´ mainì—ë§Œ ë‚¨ëŠ”ë‹¤', () => {\r\n      // Arrange: ê°™ì€ ìš´ë™(A)ì´ warmup, main, cooldown ëª¨ë‘ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ìƒí™©\r\n      const duplicated = createMergedExercise({\r\n        exerciseTemplateId: 'dup-001',\r\n        exerciseTemplateName: 'ì¤‘ë³µ ìš´ë™ A',\r\n        intensityLevel: 1, // ë‚®ì€ ê°•ë„ (warmup/cooldown í›„ë³´)\r\n        priorityScore: 10,\r\n      });\r\n\r\n      // 7ê°œì˜ ë‚®ì€ ê°•ë„ ìš´ë™ì„ ë§Œë“¤ì–´ ì¤‘ë³µì´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ìƒí™© êµ¬ì„±\r\n      const exercises = [\r\n        duplicated,\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-1',\r\n          exerciseTemplateName: 'ë‚®ì€ ê°•ë„ 1',\r\n          intensityLevel: 1,\r\n          priorityScore: 20,\r\n        }),\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-2',\r\n          exerciseTemplateName: 'ë‚®ì€ ê°•ë„ 2',\r\n          intensityLevel: 1,\r\n          priorityScore: 30,\r\n        }),\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-3',\r\n          exerciseTemplateName: 'ë‚®ì€ ê°•ë„ 3',\r\n          intensityLevel: 1,\r\n          priorityScore: 40,\r\n        }),\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-4',\r\n          exerciseTemplateName: 'ë‚®ì€ ê°•ë„ 4',\r\n          intensityLevel: 1,\r\n          priorityScore: 50,\r\n        }),\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-5',\r\n          exerciseTemplateName: 'ë‚®ì€ ê°•ë„ 5',\r\n          intensityLevel: 1,\r\n          priorityScore: 60,\r\n        }),\r\n        createMergedExercise({\r\n          exerciseTemplateId: 'low-6',\r\n          exerciseTemplateName: 'ë‚®ì€ ê°•ë„ 6',\r\n          intensityLevel: 1,\r\n          priorityScore: 70,\r\n        }),\r\n      ];\r\n\r\n      // Act\r\n      const result = classifyBySection(exercises);\r\n\r\n      // Assert: ì „ì²´ ì„¹ì…˜ì—ì„œ ê° ìš´ë™ì€ 1ë²ˆì”©ë§Œ ë‚˜ì™€ì•¼ í•¨\r\n      const allIds = [\r\n        ...result.warmup.map(e => e.exerciseTemplateId),\r\n        ...result.main.map(e => e.exerciseTemplateId),\r\n        ...result.cooldown.map(e => e.exerciseTemplateId),\r\n      ];\r\n\r\n      const uniqueIds = new Set(allIds);\r\n      expect(allIds.length).toBe(uniqueIds.size); // ì¤‘ë³µ ì—†ìŒ\r\n    });\r\n\r\n    it('warmupê³¼ main ëª¨ë‘ì— í›„ë³´ì¸ ìš´ë™ì€ mainì—ì„œë§Œ ë‚˜íƒ€ë‚œë‹¤', () => {\r\n      // Arrange\r\n      // mainì—ë„ í›„ë³´ê°€ ë˜ë©´ì„œ warmupì—ë„ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ìš´ë™\r\n      const lowIntensityExercises = Array.from({ length: 8 }, (_, i) =>\r\n        createMergedExercise({\r\n          exerciseTemplateId: `exercise-${i}`,\r\n          exerciseTemplateName: `ìš´ë™ ${i}`,\r\n          intensityLevel: 1,\r\n          priorityScore: 10 + i * 10,\r\n        })\r\n      );\r\n\r\n      // Act\r\n      const result = classifyBySection(lowIntensityExercises);\r\n\r\n      // Assert: warmupì— ìˆëŠ” ìš´ë™ì€ mainì— ì—†ì–´ì•¼ í•¨\r\n      const warmupIds = new Set(result.warmup.map(e => e.exerciseTemplateId));\r\n      const mainIds = result.main.map(e => e.exerciseTemplateId);\r\n      const cooldownIds = new Set(result.cooldown.map(e => e.exerciseTemplateId));\r\n\r\n      mainIds.forEach(id => {\r\n        expect(warmupIds.has(id)).toBe(false);\r\n        expect(cooldownIds.has(id)).toBe(false);\r\n      });\r\n    });\r\n\r\n    it('ì „ì²´ ì„¹ì…˜ í•©ì³¤ì„ ë•Œ ë™ì¼ exerciseTemplateIdëŠ” ë”± 1ë²ˆë§Œ ì¡´ì¬í•œë‹¤', () => {\r\n      // Arrange\r\n      const mixed = [\r\n        EXERCISES.childPose,\r\n        EXERCISES.catStretch,\r\n        EXERCISES.wallPushUp,\r\n        EXERCISES.pelvicTilt,\r\n        EXERCISES.shoulderStretch,\r\n        EXERCISES.latPulldown,\r\n        EXERCISES.pushUp,\r\n        EXERCISES.lunge,\r\n      ];\r\n\r\n      // Act\r\n      const result = classifyBySection(mixed);\r\n\r\n      // Assert\r\n      const allIds = [\r\n        ...result.warmup.map(e => e.exerciseTemplateId),\r\n        ...result.main.map(e => e.exerciseTemplateId),\r\n        ...result.cooldown.map(e => e.exerciseTemplateId),\r\n      ];\r\n\r\n      const uniqueIds = new Set(allIds);\r\n      expect(allIds.length).toBe(uniqueIds.size);\r\n    });\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\deduplicate-exercises.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\distribute-time.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\filter-contraindications.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\test-fixtures.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\__tests__\\wearable-utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\analyze-user-preferences.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\cache-invalidation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\cache-key.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\calculate-bounding-box.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\calculate-distance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\calculate-fatigue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\calculate-intensity-from-hr.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\calculate-priority.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\calculate-trust-score.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\check-business-status.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\classify-by-section.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\classify-difficulty.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DIFFICULTY_SCORE_RANGES' is defined but never used.","line":2,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  DIFFICULTY_SCORE_RANGES,\r\n  DIFFICULTY_LABELS,\r\n  DIFFICULTY_DESCRIPTIONS,\r\n  isDifficultyInRange,\r\n} from \"@/lib/constants/difficulty-levels\";\r\nimport type { DifficultyClassification, DifficultyLevel } from \"@/types/difficulty\";\r\n\r\n/**\r\n * difficulty_scoreë¥¼ 3ë‹¨ê³„ ë‚œì´ë„ë¡œ ë¶„ë¥˜\r\n * \r\n * @param score difficulty_score (1-10)\r\n * @returns ë‚œì´ë„ ë¶„ë¥˜ ê²°ê³¼\r\n */\r\nexport function classifyDifficulty(\r\n  score: number\r\n): DifficultyClassification {\r\n  // ë²”ìœ„ ê²€ì¦\r\n  if (score < 1 || score > 10) {\r\n    throw new Error(`difficulty_scoreëŠ” 1-10 ë²”ìœ„ì—¬ì•¼ í•©ë‹ˆë‹¤. (ì…ë ¥: ${score})`);\r\n  }\r\n\r\n  // ì •ìˆ˜ ê²€ì¦\r\n  if (!Number.isInteger(score)) {\r\n    throw new Error(`difficulty_scoreëŠ” ì •ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤. (ì…ë ¥: ${score})`);\r\n  }\r\n\r\n  // ë‚œì´ë„ ë‹¨ê³„ ê²°ì •\r\n  let level: DifficultyLevel;\r\n\r\n  if (isDifficultyInRange(score, 'principle')) {\r\n    level = 'principle';\r\n  } else if (isDifficultyInRange(score, 'adaptation')) {\r\n    level = 'adaptation';\r\n  } else if (isDifficultyInRange(score, 'mastery')) {\r\n    level = 'mastery';\r\n  } else {\r\n    // ê²½ê³„ê°’ ì²˜ë¦¬ (3-4, 7-8 ì‚¬ì´)\r\n    // ê¸°ë³¸ì ìœ¼ë¡œ ë‚®ì€ ë‹¨ê³„ë¡œ ë¶„ë¥˜\r\n    if (score <= 3.5) {\r\n      level = 'principle';\r\n    } else if (score <= 7.5) {\r\n      level = 'adaptation';\r\n    } else {\r\n      level = 'mastery';\r\n    }\r\n  }\r\n\r\n  return {\r\n    level,\r\n    score,\r\n    label: DIFFICULTY_LABELS[level],\r\n    description: DIFFICULTY_DESCRIPTIONS[level],\r\n  };\r\n}\r\n\r\n/**\r\n * ì—¬ëŸ¬ difficulty_scoreë¥¼ í•œ ë²ˆì— ë¶„ë¥˜\r\n * \r\n * @param scores difficulty_score ë°°ì—´\r\n * @returns ë‚œì´ë„ ë¶„ë¥˜ ê²°ê³¼ ë°°ì—´\r\n */\r\nexport function classifyDifficulties(\r\n  scores: number[]\r\n): DifficultyClassification[] {\r\n  return scores.map((score) => classifyDifficulty(score));\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\convert-place-to-gym.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'placeItem' is defined but never used.","line":92,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":92,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file convert-place-to-gym.ts\r\n * @description PlaceItemì„ Gym ë°ì´í„° êµ¬ì¡°ë¡œ ë³€í™˜í•˜ëŠ” ìœ í‹¸ë¦¬í‹°\r\n * \r\n * ë„¤ì´ë²„ APIì—ì„œ ê°€ì ¸ì˜¨ PlaceItemì„ ìš°ë¦¬ DBì˜ Gym, GymFacility, GymOperatingHour êµ¬ì¡°ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\r\n * \r\n * ì£¼ìš” ê¸°ëŠ¥:\r\n * - PlaceItem â†’ Gym upsert ë°ì´í„° ë³€í™˜\r\n * - PlaceItem â†’ GymFacility upsert ë°ì´í„° ë³€í™˜\r\n * - PlaceItem â†’ GymOperatingHour ë°°ì—´ ë³€í™˜\r\n * - ìš´ì˜ì‹œê°„ íŒŒì‹± í†µí•©\r\n */\r\n\r\nimport type { PlaceItem } from '@/types/naver-map';\r\nimport type { OperatingHours } from '@/types/operating-hours';\r\nimport { parseOperatingHoursFromDescription } from './parse-operating-hours';\r\nimport { Prisma } from '@prisma/client';\r\n\r\n/**\r\n * Gym upsert ë°ì´í„° íƒ€ì…\r\n */\r\nexport type GymUpsertData = {\r\n  name: string;\r\n  address: string;\r\n  latitude: Prisma.Decimal;\r\n  longitude: Prisma.Decimal;\r\n  phone?: string;\r\n  website?: string;\r\n  priceRange?: string;\r\n  description?: string;\r\n  isActive: boolean;\r\n};\r\n\r\n/**\r\n * GymFacility upsert ë°ì´í„° íƒ€ì…\r\n */\r\nexport type GymFacilityUpsertData = {\r\n  hasRehabEquipment: boolean;\r\n  hasPtCoach: boolean;\r\n  hasShower: boolean;\r\n  hasParking: boolean;\r\n  hasLocker: boolean;\r\n  otherFacilities: string[];\r\n};\r\n\r\n/**\r\n * GymOperatingHour upsert ë°ì´í„° íƒ€ì…\r\n */\r\nexport type GymOperatingHourUpsertData = {\r\n  dayOfWeek: number;\r\n  openTime?: string;\r\n  closeTime?: string;\r\n  isClosed: boolean;\r\n  notes?: string;\r\n};\r\n\r\n/**\r\n * PlaceItemì„ Gym upsert ë°ì´í„°ë¡œ ë³€í™˜\r\n * \r\n * @param placeItem ë„¤ì´ë²„ API PlaceItem\r\n * @returns Gym upsert ë°ì´í„°\r\n */\r\nexport function convertPlaceItemToGymData(placeItem: PlaceItem): GymUpsertData {\r\n  // ì¢Œí‘œ í™•ì¸ (lat, lngê°€ ì—†ìœ¼ë©´ ì—ëŸ¬)\r\n  if (placeItem.lat === undefined || placeItem.lng === undefined) {\r\n    throw new Error(`PlaceItemì— ì¢Œí‘œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤: ${placeItem.title}`);\r\n  }\r\n\r\n  return {\r\n    name: placeItem.title,\r\n    address: placeItem.address,\r\n    latitude: new Prisma.Decimal(placeItem.lat),\r\n    longitude: new Prisma.Decimal(placeItem.lng),\r\n    phone: placeItem.telephone || undefined,\r\n    website: placeItem.link || undefined,\r\n    priceRange: undefined, // ë„¤ì´ë²„ APIì—ì„œ ê°€ê²© ì •ë³´ëŠ” ì œê³µí•˜ì§€ ì•ŠìŒ\r\n    description: placeItem.description || undefined,\r\n    isActive: true,\r\n  };\r\n}\r\n\r\n/**\r\n * PlaceItemì„ GymFacility upsert ë°ì´í„°ë¡œ ë³€í™˜\r\n * \r\n * ë„¤ì´ë²„ APIì—ì„œëŠ” ì‹œì„¤ ì •ë³´ë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê¸°ë³¸ê°’ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.\r\n * ë‚˜ì¤‘ì— ê´€ë¦¬ìê°€ ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ì‚¬ìš©ì ë¦¬ë·°ë¥¼ í†µí•´ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n * \r\n * @param placeItem ë„¤ì´ë²„ API PlaceItem\r\n * @returns GymFacility upsert ë°ì´í„° (ê¸°ë³¸ê°’)\r\n */\r\nexport function convertPlaceItemToGymFacilityData(\r\n  placeItem: PlaceItem\r\n): GymFacilityUpsertData {\r\n  // ë„¤ì´ë²„ APIì—ì„œëŠ” ì‹œì„¤ ì •ë³´ë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ëª¨ë‘ ê¸°ë³¸ê°’(false)\r\n  // descriptionì—ì„œ ì¼ë¶€ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆì§€ë§Œ, ì •í™•ë„ê°€ ë‚®ìœ¼ë¯€ë¡œ ê¸°ë³¸ê°’ ì‚¬ìš©\r\n  return {\r\n    hasRehabEquipment: false,\r\n    hasPtCoach: false,\r\n    hasShower: false,\r\n    hasParking: false,\r\n    hasLocker: false,\r\n    otherFacilities: [],\r\n  };\r\n}\r\n\r\n/**\r\n * PlaceItemì„ GymOperatingHour ë°°ì—´ë¡œ ë³€í™˜\r\n * \r\n * description í•„ë“œì—ì„œ ìš´ì˜ì‹œê°„ì„ íŒŒì‹±í•˜ì—¬ ë³€í™˜í•©ë‹ˆë‹¤.\r\n * \r\n * @param placeItem ë„¤ì´ë²„ API PlaceItem\r\n * @returns GymOperatingHour upsert ë°ì´í„° ë°°ì—´\r\n */\r\nexport function convertPlaceItemToOperatingHours(\r\n  placeItem: PlaceItem\r\n): GymOperatingHourUpsertData[] {\r\n  // ì´ë¯¸ íŒŒì‹±ëœ operatingHoursê°€ ìˆìœ¼ë©´ ì‚¬ìš©\r\n  if (placeItem.operatingHours && placeItem.operatingHours.length > 0) {\r\n    return placeItem.operatingHours.map((oh: OperatingHours) => ({\r\n      dayOfWeek: oh.dayOfWeek,\r\n      openTime: oh.openTime ?? undefined,\r\n      closeTime: oh.closeTime ?? undefined,\r\n      isClosed: oh.isClosed,\r\n      notes: oh.notes ?? undefined,\r\n    }));\r\n  }\r\n\r\n  // descriptionì—ì„œ íŒŒì‹± ì‹œë„\r\n  if (placeItem.description) {\r\n    const parsedHours = parseOperatingHoursFromDescription(placeItem.description);\r\n    return parsedHours.map((oh: OperatingHours) => ({\r\n      dayOfWeek: oh.dayOfWeek,\r\n      openTime: oh.openTime ?? undefined,\r\n      closeTime: oh.closeTime ?? undefined,\r\n      isClosed: oh.isClosed,\r\n      notes: oh.notes ?? undefined,\r\n    }));\r\n  }\r\n\r\n  // íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë¹ˆ ë°°ì—´ ë°˜í™˜ (ê¸°ë³¸ê°’ì€ ë‚˜ì¤‘ì— ì„¤ì •)\r\n  return [];\r\n}\r\n\r\n/**\r\n * PlaceItemì„ Gym ê´€ë ¨ ëª¨ë“  ë°ì´í„°ë¡œ ë³€í™˜\r\n * \r\n * @param placeItem ë„¤ì´ë²„ API PlaceItem\r\n * @returns Gym, GymFacility, GymOperatingHour ë°ì´í„°\r\n */\r\nexport function convertPlaceItemToGymAllData(placeItem: PlaceItem): {\r\n  gym: GymUpsertData;\r\n  facility: GymFacilityUpsertData;\r\n  operatingHours: GymOperatingHourUpsertData[];\r\n} {\r\n  return {\r\n    gym: convertPlaceItemToGymData(placeItem),\r\n    facility: convertPlaceItemToGymFacilityData(placeItem),\r\n    operatingHours: convertPlaceItemToOperatingHours(placeItem),\r\n  };\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\coordinate-converter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\deduplicate-exercises.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\detect-exercise-issues.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\distribute-time.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DEFAULT_TIME_CONFIG' is assigned a value but never used.","line":48,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { MergedExercise } from \"@/types/body-part-merge\";\n\n/**\n * ì‹œê°„ ë°°ë¶„ ì„¤ì •\n */\nexport interface TimeDistributionConfig {\n  /** Warmup ì‹œê°„ (ë¶„) */\n  warmupTime: number;\n  /** Main ì‹œê°„ (ë¶„) */\n  mainTime: number;\n  /** Cooldown ì‹œê°„ (ë¶„) */\n  cooldownTime: number;\n  /** ìš´ë™ë‹¹ ìµœì†Œ ì‹œê°„ (ë¶„) */\n  minExerciseTime: number;\n  /** Main ìš´ë™ë‹¹ ìµœëŒ€ ì‹œê°„ (ë¶„) */\n  maxMainExerciseTime: number;\n  /** Warmup/Cooldown ìš´ë™ë‹¹ ìµœëŒ€ ì‹œê°„ (ë¶„) */\n  maxWarmupCooldownTime: number;\n}\n\n/**\n * ì´ ì‹œê°„ë³„ ì‹œê°„ ë°°ë¶„ ì„¤ì •\n */\nconst TIME_DISTRIBUTION_BY_DURATION: Record<\n  60 | 90 | 120,\n  {\n    warmupTime: number;\n    cooldownTime: number;\n  }\n> = {\n  60: {\n    warmupTime: 10,\n    cooldownTime: 10,\n  },\n  90: {\n    warmupTime: 12,\n    cooldownTime: 15,\n  },\n  120: {\n    warmupTime: 15,\n    cooldownTime: 15,\n  },\n};\n\n/**\n * ê¸°ë³¸ ì‹œê°„ ë°°ë¶„ ì„¤ì •\n */\nconst DEFAULT_TIME_CONFIG: TimeDistributionConfig = {\n  warmupTime: 12,\n  mainTime: 60,\n  cooldownTime: 15,\n  minExerciseTime: 5,\n  maxMainExerciseTime: 20,\n  maxWarmupCooldownTime: 10,\n};\n\n/**\n * ì„¹ì…˜ë³„ ê¸°ë³¸ sets/reps ì„¤ì •\n */\nconst DEFAULT_SETS_REPS_BY_SECTION = {\n  warmup: { sets: 1, reps: 10 },\n  main: { sets: 2, reps: 12 },\n  cooldown: { sets: 1, reps: 10 },\n} as const;\n\n/**\n * ì„¸íŠ¸/íšŸìˆ˜ ê³„ì‚° ê²°ê³¼\n */\ninterface SetsAndRepsResult {\n  sets: number;\n  reps: number;\n}\n\n/**\n * ì„¸íŠ¸/íšŸìˆ˜ ìë™ ê³„ì‚° (Strict Logic)\n *\n * - sets ìµœëŒ€ 5\n * - reps ìµœëŒ€ 20\n * - Math.sqrt ìŠ¤ì¼€ì¼ë§ ì ìš©\n */\nfunction calculateSetsAndReps(\n  originalDuration: number | undefined,\n  newDuration: number,\n  originalSets: number | undefined,\n  originalReps: number | undefined,\n  section: \"warmup\" | \"main\" | \"cooldown\",\n): SetsAndRepsResult {\n  const defaultValues = DEFAULT_SETS_REPS_BY_SECTION[section];\n  const baseSets = originalSets ?? defaultValues.sets;\n  const baseReps = originalReps ?? defaultValues.reps;\n\n  // ğŸ”¥ ì›œì—…/ì¿¨ë‹¤ìš´ì€ ì˜ˆì—´/ë§ˆë¬´ë¦¬ ëª©ì ì´ë¯€ë¡œ ì„¸íŠ¸/íšŸìˆ˜ ì œí•œ\n  // ë©”ì¸ ìš´ë™ ìˆ˜ì¤€ì˜ ì„¸íŠ¸Ã—íšŸìˆ˜ëŠ” ë¶€ì ì ˆí•¨\n  if (section === \"warmup\" || section === \"cooldown\") {\n    return {\n      sets: Math.min(2, Math.max(1, baseSets)), // ì›œì—…ì€ ìµœëŒ€ 2ì„¸íŠ¸\n      reps: Math.min(12, Math.max(5, baseReps)), // ì›œì—…ì€ ìµœëŒ€ 12íšŒ\n    };\n  }\n\n  // ë©”ì¸ ìš´ë™ë§Œ ì‹œê°„ ê¸°ë°˜ ìŠ¤ì¼€ì¼ë§ ì ìš©\n  if (!originalDuration || originalDuration === 0) {\n    return { sets: baseSets, reps: baseReps };\n  }\n\n  // ì‹œê°„ ë¹„ìœ¨ ê³„ì‚°\n  const timeRatio = newDuration / originalDuration;\n\n  // ì œê³±ê·¼ ìŠ¤ì¼€ì¼ë§ ì ìš© (ì™„ë§Œí•œ ì¦ê°€)\n  const scaleFactor = Math.sqrt(timeRatio);\n\n  let adjustedSets = Math.round(baseSets * scaleFactor);\n  let adjustedReps = Math.round(baseReps * scaleFactor);\n\n  // ìµœì†Œê°’ ë³´ì¥\n  adjustedSets = Math.max(1, adjustedSets);\n  adjustedReps = Math.max(5, adjustedReps);\n\n  // ìµœëŒ€ê°’ ì œí•œ (Strict Limit)\n  adjustedSets = Math.min(5, adjustedSets);\n  adjustedReps = Math.min(20, adjustedReps);\n\n  return {\n    sets: adjustedSets,\n    reps: adjustedReps,\n  };\n}\n\n/**\n * ì‹œê°„ ë°°ë¶„ (Strict Logic)\n *\n * 1. ì›œì—…: 5/10/15ë¶„ ê³ ì •, ìµœëŒ€ 2ê°œ ìš´ë™\n * 2. ì¿¨ë‹¤ìš´: 5ë¶„ ì„ ì˜ˆì•½, í•„ìˆ˜ 1ê°œ ë³´ì¥\n * 3. ë©”ì¸: ë‚¨ì€ ì‹œê°„ ë°°ë¶„\n */\nexport function distributeTime(\n  exercises: {\n    warmup: MergedExercise[];\n    main: MergedExercise[];\n    cooldown: MergedExercise[];\n  },\n  totalDurationMinutes: 60 | 90 | 120,\n  config: Partial<TimeDistributionConfig> = {},\n): MergedExercise[] {\n  // 0. ì…ë ¥ì´ ëª¨ë‘ ë¹„ì–´ìˆìœ¼ë©´ ë¹ˆ ë°°ì—´ ë°˜í™˜\n  if (\n    exercises.warmup.length === 0 &&\n    exercises.main.length === 0 &&\n    exercises.cooldown.length === 0\n  ) {\n    return [];\n  }\n\n  // 1. ì„¤ì • ë¡œë“œ\n  const durationConfig = TIME_DISTRIBUTION_BY_DURATION[totalDurationMinutes];\n  const rawWarmupTarget = config.warmupTime ?? durationConfig.warmupTime;\n\n  // 2. ì›œì—… ëª©í‘œ ì‹œê°„ ì‚°ì • (5ë¶„ ë‹¨ìœ„ ì˜¬ë¦¼ + Clamp 5~15)\n  // ì˜ˆ: 12ë¶„ -> 15ë¶„, 8ë¶„ -> 10ë¶„, 3ë¶„ -> 5ë¶„, 18ë¶„ -> 15ë¶„\n  // 90ë¶„ ì½”ìŠ¤: 12 â†’ 15ë¶„, 120ë¶„ ì½”ìŠ¤: 15 â†’ 15ë¶„\n  const warmupTarget = Math.min(\n    15,\n    Math.max(5, Math.ceil(rawWarmupTarget / 5) * 5),\n  );\n\n  // 3. ì¿¨ë‹¤ìš´ ì„ ì˜ˆì•½ (ì„¤ì •ê°’ ì‚¬ìš©)\n  const cooldownTarget = config.cooldownTime ?? durationConfig.cooldownTime;\n  const cooldownReserve = cooldownTarget;\n\n  // 4. ë©”ì¸ ëª©í‘œ ì‹œê°„\n  const mainTarget = totalDurationMinutes - warmupTarget - cooldownReserve;\n\n  const result: MergedExercise[] = [];\n  let orderCounter = 0;\n\n  // ==================================================================================\n  // [Warmup Generation] Strict Rules: Max 2 items, Fixed durations\n  // ==================================================================================\n  if (exercises.warmup.length > 0) {\n    // 1ë²ˆì§¸ ì›œì—…\n    const firstWarmupDuration = warmupTarget === 5 ? 5 : 10;\n    const firstExercise = exercises.warmup[0];\n    const { sets: sets1, reps: reps1 } = calculateSetsAndReps(\n      firstExercise.durationMinutes,\n      firstWarmupDuration,\n      firstExercise.sets,\n      firstExercise.reps,\n      \"warmup\",\n    );\n    result.push({\n      ...firstExercise,\n      section: \"warmup\",\n      orderInSection: orderCounter++,\n      durationMinutes: firstWarmupDuration,\n      sets: sets1,\n      reps: reps1,\n    });\n\n    // 2ë²ˆì§¸ ì›œì—… (ëª©í‘œê°€ 15ë¶„ì¼ ë•Œë§Œ 5ë¶„ ì¶”ê°€)\n    if (warmupTarget === 15 && exercises.warmup.length > 1) {\n      const secondExercise = exercises.warmup[1]; // ë‹¤ë¥¸ ìš´ë™ ì‚¬ìš© ê¶Œì¥\n      const { sets: sets2, reps: reps2 } = calculateSetsAndReps(\n        secondExercise.durationMinutes,\n        5,\n        secondExercise.sets,\n        secondExercise.reps,\n        \"warmup\",\n      );\n      result.push({\n        ...secondExercise,\n        section: \"warmup\",\n        orderInSection: orderCounter++,\n        durationMinutes: 5,\n        sets: sets2,\n        reps: reps2,\n      });\n    }\n  }\n\n  // ==================================================================================\n  // [Main Generation] Fill remaining time - NO DUPLICATES ALLOWED\n  // ==================================================================================\n  let accumulatedMainTime = 0;\n  let mainIndex = 0;\n  const usedExerciseIds = new Set<string>(); // ì¤‘ë³µ ë°©ì§€ìš© Set\n\n  // ë©”ì¸ ìš´ë™ì´ ì—†ìœ¼ë©´ ê²½ê³ (ì‹¤ì œë¡œëŠ” merge ë‹¨ê³„ì—ì„œ ì²˜ë¦¬ë¨)\n  if (exercises.main.length > 0) {\n    while (\n      accumulatedMainTime < mainTarget &&\n      mainIndex < exercises.main.length\n    ) {\n      const sourceExercise = exercises.main[mainIndex];\n\n      // ğŸ”¥ ì¤‘ë³µ ì²´í¬: ì´ë¯¸ ì‚¬ìš©ëœ ìš´ë™ì´ë©´ ìŠ¤í‚µ\n      if (usedExerciseIds.has(sourceExercise.exerciseTemplateId)) {\n        mainIndex++;\n        continue;\n      }\n\n      const remainingTime = mainTarget - accumulatedMainTime;\n\n      // ì´ë²ˆ ìš´ë™ì— í• ë‹¹í•  ì‹œê°„\n      let timeForThisExercise = Math.min(\n        20, // maxMainExerciseTime\n        Math.max(5, remainingTime), // minExerciseTime\n      );\n\n      // ë‚¨ì€ ì‹œê°„ì´ 5ë¶„ ë¯¸ë§Œì´ë©´ ë£¨í”„ ì¢…ë£Œ (ë§ˆì§€ë§‰ ìš´ë™ì— í•©ì¹˜ê±°ë‚˜ ë²„ë¦¼)\n      // ì—¬ê¸°ì„œëŠ” ë²„ë¦¼ ì •ì±… (ì¿¨ë‹¤ìš´ í™•ë³´ê°€ ë” ì¤‘ìš”)\n      if (remainingTime < 5) break;\n\n      // ë§Œì•½ ë‚¨ì€ ì‹œê°„ì´ 5~9ë¶„ ì‚¬ì´ë¼ë©´, ê·¸ëƒ¥ ë‚¨ì€ ì‹œê°„ ë‹¤ ì”€\n      if (remainingTime < 10) {\n        timeForThisExercise = remainingTime;\n      }\n\n      const { sets, reps } = calculateSetsAndReps(\n        sourceExercise.durationMinutes,\n        timeForThisExercise,\n        sourceExercise.sets,\n        sourceExercise.reps,\n        \"main\",\n      );\n\n      result.push({\n        ...sourceExercise,\n        section: \"main\",\n        orderInSection: orderCounter++,\n        durationMinutes: timeForThisExercise,\n        sets,\n        reps,\n      });\n\n      // ì‚¬ìš©ëœ ìš´ë™ ID ê¸°ë¡\n      usedExerciseIds.add(sourceExercise.exerciseTemplateId);\n      accumulatedMainTime += timeForThisExercise;\n      mainIndex++;\n\n      // Safety break: ìµœëŒ€ 30ê°œ ìš´ë™\n      if (mainIndex >= 30) break;\n    }\n  }\n\n  // ==================================================================================\n  // [Cooldown Generation] Guarantee 1 item (5 min)\n  // ==================================================================================\n  let cooldownSource = exercises.cooldown[0];\n\n  // ì¿¨ë‹¤ìš´ í›„ë³´ê°€ ì—†ìœ¼ë©´ ì›œì—…(ì €ê°•ë„) ì¬ì‚¬ìš©\n  if (!cooldownSource && exercises.warmup.length > 0) {\n    cooldownSource =\n      exercises.warmup.find((ex) => (ex.intensityLevel || 0) <= 2) ||\n      exercises.warmup[0];\n  }\n\n  // ê·¸ë˜ë„ ì—†ìœ¼ë©´ í•˜ë“œì½”ë”©\n  if (!cooldownSource) {\n    cooldownSource = {\n      exerciseTemplateId: \"fallback-stretch\",\n      exerciseTemplateName: \"ì „ì‹  ìŠ¤íŠ¸ë ˆì¹­\",\n      bodyPartIds: [],\n      priorityScore: 0,\n      section: \"cooldown\",\n      orderInSection: 0,\n      durationMinutes: 5,\n      sets: 1,\n      reps: 1,\n      intensityLevel: 1,\n      difficultyScore: 1,\n      description: \"í¸ì•ˆí•œ ìì„¸ë¡œ ì „ì‹ ì„ ì´ì™„í•©ë‹ˆë‹¤.\",\n      instructions: \"í˜¸í¡ì„ ê¹Šê²Œ í•˜ë©° ëª¸ì˜ ê¸´ì¥ì„ í’‰ë‹ˆë‹¤.\",\n      precautions: \"í†µì¦ì´ ì—†ëŠ” ë²”ìœ„ ë‚´ì—ì„œ ì§„í–‰í•©ë‹ˆë‹¤.\",\n    };\n  }\n\n  // ì¿¨ë‹¤ìš´ 1ê°œ ê°•ì œ ì¶”ê°€ (5ë¶„)\n  // *ì°¸ê³ : ì¿¨ë‹¤ìš´ì„ ë” ëŠ˜ë¦¬ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸°ì„œ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ,\n  // ìš”êµ¬ì‚¬í•­ì€ \"ìµœì†Œ 1ê°œ, 5ë¶„ í•­ìƒ ë³´ì¥\"ì´ë¯€ë¡œ 1ê°œë§Œ í™•ì‹¤íˆ ë„£ìŒ.\n  const { sets: cdSets, reps: cdReps } = calculateSetsAndReps(\n    cooldownSource.durationMinutes,\n    cooldownReserve,\n    cooldownSource.sets,\n    cooldownSource.reps,\n    \"cooldown\",\n  );\n\n  result.push({\n    ...cooldownSource,\n    section: \"cooldown\",\n    orderInSection: orderCounter++,\n    durationMinutes: cooldownReserve,\n    sets: cdSets,\n    reps: cdReps,\n  });\n\n  // ==================================================================================\n  // [Safety Checks]\n  // ==================================================================================\n  const finalWarmupTime = result\n    .filter((e) => e.section === \"warmup\")\n    .reduce((s, e) => s + (e.durationMinutes || 0), 0);\n  const finalCooldownTime = result\n    .filter((e) => e.section === \"cooldown\")\n    .reduce((s, e) => s + (e.durationMinutes || 0), 0);\n  const finalTotalTime = result.reduce(\n    (s, e) => s + (e.durationMinutes || 0),\n    0,\n  );\n\n  if (finalWarmupTime > 15) {\n    console.error(\n      `[DistributeTime Error] Warmup exceeded 15m: ${finalWarmupTime}m`,\n    );\n    // í•„ìš”ì‹œ throw new Error(\"Warmup time limit exceeded\");\n  }\n  if (finalWarmupTime === 20) {\n    throw new Error(\"CRITICAL: Warmup time is 20m (Strictly Forbidden)\");\n  }\n  if (finalCooldownTime < 5) {\n    throw new Error(\"CRITICAL: Cooldown time missing or less than 5m\");\n  }\n\n  // ì´ ì‹œê°„ì´ ëª©í‘œë³´ë‹¤ ë§ì´ ì´ˆê³¼ë˜ë©´ ë§ˆì§€ë§‰ ë©”ì¸ ìš´ë™ì„ ì¤„ì„ (Optional)\n  if (finalTotalTime > totalDurationMinutes) {\n    // ê°„ë‹¨í•œ ë³´ì • ë¡œì§: ì´ˆê³¼ë¶„ë§Œí¼ ë©”ì¸ì—ì„œ ëºŒ (êµ¬í˜„ ìƒëµ ê°€ëŠ¥, í˜„ì¬ ë¡œì§ìƒ í¬ê²Œ ì´ˆê³¼ ì•ˆí•¨)\n  }\n\n  return result;\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\filter-by-difficulty.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\filter-contraindications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\get-user-personalization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\haversine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\map-experience-level.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\normalize-place-item.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1046,1049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1046,1049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5569,5572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5569,5572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\parse-operating-hours.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\validate-database-url.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":224,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":224,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * @file validate-database-url.ts\r\n * @description DATABASE_URL ì—°ê²° ë¬¸ìì—´ ê²€ì¦ ìœ í‹¸ë¦¬í‹°\r\n *\r\n * Prismaê°€ ì‚¬ìš©í•˜ëŠ” DATABASE_URLì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ê³ ,\r\n * ë¬¸ì œê°€ ìˆì„ ê²½ìš° ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\r\n */\r\n\r\n/**\r\n * DATABASE_URL ê²€ì¦ ê²°ê³¼\r\n */\r\nexport interface DatabaseUrlValidationResult {\r\n  /** ê²€ì¦ ì„±ê³µ ì—¬ë¶€ */\r\n  isValid: boolean;\r\n  /** ì—ëŸ¬ ë©”ì‹œì§€ (ê²€ì¦ ì‹¤íŒ¨ ì‹œ) */\r\n  error?: string;\r\n  /** ê²½ê³  ë©”ì‹œì§€ (ê²€ì¦ ì„±ê³µí•˜ì§€ë§Œ ì£¼ì˜ì‚¬í•­ì´ ìˆì„ ë•Œ) */\r\n  warning?: string;\r\n  /** íŒŒì‹±ëœ ì—°ê²° ì •ë³´ (ê²€ì¦ ì„±ê³µ ì‹œ) */\r\n  parsed?: {\r\n    protocol: string;\r\n    username: string;\r\n    host: string;\r\n    port: number;\r\n    database: string;\r\n    hasPassword: boolean;\r\n  };\r\n}\r\n\r\n/**\r\n * DATABASE_URL ì—°ê²° ë¬¸ìì—´ ê²€ì¦\r\n *\r\n * @param databaseUrl DATABASE_URL í™˜ê²½ ë³€ìˆ˜ ê°’ (ì—†ìœ¼ë©´ process.env.DATABASE_URL ì‚¬ìš©)\r\n * @returns ê²€ì¦ ê²°ê³¼\r\n */\r\nexport function validateDatabaseUrl(\r\n  databaseUrl?: string,\r\n): DatabaseUrlValidationResult {\r\n  const url = databaseUrl || process.env.DATABASE_URL;\r\n\r\n  // 1. í™˜ê²½ ë³€ìˆ˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸\r\n  if (!url) {\r\n    return {\r\n      isValid: false,\r\n      error:\r\n        \"DATABASE_URL í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\n\" +\r\n        \"í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ .env íŒŒì¼ì— DATABASE_URLì„ ì„¤ì •í•´ì£¼ì„¸ìš”.\\n\" +\r\n        'ì„¤ì • ë°©ë²•: README.mdì˜ \"Prisma DATABASE_URL\" ì„¹ì…˜ ì°¸ê³ ',\r\n    };\r\n  }\r\n\r\n  // 2. ë¹ˆ ë¬¸ìì—´ í™•ì¸\r\n  if (url.trim() === \"\") {\r\n    return {\r\n      isValid: false,\r\n      error:\r\n        \"DATABASE_URLì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.\\n\" +\r\n        \".env íŒŒì¼ì˜ DATABASE_URL ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\",\r\n    };\r\n  }\r\n\r\n  // 3. ì—°ê²° ë¬¸ìì—´ í˜•ì‹ í™•ì¸ (postgresql://ë¡œ ì‹œì‘í•´ì•¼ í•¨)\r\n  if (!url.startsWith(\"postgresql://\") && !url.startsWith(\"postgres://\")) {\r\n    return {\r\n      isValid: false,\r\n      error:\r\n        \"DATABASE_URL í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\\n\" +\r\n        \"postgresql:// ë˜ëŠ” postgres://ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.\\n\" +\r\n        \"í˜„ì¬ ê°’: \" +\r\n        url.substring(0, 20) +\r\n        \"...\",\r\n    };\r\n  }\r\n\r\n  // 4. URL íŒŒì‹± ì‹œë„\r\n  try {\r\n    const parsedUrl = new URL(url);\r\n\r\n    // 5. í˜¸ìŠ¤íŠ¸ í™•ì¸\r\n    if (!parsedUrl.hostname || parsedUrl.hostname.trim() === \"\") {\r\n      return {\r\n        isValid: false,\r\n        error:\r\n          \"DATABASE_URLì— í˜¸ìŠ¤íŠ¸(host) ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\\n\" +\r\n          \"ì—°ê²° ë¬¸ìì—´ í˜•ì‹: postgresql://postgres:[PASSWORD]@[HOST]:[PORT]/postgres\\n\" +\r\n          \"Supabase ì—°ê²° ë¬¸ìì—´ì„ ì˜¬ë°”ë¥´ê²Œ ë³µì‚¬í–ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\",\r\n      };\r\n    }\r\n\r\n    // 6. ì‚¬ìš©ìëª… í™•ì¸\r\n    if (!parsedUrl.username || parsedUrl.username.trim() === \"\") {\r\n      return {\r\n        isValid: false,\r\n        error:\r\n          \"DATABASE_URLì— ì‚¬ìš©ìëª…(username)ì´ ì—†ìŠµë‹ˆë‹¤.\\n\" +\r\n          \"Supabase ì—°ê²° ë¬¸ìì—´ í˜•ì‹: postgresql://postgres.ggmoudegjlobgytngkgx:[PASSWORD]@[HOST]:[PORT]/postgres\",\r\n      };\r\n    }\r\n\r\n    // 7. ë°ì´í„°ë² ì´ìŠ¤ëª… í™•ì¸\r\n    const database = parsedUrl.pathname.replace(\"/\", \"\");\r\n    if (!database || database.trim() === \"\") {\r\n      return {\r\n        isValid: false,\r\n        error:\r\n          \"DATABASE_URLì— ë°ì´í„°ë² ì´ìŠ¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.\\n\" +\r\n          \"ì—°ê²° ë¬¸ìì—´ ëì— /postgresê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\",\r\n      };\r\n    }\r\n\r\n    // 8. ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (ì¡´ì¬ ì—¬ë¶€ë§Œ, ì‹¤ì œ ê°’ì€ í™•ì¸í•˜ì§€ ì•ŠìŒ)\r\n    const hasPassword =\r\n      parsedUrl.password !== undefined && parsedUrl.password !== \"\";\r\n\r\n    // 9. ê²½ê³ : ë¹„ë°€ë²ˆí˜¸ê°€ [YOUR-PASSWORD] ê°™ì€ í”Œë ˆì´ìŠ¤í™€ë”ì¸ì§€ í™•ì¸\r\n    const password = parsedUrl.password || \"\";\r\n    if (\r\n      password.includes(\"[YOUR\") ||\r\n      password.includes(\"[PASSWORD\") ||\r\n      password === \"\" ||\r\n      password === \"YOUR_PASSWORD\"\r\n    ) {\r\n      return {\r\n        isValid: false,\r\n        error:\r\n          \"DATABASE_URLì— ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\\n\" +\r\n          \"[YOUR-PASSWORD] ë˜ëŠ” [PASSWORD] ë¶€ë¶„ì„ Supabase ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ë¡œ êµì²´í•´ì£¼ì„¸ìš”.\\n\" +\r\n          \"Supabase ëŒ€ì‹œë³´ë“œ â†’ Settings â†’ Database â†’ Connection stringì—ì„œ URI í˜•ì‹ ë³µì‚¬\",\r\n      };\r\n    }\r\n\r\n    // 10. í¬íŠ¸ í™•ì¸\r\n    const port = parsedUrl.port ? parseInt(parsedUrl.port, 10) : 5432;\r\n\r\n    // 11. Supabase í˜¸ìŠ¤íŠ¸ íŒ¨í„´ í™•ì¸ (ì„ íƒì‚¬í•­, ê²½ê³ ë§Œ)\r\n    const hostname = parsedUrl.hostname;\r\n    const isSupabaseHost =\r\n      hostname.includes(\"supabase.co\") ||\r\n      hostname.includes(\"pooler.supabase.com\") ||\r\n      hostname.includes(\"aws-0-ap-northeast-1.pooler.supabase.com\");\r\n\r\n    let warning: string | undefined;\r\n    if (!isSupabaseHost) {\r\n      warning =\r\n        \"í˜¸ìŠ¤íŠ¸ê°€ Supabase í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. ì—°ê²°ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n\" +\r\n        \"Supabase í˜¸ìŠ¤íŠ¸ ì˜ˆì‹œ: db.ggmoudegjlobgytngkgx.supabase.co ë˜ëŠ” aws-0-ap-northeast-1.pooler.supabase.com\";\r\n    }\r\n\r\n    return {\r\n      isValid: true,\r\n      parsed: {\r\n        protocol: parsedUrl.protocol.replace(\":\", \"\"),\r\n        username: parsedUrl.username,\r\n        host: hostname,\r\n        port,\r\n        database,\r\n        hasPassword,\r\n      },\r\n      warning,\r\n    };\r\n  } catch (error) {\r\n    // URL íŒŒì‹± ì‹¤íŒ¨\r\n    return {\r\n      isValid: false,\r\n      error:\r\n        \"DATABASE_URL íŒŒì‹± ì‹¤íŒ¨: \" +\r\n        (error instanceof Error ? error.message : String(error)) +\r\n        \"\\n\" +\r\n        \"ì—°ê²° ë¬¸ìì—´ í˜•ì‹ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\\n\" +\r\n        \"ì˜ˆì‹œ: postgresql://postgres.ggmoudegjlobgytngkgx:[PASSWORD]@db.ggmoudegjlobgytngkgx.supabase.co:5432/postgres?sslmode=require\",\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * DATABASE_URL ê²€ì¦ ë° ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥\r\n *\r\n * ëª¨ë“  í™˜ê²½ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.\r\n *\r\n * @param databaseUrl DATABASE_URL í™˜ê²½ ë³€ìˆ˜ ê°’ (ì—†ìœ¼ë©´ process.env.DATABASE_URL ì‚¬ìš©)\r\n * @returns ê²€ì¦ ì„±ê³µ ì—¬ë¶€\r\n */\r\nexport function validateAndLogDatabaseUrl(databaseUrl?: string): boolean {\r\n  const result = validateDatabaseUrl(databaseUrl);\r\n\r\n  if (!result.isValid) {\r\n    console.error(\"\\n[DATABASE_URL ê²€ì¦ ì‹¤íŒ¨]\");\r\n    console.error(result.error);\r\n    if (result.warning) {\r\n      console.warn(\"[ê²½ê³ ]\", result.warning);\r\n    }\r\n\r\n    // ì¶”ê°€ ë””ë²„ê¹… ì •ë³´ (ë³´ì•ˆ ê°•í™”: ë¯¼ê° ì •ë³´ ì œì™¸)\r\n    const url = databaseUrl || process.env.DATABASE_URL;\r\n    if (url) {\r\n      console.error(\"\\n[ë””ë²„ê¹… ì •ë³´]\");\r\n      console.error(`DATABASE_URL ê¸¸ì´: ${url.length}`);\r\n      // ì¤‘ìš”: ì „ì²´ URLì´ë‚˜ ì•ë’¤ ë¶€ë¶„ì„ ë¡œê¹…í•˜ì§€ ì•ŠìŒ\r\n      console.error(\r\n        `DATABASE_URLì— @ í¬í•¨: ${url.includes(\"@\") ? \"âœ…\" : \"âŒ\"}`,\r\n      );\r\n      console.error(\r\n        `DATABASE_URLì— :// í¬í•¨: ${url.includes(\"://\") ? \"âœ…\" : \"âŒ\"}`,\r\n      );\r\n\r\n      // í¬íŠ¸ ì •ë³´ë§Œ ì•ˆì „í•˜ê²Œ í™•ì¸\r\n      const hasPoolingPort = url.includes(\":6543\");\r\n      const hasDirectPort = url.includes(\":5432\");\r\n      console.error(\r\n        `í¬íŠ¸ ì„¤ì •: ${hasPoolingPort ? \"Pooling(6543)\" : hasDirectPort ? \"Direct(5432)\" : \"ê¸°íƒ€/ê¸°ë³¸ê°’\"}`,\r\n      );\r\n      console.error(\r\n        `pgbouncer íŒŒë¼ë¯¸í„°: ${url.includes(\"pgbouncer=true\") ? \"âœ…\" : \"âŒ\"}`,\r\n      );\r\n\r\n      // URL íŒŒì‹± ì‹œë„ (ë¹„ë°€ë²ˆí˜¸ ì œì™¸í•˜ê³  í˜¸ìŠ¤íŠ¸ë§Œ ì¶œë ¥)\r\n      try {\r\n        const testUrl = new URL(url);\r\n        console.error(`íŒŒì‹±ëœ í˜¸ìŠ¤íŠ¸: ${testUrl.hostname}`);\r\n        console.error(`íŒŒì‹±ëœ í¬íŠ¸: ${testUrl.port || \"(ê¸°ë³¸ê°’)\"}`);\r\n        console.error(\r\n          `íŒŒì‹±ëœ ì‚¬ìš©ìëª…: ${testUrl.username ? \"(ì¡´ì¬í•¨)\" : \"(ì—†ìŒ)\"}`,\r\n        );\r\n      } catch (parseError) {\r\n        console.error(\"URL íŒŒì‹± ì‹¤íŒ¨: í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\");\r\n      }\r\n    } else {\r\n      console.error(\"\\n[ë””ë²„ê¹… ì •ë³´]\");\r\n      console.error(\"DATABASE_URL í™˜ê²½ ë³€ìˆ˜ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\");\r\n      // í™˜ê²½ ë³€ìˆ˜ í‚¤ ëª©ë¡ì—ì„œë„ ê°’ì€ ì œì™¸í•˜ê³  í‚¤ë§Œ ë‚˜ì—´\r\n      const envKeys = Object.keys(process.env).filter((key) =>\r\n        key.includes(\"DATABASE\"),\r\n      );\r\n      console.error(\r\n        \"ê´€ë ¨ í™˜ê²½ ë³€ìˆ˜ í‚¤:\",\r\n        envKeys.length > 0 ? envKeys.join(\", \") : \"(ì—†ìŒ)\",\r\n      );\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  if (result.warning) {\r\n    console.warn(\"[DATABASE_URL ê²½ê³ ]\", result.warning);\r\n  }\r\n\r\n  if (process.env.NODE_ENV === \"development\" && result.parsed) {\r\n    console.log(\"\\n[DATABASE_URL ê²€ì¦ ì„±ê³µ]\");\r\n    console.log(`  í˜¸ìŠ¤íŠ¸: ${result.parsed.host}`);\r\n    console.log(`  í¬íŠ¸: ${result.parsed.port}`);\r\n    console.log(`  ë°ì´í„°ë² ì´ìŠ¤: ${result.parsed.database}`);\r\n    console.log(`  ì‚¬ìš©ìëª…: ${result.parsed.username}`);\r\n    console.log(`  ë¹„ë°€ë²ˆí˜¸: ${result.parsed.hasPassword ? \"***\" : \"ì—†ìŒ\"}`);\r\n  }\r\n\r\n  return true;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\utils\\validate-env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\body-part-bank.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\exercise-template.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\gym-search.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\merge-request.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\operating-hours.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\place-item.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\place-search.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\validate-body-part-bank.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\validate-merge-request.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\validate-place-item.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\lib\\validations\\validate-template.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'z' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { z } from \"zod\";\r\nimport { exerciseTemplateSchema } from \"./exercise-template.schema\";\r\nimport type { ExerciseTemplateInput, ValidationResult } from \"@/types/exercise-template\";\r\nimport { prisma } from \"@/lib/prisma/client\";\r\n\r\n/**\r\n * í…œí”Œë¦¿ ê²€ì¦ í•¨ìˆ˜\r\n * \r\n * Zod ìŠ¤í‚¤ë§ˆ ê²€ì¦ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ì¡°ê±´ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\r\n * \r\n * @param input ê²€ì¦í•  í…œí”Œë¦¿ ì…ë ¥ ë°ì´í„°\r\n * @returns ê²€ì¦ ê²°ê³¼\r\n */\r\nexport async function validateTemplate(\r\n  input: ExerciseTemplateInput\r\n): Promise<ValidationResult> {\r\n  const errors: string[] = [];\r\n  const warnings: string[] = [];\r\n\r\n  // 1. Zod ìŠ¤í‚¤ë§ˆ ê²€ì¦\r\n  const schemaResult = exerciseTemplateSchema.safeParse(input);\r\n  \r\n  if (!schemaResult.success) {\r\n    schemaResult.error.issues.forEach((err) => {\r\n      errors.push(`${err.path.join(\".\")}: ${err.message}`);\r\n    });\r\n    return { success: false, errors, warnings };\r\n  }\r\n\r\n  const validated = schemaResult.data;\r\n\r\n  // 2. ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ì¡°ê±´ ê²€ì¦\r\n  // body_part ì¡´ì¬ ì—¬ë¶€ í™•ì¸\r\n  const bodyPart = await prisma.bodyPart.findUnique({\r\n    where: { name: validated.bodyPartName },\r\n  });\r\n\r\n  if (!bodyPart) {\r\n    errors.push(`ë¶€ìœ„ '${validated.bodyPartName}'ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`);\r\n  }\r\n\r\n  // equipment_types ì¡´ì¬ ì—¬ë¶€ í™•ì¸\r\n  if (validated.equipmentTypes && validated.equipmentTypes.length > 0) {\r\n    const equipmentTypes = await prisma.equipmentType.findMany({\r\n      where: {\r\n        name: { in: validated.equipmentTypes },\r\n      },\r\n    });\r\n\r\n    const foundNames = new Set(equipmentTypes.map((et) => et.name));\r\n    const missingNames = validated.equipmentTypes.filter(\r\n      (name) => !foundNames.has(name)\r\n    );\r\n\r\n    if (missingNames.length > 0) {\r\n      errors.push(\r\n        `ë‹¤ìŒ ê¸°êµ¬ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤: ${missingNames.join(\", \")}`\r\n      );\r\n    }\r\n  }\r\n\r\n  // 3. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²€ì¦\r\n  // intensity_level ë²”ìœ„ í™•ì¸ (Zodì—ì„œ ì´ë¯¸ ê²€ì¦ë˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ)\r\n  if (\r\n    validated.intensity_level !== undefined &&\r\n    (validated.intensity_level < 1 || validated.intensity_level > 4)\r\n  ) {\r\n    errors.push(\"ê°•ë„ ë ˆë²¨ì€ 1-4 ë²”ìœ„ì—¬ì•¼ í•©ë‹ˆë‹¤.\");\r\n  }\r\n\r\n  // difficulty_score ë²”ìœ„ í™•ì¸\r\n  if (\r\n    validated.difficulty_score !== undefined &&\r\n    (validated.difficulty_score < 1 || validated.difficulty_score > 10)\r\n  ) {\r\n    errors.push(\"ë‚œì´ë„ ì ìˆ˜ëŠ” 1-10 ë²”ìœ„ì—¬ì•¼ í•©ë‹ˆë‹¤.\");\r\n  }\r\n\r\n  // ì–‘ìˆ˜ ê²€ì¦ (Zodì—ì„œ ì´ë¯¸ ê²€ì¦ë˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ)\r\n  if (\r\n    validated.duration_minutes !== undefined &&\r\n    validated.duration_minutes <= 0\r\n  ) {\r\n    errors.push(\"ìš´ë™ ì‹œê°„ì€ 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\");\r\n  }\r\n\r\n  if (validated.reps !== undefined && validated.reps <= 0) {\r\n    errors.push(\"ë°˜ë³µ íšŸìˆ˜ëŠ” 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\");\r\n  }\r\n\r\n  if (validated.sets !== undefined && validated.sets <= 0) {\r\n    errors.push(\"ì„¸íŠ¸ ìˆ˜ëŠ” 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\");\r\n  }\r\n\r\n  if (validated.rest_seconds !== undefined && validated.rest_seconds <= 0) {\r\n    errors.push(\"íœ´ì‹ ì‹œê°„ì€ 0ë³´ë‹¤ í° ê°’ì´ì–´ì•¼ í•©ë‹ˆë‹¤.\");\r\n  }\r\n\r\n  // 4. ì¤‘ë³µ ê²€ì¦ (ë™ì¼í•œ name + bodyPartName ì¡°í•©)\r\n  if (bodyPart) {\r\n    const existing = await prisma.exerciseTemplate.findFirst({\r\n      where: {\r\n        name: validated.name,\r\n        bodyPartId: bodyPart.id,\r\n      },\r\n    });\r\n\r\n    if (existing) {\r\n      warnings.push(\r\n        `ë™ì¼í•œ ì´ë¦„ê³¼ ë¶€ìœ„ ì¡°í•©ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤: ${validated.name} (${validated.bodyPartName})`\r\n      );\r\n    }\r\n  }\r\n\r\n  return {\r\n    success: errors.length === 0,\r\n    errors,\r\n    warnings: warnings.length > 0 ? warnings : undefined,\r\n  };\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\body-part-bank.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\body-part-hierarchy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\body-part-merge.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\database.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\difficulty.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\exercise-template.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\gym-detail.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\gym-search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\naver-map.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\naver-maps.d.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[283,286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[283,286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[305,308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[305,308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[327,330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[327,330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[423,426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[423,426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[492,495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[492,495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[568,571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[568,571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[924,927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[924,927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[944,947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[944,947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\src\\types\\operating-hours.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\body-part-bank.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\body-part-merge.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\database.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\difficulty.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\exercise-template.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\gym-search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\types\\naver-map.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\coding\\REHAP_APP\\nextjs-supabase-boilerplate-main\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
Waiting for the debugger to disconnect...
Waiting for the debugger to disconnect...
